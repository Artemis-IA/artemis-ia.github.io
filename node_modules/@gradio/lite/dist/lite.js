const __vite__fileDeps=["./assets/Blocks-DULSXkxK.js","./assets/Button-DElDztjl.js","./assets/Button-CTZL5Nos.css","./assets/Blocks-yLdzXwzS.css","./assets/Login-DhUCc-x6.js","./assets/Index-C5HhRf_B.js","./assets/Index-B0JJ6p9c.css","./assets/Textbox-C7w1i1hR.js","./assets/BlockTitle-Csqgpqs_.js","./assets/Info-B2sCcmSb.js","./assets/Check-DUHlVfau.js","./assets/Copy-ymoZbjKn.js","./assets/Textbox-D8IAzrZj.css","./assets/Index-Ci8f-1xs.js","./assets/Index-CptIZeFZ.css","./assets/Login-BCwzjozv.css","./assets/Example-Cj3ii62O.css","./assets/index-DFHA_eNK.js","./assets/index-BqxHLY7P.js","./assets/index-CpeeA8tS.js","./assets/index-Bum787c0.js","./assets/index-BEurY6Ug.js","./assets/index-tbyR1uKq.js","./assets/frontmatter-BJqO9h-r.js","./assets/yaml-DsCXHVTH.js","./assets/index-Bp8_uElI.js","./assets/wrapper-CviSselG-DCvi549i.js","./assets/__vite-browser-external-DFe-p4yY.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();const Uh=new Map;function o_(i){const e=Uh.get(i.toString());if(e)return console.debug(`Reusing the cached worker blob URL for ${i.toString()}.`),e;const t=new Blob([`importScripts("${i.toString()}");`],{type:"text/javascript"}),n=URL.createObjectURL(t);return Uh.set(i.toString(),n),n}class l_{constructor(e,t){const{shared:n=!1,...r}=t??{};try{this.worker=n?new SharedWorker(e,r):new Worker(e,r)}catch{console.debug(`Failed to load a worker script from ${e.toString()}. Trying to load a cross-origin worker...`);const o=o_(e);this.worker=n?new SharedWorker(o,r):new Worker(o,r)}}}class a_{constructor(){this.promiseInternal=new Promise((e,t)=>{this.resolveInternal=e,this.rejectInternal=t})}get promise(){return this.promiseInternal}resolve(e){this.resolveInternal(e)}reject(e){this.rejectInternal(e)}}function h_(i){const e=[];for(const[t,n]of Object.entries(i))e.push([t,n]);return e}function jh(i){let e="";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e}function qf(i){return i=i.map(([e,t])=>[jh(e),jh(t)]),Object.fromEntries(i)}function c_(i,e){const t=e.toLowerCase();for(const[n,r]of Object.entries(i))if(n.toLowerCase()===t)return r}function u_(i,e){if(Math.floor(e.status/100)!==2){let t,n;try{t=new TextDecoder().decode(e.body)}catch{t="(failed to decode body)"}try{n=JSON.parse(t)}catch{n="(failed to parse body as JSON)"}console.error("Wasm HTTP error",{request:i,response:e,bodyText:t,bodyJson:n})}}class f_ extends EventTarget{constructor(e){super(),this.firstRunPromiseDelegate=new a_;const t=e.sharedWorkerMode;console.debug("WorkerProxy.constructor(): Create a new worker.");const n=new l_(new URL(""+new URL("assets/webworker-C9l3VxDC.js",import.meta.url).href,import.meta.url),{shared:t});this.worker=n.worker,t?(this.postMessageTarget=this.worker.port,this.postMessageTarget.start(),this.postMessageTarget.onmessage=r=>{this._processWorkerMessage(r.data)}):(this.postMessageTarget=this.worker,this.worker.onmessage=r=>{this._processWorkerMessage(r.data)}),this.postMessageAsync({type:"init-env",data:{gradioWheelUrl:e.gradioWheelUrl,gradioClientWheelUrl:e.gradioClientWheelUrl}}).then(()=>{console.debug("WorkerProxy.constructor(): Environment initialization is done.")}).catch(r=>{console.error("WorkerProxy.constructor(): Initialization failed.",r),this.dispatchEvent(new CustomEvent("initialization-error",{detail:r}))}),this.postMessageAsync({type:"init-app",data:{files:e.files,requirements:e.requirements}}).then(()=>{this.dispatchEvent(new CustomEvent("initialization-completed",{detail:null}))}).catch(r=>{console.error("WorkerProxy.constructor(): Initialization failed.",r),this.dispatchEvent(new CustomEvent("initialization-error",{detail:r}))})}async runPythonCode(e){await this.postMessageAsync({type:"run-python-code",data:{code:e}}),this.firstRunPromiseDelegate.resolve()}async runPythonFile(e){await this.postMessageAsync({type:"run-python-file",data:{path:e}}),this.firstRunPromiseDelegate.resolve()}postMessageAsync(e){return new Promise((t,n)=>{const r=new MessageChannel;r.port1.onmessage=s=>{r.port1.close();const o=s.data;if(o.type==="reply:error"){n(o.error);return}t(o.data)},this.postMessageTarget.postMessage(e,[r.port2])})}_processWorkerMessage(e){switch(e.type){case"progress-update":{this.dispatchEvent(new CustomEvent("progress-update",{detail:e.data.log}));break}}}requestAsgi(e){const t=new MessageChannel,n={type:"asgi-request",data:{scope:e}};return this.postMessageTarget.postMessage(n,[t.port2]),t.port1}async httpRequest(e){return await this.firstRunPromiseDelegate.promise,console.debug("WorkerProxy.httpRequest()",e),new Promise((t,n)=>{const r={type:"http",asgi:{version:"3.0",spec_version:"2.1"},http_version:"1.1",scheme:"http",method:e.method,path:decodeURIComponent(e.path),query_string:decodeURIComponent(e.query_string),root_path:"",headers:h_(e.headers)},s=this.requestAsgi(r);let o,l,a=new Uint8Array;if(s.addEventListener("message",h=>{const c=h.data;if(console.debug("send from ASGIapp",c),c.type==="http.response.start")o=c.status,l=qf(c.headers);else if(c.type==="http.response.body"){if(a=new Uint8Array([...a,...c.body]),!c.more_body){const u={status:o,headers:l,body:a};console.debug("HTTP response",u),s.postMessage({type:"http.disconnect"}),u_(e,u),t(u)}}else n(`Unhandled ASGI event: ${JSON.stringify(c)}`)}),s.start(),e.body instanceof ReadableStream){const h=e.body.getReader();h.read().then(function c({done:u,value:f}){if(u){s.postMessage({type:"http.request",more_body:!1,body:void 0});return}return s.postMessage({type:"http.request",more_body:!u,body:f}),h.read().then(c)})}else s.postMessage({type:"http.request",more_body:!1,body:e.body??void 0})})}writeFile(e,t,n){return this.postMessageAsync({type:"file:write",data:{path:e,data:t,opts:n}})}renameFile(e,t){return this.postMessageAsync({type:"file:rename",data:{oldPath:e,newPath:t}})}unlink(e){return this.postMessageAsync({type:"file:unlink",data:{path:e}})}install(e){return this.postMessageAsync({type:"install",data:{requirements:e}})}terminate(){p_(this.postMessageTarget)&&(console.debug("Closing the message port..."),this.postMessageTarget.close()),d_(this.worker)&&(console.debug("Terminating the worker..."),this.worker.terminate())}}function d_(i){return"terminate"in i}function p_(i){return"close"in i}class m_ extends EventTarget{constructor(e,t){super(),this.url=t,this.readyState=0,this.addEventListener("open",r=>{this.onopen&&this.onopen(r)}),this.addEventListener("message",r=>{this.onmessage&&this.onmessage(r)}),this.addEventListener("error",r=>{this.onerror&&this.onerror(r)});const n={type:"http",asgi:{version:"3.0",spec_version:"2.1"},http_version:"1.1",scheme:"http",method:"GET",path:t.pathname,query_string:t.searchParams.toString(),root_path:"",headers:[["accept","text/event-stream"]]};this.port=e.requestAsgi(n),this.port.addEventListener("message",this._handleAsgiSendEvent.bind(this)),this.port.start(),this.port.postMessage({type:"http.request"})}close(){this.readyState!==2&&(this.port.postMessage({type:"http.disconnect"}),this.port.close(),this.readyState=2)}_handleAsgiSendEvent(e){const t=e.data;if(t.type==="http.response.start"){const n=t.status,r=qf(t.headers);console.debug("[MessagePortEventSource] HTTP response start",{status:n,headers:r});const s=c_(r,"content-type");if(n!==200||s==null||s.split(";")[0]!=="text/event-stream"){this.readyState=2,this.dispatchEvent(new Event("error"));return}this.readyState=1,this.dispatchEvent(new Event("open"))}else if(t.type==="http.response.body"){const n=new TextDecoder().decode(t.body);console.debug("[MessagePortEventSource] HTTP response body",n),this.interpretEventStream(n),t.more_body||this.close()}}interpretEventStream(e){const t=this,n=e.split(/\r\n|\n|\r/);let r="",s="",o="";for(const h of n)if(h==="")a();else if(!h.startsWith(":"))if(h.includes(":")){const[c,...u]=h.split(":"),f=u.join(":").trimStart();l(c,f)}else l(h,"");function l(h,c){h==="event"?s=c:h==="data"?r+=c+`
`:h==="id"&&(c.includes("\0")||(o=c))}function a(){if(r===""){r="",s="";return}r.endsWith(`
`)&&(r=r.slice(0,-1));const h=new MessageEvent(s===""?"message":s,{data:r,lastEventId:o,origin:t.url.origin});r="",s="",t.readyState!==2&&(console.debug("[MessagePortEventSource] dispatching event",h),t.dispatchEvent(h))}}}function zh(i){const e=i.split(`
`);let t=null;return e.forEach(r=>{const s=r.match(/^(\s*)\S/);if(s){const o=s[1].length;t=t!==null?Math.min(t,o):o}}),t===null||t===0?i.trim():e.map(r=>r.substring(t)).join(`
`).trim()}function g_(i){return i.split(`
`).filter(e=>!e.startsWith("#")).map(e=>e.trim()).filter(e=>e!=="")}function b_(i){const e="gradio-lite";if(customElements.get(e))return;class t extends HTMLElement{constructor(){super(...arguments),this.controller=null}connectedCallback(){window.requestAnimationFrame(()=>{const r=this.parseGradioComponentOptions(),s=this.parseGradioLiteAppOptions();this.innerHTML="",this.controller=i({target:this,code:s.code,requirements:s.requirements,files:s.files,entrypoint:s.entrypoint,playground:this.hasAttribute("playground"),layout:this.getAttribute("layout"),...r})})}disconnectedCallback(){this.controller?.unmount()}parseGradioComponentOptions(){const r=this.hasAttribute("info"),s=this.hasAttribute("container"),o=this.hasAttribute("embed"),l=this.getAttribute("initial-height"),a=this.hasAttribute("eager"),h=this.getAttribute("theme"),c=this.hasAttribute("auto-scroll"),u=this.hasAttribute("control-page-title"),f=this.hasAttribute("app-mode"),d=this.hasAttribute("shared-worker");return{info:r,container:s,isEmbed:o,initialHeight:l??void 0,eager:a,themeMode:h!=null&&["light","dark"].includes(h)?h:null,autoScroll:c,controlPageTitle:u,appMode:f,sharedWorkerMode:d}}parseGradioLiteAppOptions(){const r={},s=this.getElementsByTagName("gradio-file");for(const h of s){const c=h.getAttribute("name");if(c==null)throw new Error("<gradio-file> must have the name attribute.");const u=h.hasAttribute("entrypoint"),f=h.getAttribute("url");if(r.files??={},f!=null)r.files[c]={url:f};else{let d=h.textContent??"";c.endsWith(".py")&&(d=zh(d)),r.files[c]={data:d}}if(u){if(r.entrypoint!=null)throw new Error("Multiple entrypoints are not allowed.");r.entrypoint=c}}if(r.entrypoint==null){const h=this.getElementsByTagName("gradio-code");if(h.length===0){let c="";this.childNodes.forEach(u=>{u.nodeType===Node.TEXT_NODE&&(c+=u.textContent)}),r.code=c||void 0}else{h.length>1&&console.warn("Multiple <gradio-code> elements are found. Only the first one will be used.");const c=h[0];r.code=c?.textContent??void 0}r.code=r.code&&zh(r.code)}const o=this.getElementsByTagName("gradio-requirements");o.length>1&&console.warn("Multiple <gradio-requirements> elements are found. Only the first one will be used.");const a=o[0]?.textContent??"";return r.requirements=g_(a),r}}customElements.define(e,t)}function Ee(){}const Ha=i=>i;function Fa(i,e){for(const t in e)i[t]=e[t];return i}function $f(i){return i()}function Wh(){return Object.create(null)}function _i(i){i.forEach($f)}function nn(i){return typeof i=="function"}function yt(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let es;function nM(i,e){return i===e?!0:(es||(es=document.createElement("a")),es.href=e,i===es.href)}function rM(i,e){return i!=i?e==e:i!==e}function __(i){return Object.keys(i).length===0}function Va(i,...e){if(i==null){for(const n of e)n(void 0);return Ee}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function sM(i){let e;return Va(i,t=>e=t)(),e}function Tn(i,e,t){i.$$.on_destroy.push(Va(e,t))}function Fr(i,e,t,n){if(i){const r=Kf(i,e,t,n);return i[0](r)}}function Kf(i,e,t,n){return i[1]&&n?Fa(t.ctx.slice(),i[1](n(e))):t.ctx}function Vr(i,e,t,n){if(i[2]&&n){const r=i[2](n(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function Ur(i,e,t,n,r,s){if(r){const o=Kf(e,t,n,s);i.p(o,r)}}function jr(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function oM(i){const e={};for(const t in i)t[0]!=="$"&&(e[t]=i[t]);return e}function lM(i,e){const t={};e=new Set(e);for(const n in i)!e.has(n)&&n[0]!=="$"&&(t[n]=i[n]);return t}function aM(i){return i??""}function hM(i,e,t){return i.set(t),e}function cM(i){return i&&nn(i.destroy)?i.destroy:Ee}function uM(i){const e=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[i,"px"]}const Xf=typeof window<"u";let xr=Xf?()=>window.performance.now():()=>Date.now(),Ua=Xf?i=>requestAnimationFrame(i):Ee;const kn=new Set;function Jf(i){kn.forEach(e=>{e.c(i)||(kn.delete(e),e.f())}),kn.size!==0&&Ua(Jf)}function ho(i){let e;return kn.size===0&&Ua(Jf),{promise:new Promise(t=>{kn.add(e={c:i,f:t})}),abort(){kn.delete(e)}}}const Yf=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class co{_listeners="WeakMap"in Yf?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(const t of e)co.entries.set(t.target,t),this._listeners.get(t.target)?.(t)}))}}co.entries="WeakMap"in Yf?new WeakMap:void 0;function z(i,e){i.appendChild(e)}function Zf(i){if(!i)return document;const e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function y_(i){const e=X("style");return e.textContent="/* empty */",w_(Zf(i),e),e.sheet}function w_(i,e){return z(i.head||i,e),e.sheet}function B(i,e,t){i.insertBefore(e,t||null)}function N(i){i.parentNode&&i.parentNode.removeChild(i)}function Qf(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function X(i){return document.createElement(i)}function Ze(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ce(i){return document.createTextNode(i)}function Ae(){return ce(" ")}function Ct(){return ce("")}function Ns(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function fM(i){return function(e){return e.preventDefault(),i.call(this,e)}}function dM(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function S(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}const v_=["width","height"];function k_(i,e){const t=Object.getOwnPropertyDescriptors(i.__proto__);for(const n in e)e[n]==null?i.removeAttribute(n):n==="style"?i.style.cssText=e[n]:n==="__value"?i.value=i[n]=e[n]:t[n]&&t[n].set&&v_.indexOf(n)===-1?i[n]=e[n]:S(i,n,e[n])}function x_(i,e){Object.keys(e).forEach(t=>{S_(i,t,e[t])})}function S_(i,e,t){const n=e.toLowerCase();n in i?i[n]=typeof i[n]=="boolean"&&t===""?!0:t:e in i?i[e]=typeof i[e]=="boolean"&&t===""?!0:t:S(i,e,t)}function Gh(i){return/-/.test(i)?x_:k_}function pM(i){let e;return{p(...t){e=t,e.forEach(n=>i.push(n))},r(){e.forEach(t=>i.splice(i.indexOf(t),1))}}}function mM(i){return i===""?null:+i}function A_(i){return Array.from(i.childNodes)}function Ue(i,e){e=""+e,i.data!==e&&(i.data=e)}function gM(i,e){i.value=e??""}function te(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,"")}let ts;function E_(){if(ts===void 0){ts=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ts=!0}}return ts}function bM(i,e){getComputedStyle(i).position==="static"&&(i.style.position="relative");const n=X("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=E_();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Ns(window,"message",o=>{o.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{s=Ns(n.contentWindow,"resize",e),e()}),z(i,n),()=>{(r||s&&n.contentWindow)&&s(),N(n)}}const _M=new co({box:"content-box"});function Y(i,e,t){i.classList.toggle(e,!!t)}function ed(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}class yM{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Ze(t.nodeName):this.e=X(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)B(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(N)}}function wM(i,e){return new i(e)}const Bs=new Map;let Hs=0;function C_(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function T_(i,e){const t={stylesheet:y_(e),rules:{}};return Bs.set(i,t),t}function Fs(i,e,t,n,r,s,o,l=0){const a=16.666/n;let h=`{
`;for(let m=0;m<=1;m+=a){const b=e+(t-e)*s(m);h+=m*100+`%{${o(b,1-b)}}
`}const c=h+`100% {${o(t,1-t)}}
}`,u=`__svelte_${C_(c)}_${l}`,f=Zf(i),{stylesheet:d,rules:p}=Bs.get(f)||T_(f,i);p[u]||(p[u]=!0,d.insertRule(`@keyframes ${u} ${c}`,d.cssRules.length));const g=i.style.animation||"";return i.style.animation=`${g?`${g}, `:""}${u} ${n}ms linear ${r}ms 1 both`,Hs+=1,u}function Vs(i,e){const t=(i.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),r=t.length-n.length;r&&(i.style.animation=n.join(", "),Hs-=r,Hs||M_())}function M_(){Ua(()=>{Hs||(Bs.forEach(i=>{const{ownerNode:e}=i.stylesheet;e&&N(e)}),Bs.clear())})}let Sr;function pr(i){Sr=i}function rn(){if(!Sr)throw new Error("Function called outside component initialization");return Sr}function vM(i){rn().$$.before_update.push(i)}function Ar(i){rn().$$.on_mount.push(i)}function kM(i){rn().$$.after_update.push(i)}function ja(i){rn().$$.on_destroy.push(i)}function uo(){const i=rn();return(e,t,{cancelable:n=!1}={})=>{const r=i.$$.callbacks[e];if(r){const s=ed(e,t,{cancelable:n});return r.slice().forEach(o=>{o.call(i,s)}),!s.defaultPrevented}return!0}}function O_(i,e){return rn().$$.context.set(i,e),e}function D_(i){return rn().$$.context.get(i)}function P_(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const gn=[],_t=[];let xn=[];const Pl=[],td=Promise.resolve();let Ll=!1;function id(){Ll||(Ll=!0,td.then(E))}function L_(){return id(),td}function Mn(i){xn.push(i)}function mr(i){Pl.push(i)}const Fo=new Set;let un=0;function E(){if(un!==0)return;const i=Sr;do{try{for(;un<gn.length;){const e=gn[un];un++,pr(e),R_(e.$$)}}catch(e){throw gn.length=0,un=0,e}for(pr(null),gn.length=0,un=0;_t.length;)_t.pop()();for(let e=0;e<xn.length;e+=1){const t=xn[e];Fo.has(t)||(Fo.add(t),t())}xn.length=0}while(gn.length);for(;Pl.length;)Pl.pop()();Ll=!1,Fo.clear(),pr(i)}function R_(i){if(i.fragment!==null){i.update(),_i(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Mn)}}function I_(i){const e=[],t=[];xn.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),xn=e}let Jn;function za(){return Jn||(Jn=Promise.resolve(),Jn.then(()=>{Jn=null})),Jn}function $i(i,e,t){i.dispatchEvent(ed(`${e?"intro":"outro"}${t}`))}const Ss=new Set;let si;function zt(){si={r:0,c:[],p:si}}function Wt(){si.r||_i(si.c),si=si.p}function Q(i,e){i&&i.i&&(Ss.delete(i),i.i(e))}function ie(i,e,t,n){if(i&&i.o){if(Ss.has(i))return;Ss.add(i),si.c.push(()=>{Ss.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}const Wa={duration:0};function xM(i,e,t){const n={direction:"in"};let r=e(i,t,n),s=!1,o,l,a=0;function h(){o&&Vs(i,o)}function c(){const{delay:f=0,duration:d=300,easing:p=Ha,tick:g=Ee,css:m}=r||Wa;m&&(o=Fs(i,0,1,d,f,p,m,a++)),g(0,1);const b=xr()+f,w=b+d;l&&l.abort(),s=!0,Mn(()=>$i(i,!0,"start")),l=ho(y=>{if(s){if(y>=w)return g(1,0),$i(i,!0,"end"),h(),s=!1;if(y>=b){const k=p((y-b)/d);g(k,1-k)}}return s})}let u=!1;return{start(){u||(u=!0,Vs(i),nn(r)?(r=r(n),za().then(c)):c())},invalidate(){u=!1},end(){s&&(h(),s=!1)}}}function SM(i,e,t){const n={direction:"out"};let r=e(i,t,n),s=!0,o;const l=si;l.r+=1;let a;function h(){const{delay:c=0,duration:u=300,easing:f=Ha,tick:d=Ee,css:p}=r||Wa;p&&(o=Fs(i,1,0,u,c,f,p));const g=xr()+c,m=g+u;Mn(()=>$i(i,!1,"start")),"inert"in i&&(a=i.inert,i.inert=!0),ho(b=>{if(s){if(b>=m)return d(0,1),$i(i,!1,"end"),--l.r||_i(l.c),!1;if(b>=g){const w=f((b-g)/u);d(1-w,w)}}return s})}return nn(r)?za().then(()=>{r=r(n),h()}):h(),{end(c){c&&"inert"in i&&(i.inert=a),c&&r.tick&&r.tick(1,0),s&&(o&&Vs(i,o),s=!1)}}}function AM(i,e,t,n){let s=e(i,t,{direction:"both"}),o=n?0:1,l=null,a=null,h=null,c;function u(){h&&Vs(i,h)}function f(p,g){const m=p.b-o;return g*=Math.abs(m),{a:o,b:p.b,d:m,duration:g,start:p.start,end:p.start+g,group:p.group}}function d(p){const{delay:g=0,duration:m=300,easing:b=Ha,tick:w=Ee,css:y}=s||Wa,k={start:xr()+g,b:p};p||(k.group=si,si.r+=1),"inert"in i&&(p?c!==void 0&&(i.inert=c):(c=i.inert,i.inert=!0)),l||a?a=k:(y&&(u(),h=Fs(i,o,p,m,g,b,y)),p&&w(0,1),l=f(k,m),Mn(()=>$i(i,p,"start")),ho(A=>{if(a&&A>a.start&&(l=f(a,m),a=null,$i(i,l.b,"start"),y&&(u(),h=Fs(i,o,l.b,l.duration,0,b,s.css))),l){if(A>=l.end)w(o=l.b,1-o),$i(i,l.b,"end"),a||(l.b?u():--l.group.r||_i(l.group.c)),l=null;else if(A>=l.start){const x=A-l.start;o=l.a+l.d*b(x/l.duration),w(o,1-o)}}return!!(l||a)}))}return{run(p){nn(s)?za().then(()=>{s=s({direction:p?"in":"out"}),d(p)}):d(p)},end(){u(),l=a=null}}}function Us(i){return i?.length!==void 0?i:Array.from(i)}function EM(i,e){i.d(1),e.delete(i.key)}function N_(i,e){ie(i,1,1,()=>{e.delete(i.key)})}function CM(i,e){i.f(),N_(i,e)}function TM(i,e,t,n,r,s,o,l,a,h,c,u){let f=i.length,d=s.length,p=f;const g={};for(;p--;)g[i[p].key]=p;const m=[],b=new Map,w=new Map,y=[];for(p=d;p--;){const R=u(r,s,p),D=t(R);let F=o.get(D);F?y.push(()=>F.p(R,e)):(F=h(D,R),F.c()),b.set(D,m[p]=F),D in g&&w.set(D,Math.abs(p-g[D]))}const k=new Set,A=new Set;function x(R){Q(R,1),R.m(l,c),o.set(R.key,R),c=R.first,d--}for(;f&&d;){const R=m[d-1],D=i[f-1],F=R.key,L=D.key;R===D?(c=R.first,f--,d--):b.has(L)?!o.has(F)||k.has(F)?x(R):A.has(L)?f--:w.get(F)>w.get(L)?(A.add(F),x(R)):(k.add(L),f--):(a(D,o),f--)}for(;f--;){const R=i[f];b.has(R.key)||a(R,o)}for(;d;)x(m[d-1]);return _i(y),m}function nd(i,e){const t={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=e[s];if(l){for(const a in o)a in l||(n[a]=1);for(const a in l)r[a]||(t[a]=l[a],r[a]=1);i[s]=l}else for(const a in o)r[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function B_(i){return typeof i=="object"&&i!==null?i:{}}function gr(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function pt(i){i&&i.c()}function nt(i,e,t){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),Mn(()=>{const s=i.$$.on_mount.map($f).filter(nn);i.$$.on_destroy?i.$$.on_destroy.push(...s):_i(s),i.$$.on_mount=[]}),r.forEach(Mn)}function rt(i,e){const t=i.$$;t.fragment!==null&&(I_(t.after_update),_i(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function H_(i,e){i.$$.dirty[0]===-1&&(gn.push(i),id(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function qt(i,e,t,n,r,s,o=null,l=[-1]){const a=Sr;pr(i);const h=i.$$={fragment:null,ctx:[],props:s,update:Ee,not_equal:r,bound:Wh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Wh(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(h.root);let c=!1;if(h.ctx=t?t(i,e.props||{},(u,f,...d)=>{const p=d.length?d[0]:f;return h.ctx&&r(h.ctx[u],h.ctx[u]=p)&&(!h.skip_bound&&h.bound[u]&&h.bound[u](p),c&&H_(i,u)),f}):[],h.update(),c=!0,_i(h.before_update),h.fragment=n?n(h.ctx):!1,e.target){if(e.hydrate){const u=A_(e.target);h.fragment&&h.fragment.l(u),u.forEach(N)}else h.fragment&&h.fragment.c();e.intro&&Q(i.$$.fragment),nt(i,e.target,e.anchor),E()}pr(a)}class $t{$$=void 0;$$set=void 0;$destroy(){rt(this,1),this.$destroy=Ee}$on(e,t){if(!nn(t))return Ee;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!__(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const F_="modulepreload",V_=function(i,e){return new URL(i,e).href},qh={},Fe=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");r=Promise.all(t.map(a=>{if(a=V_(a,n),a in qh)return;qh[a]=!0;const h=a.endsWith(".css"),c=h?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const p=s[d];if(p.href===a&&(!h||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":F_,h||(f.as="script",f.crossOrigin=""),f.href=a,l&&f.setAttribute("nonce",l),document.head.appendChild(f),h)return new Promise((d,p)=>{f.addEventListener("load",d),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},U_="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='10'%20height='10'%20fill='none'%3e%3cpath%20fill='%23FF3270'%20d='M1.93%206.03v2.04h2.04V6.03H1.93Z'/%3e%3cpath%20fill='%23861FFF'%20d='M6.03%206.03v2.04h2.04V6.03H6.03Z'/%3e%3cpath%20fill='%23097EFF'%20d='M1.93%201.93v2.04h2.04V1.93H1.93Z'/%3e%3cpath%20fill='%23000'%20fill-rule='evenodd'%20d='M.5%201.4c0-.5.4-.9.9-.9h3.1a.9.9%200%200%201%20.87.67A2.44%202.44%200%200%201%209.5%202.95c0%20.65-.25%201.24-.67%201.68.39.1.67.46.67.88v3.08c0%20.5-.4.91-.9.91H1.4a.9.9%200%200%201-.9-.9V1.4Zm1.43.53v2.04h2.04V1.93H1.93Zm0%206.14V6.03h2.04v2.04H1.93Zm4.1%200V6.03h2.04v2.04H6.03Zm0-5.12a1.02%201.02%200%201%201%202.04%200%201.02%201.02%200%200%201-2.04%200Z'%20clip-rule='evenodd'/%3e%3cpath%20fill='%23FFD702'%20d='M7.05%201.93a1.02%201.02%200%201%200%200%202.04%201.02%201.02%200%200%200%200-2.04Z'/%3e%3c/svg%3e",fn=[];function j_(i,e){return{subscribe:Un(i,e).subscribe}}function Un(i,e=Ee){let t;const n=new Set;function r(l){if(yt(i,l)&&(i=l,t)){const a=!fn.length;for(const h of n)h[1](),fn.push(h,i);if(a){for(let h=0;h<fn.length;h+=2)fn[h][0](fn[h+1]);fn.length=0}}}function s(l){r(l(i))}function o(l,a=Ee){const h=[l,a];return n.add(h),n.size===1&&(t=e(r,s)||Ee),l(i),()=>{n.delete(h),n.size===0&&t&&(t(),t=null)}}return{set:r,update:s,subscribe:o}}function jn(i,e,t){const n=!Array.isArray(i),r=n?[i]:i;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return j_(t,(o,l)=>{let a=!1;const h=[];let c=0,u=Ee;const f=()=>{if(c)return;u();const p=e(n?h[0]:h,o,l);s?o(p):u=nn(p)?p:Ee},d=r.map((p,g)=>Va(p,m=>{h[g]=m,c&=~(1<<g),a&&f()},()=>{c|=1<<g}));return a=!0,f(),function(){_i(d),u(),a=!1}})}var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function OM(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var W_=function(e){return G_(e)&&!q_(e)};function G_(i){return!!i&&typeof i=="object"}function q_(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||X_(i)}var $_=typeof Symbol=="function"&&Symbol.for,K_=$_?Symbol.for("react.element"):60103;function X_(i){return i.$$typeof===K_}function J_(i){return Array.isArray(i)?[]:{}}function Er(i,e){return e.clone!==!1&&e.isMergeableObject(i)?On(J_(i),i,e):i}function Y_(i,e,t){return i.concat(e).map(function(n){return Er(n,t)})}function Z_(i,e){if(!e.customMerge)return On;var t=e.customMerge(i);return typeof t=="function"?t:On}function Q_(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return Object.propertyIsEnumerable.call(i,e)}):[]}function $h(i){return Object.keys(i).concat(Q_(i))}function rd(i,e){try{return e in i}catch{return!1}}function ey(i,e){return rd(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function ty(i,e,t){var n={};return t.isMergeableObject(i)&&$h(i).forEach(function(r){n[r]=Er(i[r],t)}),$h(e).forEach(function(r){ey(i,r)||(rd(i,r)&&t.isMergeableObject(e[r])?n[r]=Z_(r,t)(i[r],e[r],t):n[r]=Er(e[r],t))}),n}function On(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||Y_,t.isMergeableObject=t.isMergeableObject||W_,t.cloneUnlessOtherwiseSpecified=Er;var n=Array.isArray(e),r=Array.isArray(i),s=n===r;return s?n?t.arrayMerge(i,e,t):ty(i,e,t):Er(e,t)}On.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return On(n,r,t)},{})};var iy=On,ny=iy;const ry=z_(ny);var Rl=function(i,e){return Rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Rl(i,e)};function fo(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Rl(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var we=function(){return we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},we.apply(this,arguments)};function sy(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(t[n[r]]=i[n[r]]);return t}function Vo(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}var pe;(function(i){i[i.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",i[i.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",i[i.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",i[i.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",i[i.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",i[i.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",i[i.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",i[i.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",i[i.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",i[i.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",i[i.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",i[i.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",i[i.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",i[i.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",i[i.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",i[i.INVALID_TAG=23]="INVALID_TAG",i[i.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",i[i.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",i[i.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(pe||(pe={}));var Pe;(function(i){i[i.literal=0]="literal",i[i.argument=1]="argument",i[i.number=2]="number",i[i.date=3]="date",i[i.time=4]="time",i[i.select=5]="select",i[i.plural=6]="plural",i[i.pound=7]="pound",i[i.tag=8]="tag"})(Pe||(Pe={}));var Dn;(function(i){i[i.number=0]="number",i[i.dateTime=1]="dateTime"})(Dn||(Dn={}));function Kh(i){return i.type===Pe.literal}function oy(i){return i.type===Pe.argument}function sd(i){return i.type===Pe.number}function od(i){return i.type===Pe.date}function ld(i){return i.type===Pe.time}function ad(i){return i.type===Pe.select}function hd(i){return i.type===Pe.plural}function ly(i){return i.type===Pe.pound}function cd(i){return i.type===Pe.tag}function ud(i){return!!(i&&typeof i=="object"&&i.type===Dn.number)}function Il(i){return!!(i&&typeof i=="object"&&i.type===Dn.dateTime)}var fd=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,ay=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function hy(i){var e={};return i.replace(ay,function(t){var n=t.length;switch(t[0]){case"G":e.era=n===4?"long":n===5?"narrow":"short";break;case"y":e.year=n===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=n===4?"long":n===5?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var cy=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function uy(i){if(i.length===0)throw new Error("Number skeleton cannot be empty");for(var e=i.split(cy).filter(function(f){return f.length>0}),t=[],n=0,r=e;n<r.length;n++){var s=r[n],o=s.split("/");if(o.length===0)throw new Error("Invalid number skeleton");for(var l=o[0],a=o.slice(1),h=0,c=a;h<c.length;h++){var u=c[h];if(u.length===0)throw new Error("Invalid number skeleton")}t.push({stem:l,options:a})}return t}function fy(i){return i.replace(/^(.*?)-/,"")}var Xh=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,dd=/^(@+)?(\+|#+)?[rs]?$/g,dy=/(\*)(0+)|(#+)(0+)|(0+)/g,pd=/^(0+)$/;function Jh(i){var e={};return i[i.length-1]==="r"?e.roundingPriority="morePrecision":i[i.length-1]==="s"&&(e.roundingPriority="lessPrecision"),i.replace(dd,function(t,n,r){return typeof r!="string"?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):r==="+"?e.minimumSignificantDigits=n.length:n[0]==="#"?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+(typeof r=="string"?r.length:0)),""}),e}function md(i){switch(i){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function py(i){var e;if(i[0]==="E"&&i[1]==="E"?(e={notation:"engineering"},i=i.slice(2)):i[0]==="E"&&(e={notation:"scientific"},i=i.slice(1)),e){var t=i.slice(0,2);if(t==="+!"?(e.signDisplay="always",i=i.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",i=i.slice(2)),!pd.test(i))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=i.length}return e}function Yh(i){var e={},t=md(i);return t||e}function my(i){for(var e={},t=0,n=i;t<n.length;t++){var r=n[t];switch(r.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=r.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=fy(r.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=we(we(we({},e),{notation:"scientific"}),r.options.reduce(function(a,h){return we(we({},a),Yh(h))},{}));continue;case"engineering":e=we(we(we({},e),{notation:"engineering"}),r.options.reduce(function(a,h){return we(we({},a),Yh(h))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(r.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(dy,function(a,h,c,u,f,d){if(h)e.minimumIntegerDigits=c.length;else{if(u&&f)throw new Error("We currently do not support maximum integer digits");if(d)throw new Error("We currently do not support exact integer digits")}return""});continue}if(pd.test(r.stem)){e.minimumIntegerDigits=r.stem.length;continue}if(Xh.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(Xh,function(a,h,c,u,f,d){return c==="*"?e.minimumFractionDigits=h.length:u&&u[0]==="#"?e.maximumFractionDigits=u.length:f&&d?(e.minimumFractionDigits=f.length,e.maximumFractionDigits=f.length+d.length):(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length),""});var s=r.options[0];s==="w"?e=we(we({},e),{trailingZeroDisplay:"stripIfInteger"}):s&&(e=we(we({},e),Jh(s)));continue}if(dd.test(r.stem)){e=we(we({},e),Jh(r.stem));continue}var o=md(r.stem);o&&(e=we(we({},e),o));var l=py(r.stem);l&&(e=we(we({},e),l))}return e}var is={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function gy(i,e){for(var t="",n=0;n<i.length;n++){var r=i.charAt(n);if(r==="j"){for(var s=0;n+1<i.length&&i.charAt(n+1)===r;)s++,n++;var o=1+(s&1),l=s<2?1:3+(s>>1),a="a",h=by(e);for((h=="H"||h=="k")&&(l=0);l-- >0;)t+=a;for(;o-- >0;)t=h+t}else r==="J"?t+="H":t+=r}return t}function by(i){var e=i.hourCycle;if(e===void 0&&i.hourCycles&&i.hourCycles.length&&(e=i.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=i.language,n;t!=="root"&&(n=i.maximize().region);var r=is[n||""]||is[t||""]||is["".concat(t,"-001")]||is["001"];return r[0]}var Uo,_y=new RegExp("^".concat(fd.source,"*")),yy=new RegExp("".concat(fd.source,"*$"));function ge(i,e){return{start:i,end:e}}var wy=!!String.prototype.startsWith&&"_a".startsWith("a",1),vy=!!String.fromCodePoint,ky=!!Object.fromEntries,xy=!!String.prototype.codePointAt,Sy=!!String.prototype.trimStart,Ay=!!String.prototype.trimEnd,Ey=!!Number.isSafeInteger,Cy=Ey?Number.isSafeInteger:function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i&&Math.abs(i)<=9007199254740991},Nl=!0;try{var Ty=bd("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Nl=((Uo=Ty.exec("a"))===null||Uo===void 0?void 0:Uo[0])==="a"}catch{Nl=!1}var Zh=wy?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},Bl=vy?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=e.length,s=0,o;r>s;){if(o=e[s++],o>1114111)throw RangeError(o+" is not a valid code point");n+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return n},Qh=ky?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var s=r[n],o=s[0],l=s[1];t[o]=l}return t},gd=xy?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r=e.charCodeAt(t),s;return r<55296||r>56319||t+1===n||(s=e.charCodeAt(t+1))<56320||s>57343?r:(r-55296<<10)+(s-56320)+65536}},My=Sy?function(e){return e.trimStart()}:function(e){return e.replace(_y,"")},Oy=Ay?function(e){return e.trimEnd()}:function(e){return e.replace(yy,"")};function bd(i,e){return new RegExp(i,e)}var Hl;if(Nl){var ec=bd("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Hl=function(e,t){var n;ec.lastIndex=t;var r=ec.exec(e);return(n=r[1])!==null&&n!==void 0?n:""}}else Hl=function(e,t){for(var n=[];;){var r=gd(e,t);if(r===void 0||_d(r)||Ry(r))break;n.push(r),t+=r>=65536?2:1}return Bl.apply(void 0,n)};var Dy=function(){function i(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return i.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},i.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var s=this.char();if(s===123){var o=this.parseArgument(e,n);if(o.err)return o;r.push(o.val)}else{if(s===125&&e>0)break;if(s===35&&(t==="plural"||t==="selectordinal")){var l=this.clonePosition();this.bump(),r.push({type:Pe.pound,location:ge(l,this.clonePosition())})}else if(s===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(pe.UNMATCHED_CLOSING_TAG,ge(this.clonePosition(),this.clonePosition()))}else if(s===60&&!this.ignoreTag&&Fl(this.peek()||0)){var o=this.parseTag(e,t);if(o.err)return o;r.push(o.val)}else{var o=this.parseLiteral(e,t);if(o.err)return o;r.push(o.val)}}}return{val:r,err:null}},i.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Pe.literal,value:"<".concat(r,"/>"),location:ge(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var o=s.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Fl(this.char()))return this.error(pe.INVALID_TAG,ge(l,this.clonePosition()));var a=this.clonePosition(),h=this.parseTagName();return r!==h?this.error(pe.UNMATCHED_CLOSING_TAG,ge(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Pe.tag,value:r,children:o,location:ge(n,this.clonePosition())},err:null}:this.error(pe.INVALID_TAG,ge(l,this.clonePosition())))}else return this.error(pe.UNCLOSED_TAG,ge(n,this.clonePosition()))}else return this.error(pe.INVALID_TAG,ge(n,this.clonePosition()))},i.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&Ly(this.char());)this.bump();return this.message.slice(e,this.offset())},i.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var s=this.tryParseQuote(t);if(s){r+=s;continue}var o=this.tryParseUnquoted(e,t);if(o){r+=o;continue}var l=this.tryParseLeftAngleBracket();if(l){r+=l;continue}break}var a=ge(n,this.clonePosition());return{val:{type:Pe.literal,value:r,location:a},err:null}},i.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Py(this.peek()||0))?(this.bump(),"<"):null},i.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(n);this.bump()}return Bl.apply(void 0,t)},i.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(t==="plural"||t==="selectordinal")||n===125&&e>0?null:(this.bump(),Bl(n))},i.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(pe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(pe.EMPTY_ARGUMENT,ge(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(pe.MALFORMED_ARGUMENT,ge(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(pe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Pe.argument,value:r,location:ge(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(pe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(pe.MALFORMED_ARGUMENT,ge(n,this.clonePosition()))}},i.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Hl(this.message,t),r=t+n.length;this.bumpTo(r);var s=this.clonePosition(),o=ge(e,s);return{value:n,location:o}},i.prototype.parseArgumentOptions=function(e,t,n,r){var s,o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(l){case"":return this.error(pe.EXPECT_ARGUMENT_TYPE,ge(o,a));case"number":case"date":case"time":{this.bumpSpace();var h=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition(),u=this.parseSimpleArgStyleIfPossible();if(u.err)return u;var f=Oy(u.val);if(f.length===0)return this.error(pe.EXPECT_ARGUMENT_STYLE,ge(this.clonePosition(),this.clonePosition()));var d=ge(c,this.clonePosition());h={style:f,styleLocation:d}}var p=this.tryParseArgumentClose(r);if(p.err)return p;var g=ge(r,this.clonePosition());if(h&&Zh(h?.style,"::",0)){var m=My(h.style.slice(2));if(l==="number"){var u=this.parseNumberSkeletonFromString(m,h.styleLocation);return u.err?u:{val:{type:Pe.number,value:n,location:g,style:u.val},err:null}}else{if(m.length===0)return this.error(pe.EXPECT_DATE_TIME_SKELETON,g);var b=m;this.locale&&(b=gy(m,this.locale));var f={type:Dn.dateTime,pattern:b,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?hy(b):{}},w=l==="date"?Pe.date:Pe.time;return{val:{type:w,value:n,location:g,style:f},err:null}}}return{val:{type:l==="number"?Pe.number:l==="date"?Pe.date:Pe.time,value:n,location:g,style:(s=h?.style)!==null&&s!==void 0?s:null},err:null}}case"plural":case"selectordinal":case"select":{var y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(pe.EXPECT_SELECT_ARGUMENT_OPTIONS,ge(y,we({},y)));this.bumpSpace();var k=this.parseIdentifierIfPossible(),A=0;if(l!=="select"&&k.value==="offset"){if(!this.bumpIf(":"))return this.error(pe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ge(this.clonePosition(),this.clonePosition()));this.bumpSpace();var u=this.tryParseDecimalInteger(pe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,pe.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(u.err)return u;this.bumpSpace(),k=this.parseIdentifierIfPossible(),A=u.val}var x=this.tryParsePluralOrSelectOptions(e,l,t,k);if(x.err)return x;var p=this.tryParseArgumentClose(r);if(p.err)return p;var R=ge(r,this.clonePosition());return l==="select"?{val:{type:Pe.select,value:n,options:Qh(x.val),location:R},err:null}:{val:{type:Pe.plural,value:n,options:Qh(x.val),offset:A,pluralType:l==="plural"?"cardinal":"ordinal",location:R},err:null}}default:return this.error(pe.INVALID_ARGUMENT_TYPE,ge(o,a))}},i.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(pe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},i.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var n=this.char();switch(n){case 39:{this.bump();var r=this.clonePosition();if(!this.bumpUntil("'"))return this.error(pe.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ge(r,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},i.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=uy(e)}catch{return this.error(pe.INVALID_NUMBER_SKELETON,t)}return{val:{type:Dn.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?my(n):{}},err:null}},i.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var s,o=!1,l=[],a=new Set,h=r.value,c=r.location;;){if(h.length===0){var u=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var f=this.tryParseDecimalInteger(pe.EXPECT_PLURAL_ARGUMENT_SELECTOR,pe.INVALID_PLURAL_ARGUMENT_SELECTOR);if(f.err)return f;c=ge(u,this.clonePosition()),h=this.message.slice(u.offset,this.offset())}else break}if(a.has(h))return this.error(t==="select"?pe.DUPLICATE_SELECT_ARGUMENT_SELECTOR:pe.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);h==="other"&&(o=!0),this.bumpSpace();var d=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?pe.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:pe.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ge(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(e+1,t,n);if(p.err)return p;var g=this.tryParseArgumentClose(d);if(g.err)return g;l.push([h,{value:p.val,location:ge(d,this.clonePosition())}]),a.add(h),this.bumpSpace(),s=this.parseIdentifierIfPossible(),h=s.value,c=s.location}return l.length===0?this.error(t==="select"?pe.EXPECT_SELECT_ARGUMENT_SELECTOR:pe.EXPECT_PLURAL_ARGUMENT_SELECTOR,ge(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(pe.MISSING_OTHER_CLAUSE,ge(this.clonePosition(),this.clonePosition())):{val:l,err:null}},i.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var s=!1,o=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)s=!0,o=o*10+(l-48),this.bump();else break}var a=ge(r,this.clonePosition());return s?(o*=n,Cy(o)?{val:o,err:null}:this.error(t,a)):this.error(e,a)},i.prototype.offset=function(){return this.position.offset},i.prototype.isEOF=function(){return this.offset()===this.message.length},i.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},i.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=gd(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},i.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},i.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},i.prototype.bumpIf=function(e){if(Zh(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},i.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},i.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},i.prototype.bumpSpace=function(){for(;!this.isEOF()&&_d(this.char());)this.bump()},i.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return n??null},i}();function Fl(i){return i>=97&&i<=122||i>=65&&i<=90}function Py(i){return Fl(i)||i===47}function Ly(i){return i===45||i===46||i>=48&&i<=57||i===95||i>=97&&i<=122||i>=65&&i<=90||i==183||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8255&&i<=8256||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}function _d(i){return i>=9&&i<=13||i===32||i===133||i>=8206&&i<=8207||i===8232||i===8233}function Ry(i){return i>=33&&i<=35||i===36||i>=37&&i<=39||i===40||i===41||i===42||i===43||i===44||i===45||i>=46&&i<=47||i>=58&&i<=59||i>=60&&i<=62||i>=63&&i<=64||i===91||i===92||i===93||i===94||i===96||i===123||i===124||i===125||i===126||i===161||i>=162&&i<=165||i===166||i===167||i===169||i===171||i===172||i===174||i===176||i===177||i===182||i===187||i===191||i===215||i===247||i>=8208&&i<=8213||i>=8214&&i<=8215||i===8216||i===8217||i===8218||i>=8219&&i<=8220||i===8221||i===8222||i===8223||i>=8224&&i<=8231||i>=8240&&i<=8248||i===8249||i===8250||i>=8251&&i<=8254||i>=8257&&i<=8259||i===8260||i===8261||i===8262||i>=8263&&i<=8273||i===8274||i===8275||i>=8277&&i<=8286||i>=8592&&i<=8596||i>=8597&&i<=8601||i>=8602&&i<=8603||i>=8604&&i<=8607||i===8608||i>=8609&&i<=8610||i===8611||i>=8612&&i<=8613||i===8614||i>=8615&&i<=8621||i===8622||i>=8623&&i<=8653||i>=8654&&i<=8655||i>=8656&&i<=8657||i===8658||i===8659||i===8660||i>=8661&&i<=8691||i>=8692&&i<=8959||i>=8960&&i<=8967||i===8968||i===8969||i===8970||i===8971||i>=8972&&i<=8991||i>=8992&&i<=8993||i>=8994&&i<=9e3||i===9001||i===9002||i>=9003&&i<=9083||i===9084||i>=9085&&i<=9114||i>=9115&&i<=9139||i>=9140&&i<=9179||i>=9180&&i<=9185||i>=9186&&i<=9254||i>=9255&&i<=9279||i>=9280&&i<=9290||i>=9291&&i<=9311||i>=9472&&i<=9654||i===9655||i>=9656&&i<=9664||i===9665||i>=9666&&i<=9719||i>=9720&&i<=9727||i>=9728&&i<=9838||i===9839||i>=9840&&i<=10087||i===10088||i===10089||i===10090||i===10091||i===10092||i===10093||i===10094||i===10095||i===10096||i===10097||i===10098||i===10099||i===10100||i===10101||i>=10132&&i<=10175||i>=10176&&i<=10180||i===10181||i===10182||i>=10183&&i<=10213||i===10214||i===10215||i===10216||i===10217||i===10218||i===10219||i===10220||i===10221||i===10222||i===10223||i>=10224&&i<=10239||i>=10240&&i<=10495||i>=10496&&i<=10626||i===10627||i===10628||i===10629||i===10630||i===10631||i===10632||i===10633||i===10634||i===10635||i===10636||i===10637||i===10638||i===10639||i===10640||i===10641||i===10642||i===10643||i===10644||i===10645||i===10646||i===10647||i===10648||i>=10649&&i<=10711||i===10712||i===10713||i===10714||i===10715||i>=10716&&i<=10747||i===10748||i===10749||i>=10750&&i<=11007||i>=11008&&i<=11055||i>=11056&&i<=11076||i>=11077&&i<=11078||i>=11079&&i<=11084||i>=11085&&i<=11123||i>=11124&&i<=11125||i>=11126&&i<=11157||i===11158||i>=11159&&i<=11263||i>=11776&&i<=11777||i===11778||i===11779||i===11780||i===11781||i>=11782&&i<=11784||i===11785||i===11786||i===11787||i===11788||i===11789||i>=11790&&i<=11798||i===11799||i>=11800&&i<=11801||i===11802||i===11803||i===11804||i===11805||i>=11806&&i<=11807||i===11808||i===11809||i===11810||i===11811||i===11812||i===11813||i===11814||i===11815||i===11816||i===11817||i>=11818&&i<=11822||i===11823||i>=11824&&i<=11833||i>=11834&&i<=11835||i>=11836&&i<=11839||i===11840||i===11841||i===11842||i>=11843&&i<=11855||i>=11856&&i<=11857||i===11858||i>=11859&&i<=11903||i>=12289&&i<=12291||i===12296||i===12297||i===12298||i===12299||i===12300||i===12301||i===12302||i===12303||i===12304||i===12305||i>=12306&&i<=12307||i===12308||i===12309||i===12310||i===12311||i===12312||i===12313||i===12314||i===12315||i===12316||i===12317||i>=12318&&i<=12319||i===12320||i===12336||i===64830||i===64831||i>=65093&&i<=65094}function Vl(i){i.forEach(function(e){if(delete e.location,ad(e)||hd(e))for(var t in e.options)delete e.options[t].location,Vl(e.options[t].value);else sd(e)&&ud(e.style)||(od(e)||ld(e))&&Il(e.style)?delete e.style.location:cd(e)&&Vl(e.children)})}function Iy(i,e){e===void 0&&(e={}),e=we({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new Dy(i,e).parse();if(t.err){var n=SyntaxError(pe[t.err.kind]);throw n.location=t.err.location,n.originalMessage=t.err.message,n}return e?.captureLocation||Vl(t.val),t.val}function jo(i,e){var t=e&&e.cache?e.cache:Uy,n=e&&e.serializer?e.serializer:Vy,r=e&&e.strategy?e.strategy:By;return r(i,{cache:t,serializer:n})}function Ny(i){return i==null||typeof i=="number"||typeof i=="boolean"}function yd(i,e,t,n){var r=Ny(n)?n:t(n),s=e.get(r);return typeof s>"u"&&(s=i.call(this,n),e.set(r,s)),s}function wd(i,e,t){var n=Array.prototype.slice.call(arguments,3),r=t(n),s=e.get(r);return typeof s>"u"&&(s=i.apply(this,n),e.set(r,s)),s}function Ga(i,e,t,n,r){return t.bind(e,i,n,r)}function By(i,e){var t=i.length===1?yd:wd;return Ga(i,this,t,e.cache.create(),e.serializer)}function Hy(i,e){return Ga(i,this,wd,e.cache.create(),e.serializer)}function Fy(i,e){return Ga(i,this,yd,e.cache.create(),e.serializer)}var Vy=function(){return JSON.stringify(arguments)};function qa(){this.cache=Object.create(null)}qa.prototype.get=function(i){return this.cache[i]};qa.prototype.set=function(i,e){this.cache[i]=e};var Uy={create:function(){return new qa}},zo={variadic:Hy,monadic:Fy},Pn;(function(i){i.MISSING_VALUE="MISSING_VALUE",i.INVALID_VALUE="INVALID_VALUE",i.MISSING_INTL_API="MISSING_INTL_API"})(Pn||(Pn={}));var po=function(i){fo(e,i);function e(t,n,r){var s=i.call(this,t)||this;return s.code=n,s.originalMessage=r,s}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),tc=function(i){fo(e,i);function e(t,n,r,s){return i.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),Pn.INVALID_VALUE,s)||this}return e}(po),jy=function(i){fo(e,i);function e(t,n,r){return i.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),Pn.INVALID_VALUE,r)||this}return e}(po),zy=function(i){fo(e,i);function e(t,n){return i.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),Pn.MISSING_VALUE,n)||this}return e}(po),ht;(function(i){i[i.literal=0]="literal",i[i.object=1]="object"})(ht||(ht={}));function Wy(i){return i.length<2?i:i.reduce(function(e,t){var n=e[e.length-1];return!n||n.type!==ht.literal||t.type!==ht.literal?e.push(t):n.value+=t.value,e},[])}function Gy(i){return typeof i=="function"}function As(i,e,t,n,r,s,o){if(i.length===1&&Kh(i[0]))return[{type:ht.literal,value:i[0].value}];for(var l=[],a=0,h=i;a<h.length;a++){var c=h[a];if(Kh(c)){l.push({type:ht.literal,value:c.value});continue}if(ly(c)){typeof s=="number"&&l.push({type:ht.literal,value:t.getNumberFormat(e).format(s)});continue}var u=c.value;if(!(r&&u in r))throw new zy(u,o);var f=r[u];if(oy(c)){(!f||typeof f=="string"||typeof f=="number")&&(f=typeof f=="string"||typeof f=="number"?String(f):""),l.push({type:typeof f=="string"?ht.literal:ht.object,value:f});continue}if(od(c)){var d=typeof c.style=="string"?n.date[c.style]:Il(c.style)?c.style.parsedOptions:void 0;l.push({type:ht.literal,value:t.getDateTimeFormat(e,d).format(f)});continue}if(ld(c)){var d=typeof c.style=="string"?n.time[c.style]:Il(c.style)?c.style.parsedOptions:n.time.medium;l.push({type:ht.literal,value:t.getDateTimeFormat(e,d).format(f)});continue}if(sd(c)){var d=typeof c.style=="string"?n.number[c.style]:ud(c.style)?c.style.parsedOptions:void 0;d&&d.scale&&(f=f*(d.scale||1)),l.push({type:ht.literal,value:t.getNumberFormat(e,d).format(f)});continue}if(cd(c)){var p=c.children,g=c.value,m=r[g];if(!Gy(m))throw new jy(g,"function",o);var b=As(p,e,t,n,r,s),w=m(b.map(function(A){return A.value}));Array.isArray(w)||(w=[w]),l.push.apply(l,w.map(function(A){return{type:typeof A=="string"?ht.literal:ht.object,value:A}}))}if(ad(c)){var y=c.options[f]||c.options.other;if(!y)throw new tc(c.value,f,Object.keys(c.options),o);l.push.apply(l,As(y.value,e,t,n,r));continue}if(hd(c)){var y=c.options["=".concat(f)];if(!y){if(!Intl.PluralRules)throw new po(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Pn.MISSING_INTL_API,o);var k=t.getPluralRules(e,{type:c.pluralType}).select(f-(c.offset||0));y=c.options[k]||c.options.other}if(!y)throw new tc(c.value,f,Object.keys(c.options),o);l.push.apply(l,As(y.value,e,t,n,r,f-(c.offset||0)));continue}}return Wy(l)}function qy(i,e){return e?we(we(we({},i||{}),e||{}),Object.keys(i).reduce(function(t,n){return t[n]=we(we({},i[n]),e[n]||{}),t},{})):i}function $y(i,e){return e?Object.keys(i).reduce(function(t,n){return t[n]=qy(i[n],e[n]),t},we({},i)):i}function Wo(i){return{create:function(){return{get:function(e){return i[e]},set:function(e,t){i[e]=t}}}}}function Ky(i){return i===void 0&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:jo(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Vo([void 0],t,!1)))},{cache:Wo(i.number),strategy:zo.variadic}),getDateTimeFormat:jo(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Vo([void 0],t,!1)))},{cache:Wo(i.dateTime),strategy:zo.variadic}),getPluralRules:jo(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Vo([void 0],t,!1)))},{cache:Wo(i.pluralRules),strategy:zo.variadic})}}var vd=function(){function i(e,t,n,r){var s=this;if(t===void 0&&(t=i.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(a){var h=s.formatToParts(a);if(h.length===1)return h[0].value;var c=h.reduce(function(u,f){return!u.length||f.type!==ht.literal||typeof u[u.length-1]!="string"?u.push(f.value):u[u.length-1]+=f.value,u},[]);return c.length<=1?c[0]||"":c},this.formatToParts=function(a){return As(s.ast,s.locales,s.formatters,s.formats,a,void 0,s.message)},this.resolvedOptions=function(){var a;return{locale:((a=s.resolvedLocale)===null||a===void 0?void 0:a.toString())||Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},this.locales=t,this.resolvedLocale=i.resolveLocale(t),typeof e=="string"){if(this.message=e,!i.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var o=r||{};o.formatters;var l=sy(o,["formatters"]);this.ast=i.__parse(e,we(we({},l),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=$y(i.formats,n),this.formatters=r&&r.formatters||Ky(this.formatterCache)}return Object.defineProperty(i,"defaultLocale",{get:function(){return i.memoizedDefaultLocale||(i.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),i.memoizedDefaultLocale},enumerable:!1,configurable:!0}),i.memoizedDefaultLocale=null,i.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},i.__parse=Iy,i.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},i}();function Xy(i,e){if(e==null)return;if(e in i)return i[e];const t=e.split(".");let n=i;for(let r=0;r<t.length;r++)if(typeof n=="object"){if(r>0){const s=t.slice(r,t.length).join(".");if(s in n){n=n[s];break}}n=n[t[r]]}else n=void 0;return n}const Ai={},Jy=(i,e,t)=>t&&(e in Ai||(Ai[e]={}),i in Ai[e]||(Ai[e][i]=t),t),kd=(i,e)=>{if(e==null)return;if(e in Ai&&i in Ai[e])return Ai[e][i];const t=Wr(e);for(let n=0;n<t.length;n++){const r=t[n],s=Zy(r,i);if(s)return Jy(i,e,s)}};let $a;const zr=Un({});function Yy(i){return $a[i]||null}function xd(i){return i in $a}function Zy(i,e){if(!xd(i))return null;const t=Yy(i);return Xy(t,e)}function Qy(i){if(i==null)return;const e=Wr(i);for(let t=0;t<e.length;t++){const n=e[t];if(xd(n))return n}}function Sd(i,...e){delete Ai[i],zr.update(t=>(t[i]=ry.all([t[i]||{},...e]),t))}jn([zr],([i])=>Object.keys(i));zr.subscribe(i=>$a=i);const Es={};function e1(i,e){Es[i].delete(e),Es[i].size===0&&delete Es[i]}function Ad(i){return Es[i]}function t1(i){return Wr(i).map(e=>{const t=Ad(e);return[e,t?[...t]:[]]}).filter(([,e])=>e.length>0)}function js(i){return i==null?!1:Wr(i).some(e=>{var t;return(t=Ad(e))==null?void 0:t.size})}function i1(i,e){return Promise.all(e.map(n=>(e1(i,n),n().then(r=>r.default||r)))).then(n=>Sd(i,...n))}const Yn={};function Ed(i){if(!js(i))return i in Yn?Yn[i]:Promise.resolve();const e=t1(i);return Yn[i]=Promise.all(e.map(([t,n])=>i1(t,n))).then(()=>{if(js(i))return Ed(i);delete Yn[i]}),Yn[i]}var ic=Object.getOwnPropertySymbols,n1=Object.prototype.hasOwnProperty,r1=Object.prototype.propertyIsEnumerable,s1=(i,e)=>{var t={};for(var n in i)n1.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&ic)for(var n of ic(i))e.indexOf(n)<0&&r1.call(i,n)&&(t[n]=i[n]);return t};const o1={number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}};function l1({locale:i,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Wr(i).join('", "')}".${js(Ii())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const a1={fallbackLocale:null,loadingDelay:200,formats:o1,warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0},hr=a1;function Ln(){return hr}function h1(i){const e=i,{formats:t}=e,n=s1(e,["formats"]);let r=i.fallbackLocale;if(i.initialLocale)try{vd.resolveLocale(i.initialLocale)&&(r=i.initialLocale)}catch{console.warn(`[svelte-i18n] The initial locale "${i.initialLocale}" is not a valid locale.`)}return n.warnOnMissingMessages&&(delete n.warnOnMissingMessages,n.handleMissingMessage==null?n.handleMissingMessage=l1:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(hr,n,{initialLocale:r}),t&&("number"in t&&Object.assign(hr.formats.number,t.number),"date"in t&&Object.assign(hr.formats.date,t.date),"time"in t&&Object.assign(hr.formats.time,t.time)),zn.set(r)}const Go=Un(!1);var c1=Object.defineProperty,u1=Object.defineProperties,f1=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,d1=Object.prototype.hasOwnProperty,p1=Object.prototype.propertyIsEnumerable,rc=(i,e,t)=>e in i?c1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,m1=(i,e)=>{for(var t in e||(e={}))d1.call(e,t)&&rc(i,t,e[t]);if(nc)for(var t of nc(e))p1.call(e,t)&&rc(i,t,e[t]);return i},g1=(i,e)=>u1(i,f1(e));let Ul;const zs=Un(null);function sc(i){return i.split("-").map((e,t,n)=>n.slice(0,t+1).join("-")).reverse()}function Wr(i,e=Ln().fallbackLocale){const t=sc(i);return e?[...new Set([...t,...sc(e)])]:t}function Ii(){return Ul??void 0}zs.subscribe(i=>{Ul=i??void 0,typeof window<"u"&&i!=null&&document.documentElement.setAttribute("lang",i)});const b1=i=>{if(i&&Qy(i)&&js(i)){const{loadingDelay:e}=Ln();let t;return typeof window<"u"&&Ii()!=null&&e?t=window.setTimeout(()=>Go.set(!0),e):Go.set(!0),Ed(i).then(()=>{zs.set(i)}).finally(()=>{clearTimeout(t),Go.set(!1)})}return zs.set(i)},zn=g1(m1({},zs),{set:b1}),_1=()=>typeof window>"u"?null:window.navigator.language||window.navigator.languages[0],mo=i=>{const e=Object.create(null);return n=>{const r=JSON.stringify(n);return r in e?e[r]:e[r]=i(n)}};var y1=Object.defineProperty,Ws=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,Td=Object.prototype.propertyIsEnumerable,oc=(i,e,t)=>e in i?y1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ka=(i,e)=>{for(var t in e||(e={}))Cd.call(e,t)&&oc(i,t,e[t]);if(Ws)for(var t of Ws(e))Td.call(e,t)&&oc(i,t,e[t]);return i},Wn=(i,e)=>{var t={};for(var n in i)Cd.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Ws)for(var n of Ws(i))e.indexOf(n)<0&&Td.call(i,n)&&(t[n]=i[n]);return t};const Cr=(i,e)=>{const{formats:t}=Ln();if(i in t&&e in t[i])return t[i][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${i} format.`)},w1=mo(i=>{var e=i,{locale:t,format:n}=e,r=Wn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(r=Cr("number",n)),new Intl.NumberFormat(t,r)}),v1=mo(i=>{var e=i,{locale:t,format:n}=e,r=Wn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?r=Cr("date",n):Object.keys(r).length===0&&(r=Cr("date","short")),new Intl.DateTimeFormat(t,r)}),k1=mo(i=>{var e=i,{locale:t,format:n}=e,r=Wn(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?r=Cr("time",n):Object.keys(r).length===0&&(r=Cr("time","short")),new Intl.DateTimeFormat(t,r)}),x1=(i={})=>{var e=i,{locale:t=Ii()}=e,n=Wn(e,["locale"]);return w1(Ka({locale:t},n))},S1=(i={})=>{var e=i,{locale:t=Ii()}=e,n=Wn(e,["locale"]);return v1(Ka({locale:t},n))},A1=(i={})=>{var e=i,{locale:t=Ii()}=e,n=Wn(e,["locale"]);return k1(Ka({locale:t},n))},E1=mo((i,e=Ii())=>new vd(i,e,Ln().formats,{ignoreTag:Ln().ignoreTag})),C1=(i,e={})=>{var t,n,r,s;let o=e;typeof i=="object"&&(o=i,i=o.id);const{values:l,locale:a=Ii(),default:h}=o;if(a==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let c=kd(i,a);if(!c)c=(s=(r=(n=(t=Ln()).handleMissingMessage)==null?void 0:n.call(t,{locale:a,id:i,defaultValue:h}))!=null?r:h)!=null?s:i;else if(typeof c!="string")return console.warn(`[svelte-i18n] Message with id "${i}" must be of type "string", found: "${typeof c}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),c;if(!l)return c;let u=c;try{u=E1(c,a).format(l)}catch(f){f instanceof Error&&console.warn(`[svelte-i18n] Message "${i}" has syntax error:`,f.message)}return u},T1=(i,e)=>A1(e).format(i),M1=(i,e)=>S1(e).format(i),O1=(i,e)=>x1(e).format(i),D1=(i,e=Ii())=>kd(i,e),Xa=jn([zn,zr],()=>C1);jn([zn],()=>T1);jn([zn],()=>M1);jn([zn],()=>O1);jn([zn,zr],()=>D1);function lc(i){let e,t,n,r,s,o,l,a=i[9]("common.built_with")+"",h,c,u,f,d,p,g=i[9]("common.hosted_on")+"",m,b,w;return{c(){e=X("div"),t=X("span"),n=X("a"),r=ce(i[5]),o=Ae(),l=X("span"),h=ce(a),c=Ae(),u=X("a"),u.textContent="Gradio",f=ce("."),d=Ae(),p=X("span"),m=ce(g),b=Ae(),w=X("a"),w.innerHTML=`<span class="space-logo svelte-wpkpf6"><img src="${U_}" alt="Hugging Face Space" class="svelte-wpkpf6"/></span> Spaces`,S(n,"href",s="https://huggingface.co/spaces/"+i[5]),S(n,"class","title svelte-wpkpf6"),S(t,"class","svelte-wpkpf6"),S(u,"class","gradio svelte-wpkpf6"),S(u,"href","https://gradio.app"),S(l,"class","svelte-wpkpf6"),S(w,"class","hf svelte-wpkpf6"),S(w,"href","https://huggingface.co/spaces"),S(p,"class","svelte-wpkpf6"),S(e,"class","info svelte-wpkpf6")},m(y,k){B(y,e,k),z(e,t),z(t,n),z(n,r),z(e,o),z(e,l),z(l,h),z(l,c),z(l,u),z(l,f),z(e,d),z(e,p),z(p,m),z(p,b),z(p,w)},p(y,k){k&32&&Ue(r,y[5]),k&32&&s!==(s="https://huggingface.co/spaces/"+y[5])&&S(n,"href",s),k&512&&a!==(a=y[9]("common.built_with")+"")&&Ue(h,a),k&512&&g!==(g=y[9]("common.hosted_on")+"")&&Ue(m,g)},d(y){y&&N(e)}}}function P1(i){let e,t,n,r,s;const o=i[11].default,l=Fr(o,i,i[10],null);let a=i[6]&&i[5]&&i[7]&&lc(i);return{c(){e=X("div"),t=X("div"),l&&l.c(),n=Ae(),a&&a.c(),S(t,"class","main svelte-wpkpf6"),S(e,"class",r="gradio-container gradio-container-"+i[1]+" svelte-wpkpf6"),S(e,"data-iframe-height",""),Y(e,"app",!i[6]&&!i[4]),Y(e,"fill_width",i[3]),Y(e,"embed-container",i[6]),Y(e,"with-info",i[7]),te(e,"min-height",i[8]?"initial":i[2]),te(e,"flex-grow",i[6]?"auto":"1")},m(h,c){B(h,e,c),z(e,t),l&&l.m(t,null),z(e,n),a&&a.m(e,null),i[12](e),s=!0},p(h,[c]){l&&l.p&&(!s||c&1024)&&Ur(l,o,h,h[10],s?Vr(o,h[10],c,null):jr(h[10]),null),h[6]&&h[5]&&h[7]?a?a.p(h,c):(a=lc(h),a.c(),a.m(e,null)):a&&(a.d(1),a=null),(!s||c&2&&r!==(r="gradio-container gradio-container-"+h[1]+" svelte-wpkpf6"))&&S(e,"class",r),(!s||c&82)&&Y(e,"app",!h[6]&&!h[4]),(!s||c&10)&&Y(e,"fill_width",h[3]),(!s||c&66)&&Y(e,"embed-container",h[6]),(!s||c&130)&&Y(e,"with-info",h[7]),c&260&&te(e,"min-height",h[8]?"initial":h[2]),c&64&&te(e,"flex-grow",h[6]?"auto":"1")},i(h){s||(Q(l,h),s=!0)},o(h){ie(l,h),s=!1},d(h){h&&N(e),l&&l.d(h),a&&a.d(),i[12](null)}}}function L1(i,e,t){let n;Tn(i,Xa,m=>t(9,n=m));let{$$slots:r={},$$scope:s}=e,{wrapper:o}=e,{version:l}=e,{initial_height:a}=e,{fill_width:h}=e,{is_embed:c}=e,{space:u}=e,{display:f}=e,{info:d}=e,{loaded:p}=e;function g(m){_t[m?"unshift":"push"](()=>{o=m,t(0,o)})}return i.$$set=m=>{"wrapper"in m&&t(0,o=m.wrapper),"version"in m&&t(1,l=m.version),"initial_height"in m&&t(2,a=m.initial_height),"fill_width"in m&&t(3,h=m.fill_width),"is_embed"in m&&t(4,c=m.is_embed),"space"in m&&t(5,u=m.space),"display"in m&&t(6,f=m.display),"info"in m&&t(7,d=m.info),"loaded"in m&&t(8,p=m.loaded),"$$scope"in m&&t(10,s=m.$$scope)},[o,l,a,h,c,u,f,d,p,n,s,r,g]}class R1 extends $t{constructor(e){super(),qt(this,e,L1,P1,yt,{wrapper:0,version:1,initial_height:2,fill_width:3,is_embed:4,space:5,display:6,info:7,loaded:8})}get wrapper(){return this.$$.ctx[0]}set wrapper(e){this.$$set({wrapper:e}),E()}get version(){return this.$$.ctx[1]}set version(e){this.$$set({version:e}),E()}get initial_height(){return this.$$.ctx[2]}set initial_height(e){this.$$set({initial_height:e}),E()}get fill_width(){return this.$$.ctx[3]}set fill_width(e){this.$$set({fill_width:e}),E()}get is_embed(){return this.$$.ctx[4]}set is_embed(e){this.$$set({is_embed:e}),E()}get space(){return this.$$.ctx[5]}set space(e){this.$$set({space:e}),E()}get display(){return this.$$.ctx[6]}set display(e){this.$$set({display:e}),E()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),E()}get loaded(){return this.$$.ctx[8]}set loaded(e){this.$$set({loaded:e}),E()}}let Md=!1;"attachShadow"in Element.prototype&&"adoptedStyleSheets"in Document.prototype&&(Md="adoptedStyleSheets"in document.createElement("div").attachShadow({mode:"open"}));function Ja(i,e){const t=new URL(import.meta.url).origin,n=new URL(i,t).href;if(document.querySelector(`link[href='${n}']`))return Promise.resolve();const s=document.createElement("link");return s.rel="stylesheet",s.href=n,new Promise((o,l)=>{s.addEventListener("load",()=>o()),s.addEventListener("error",()=>{console.error(`Unable to preload CSS for ${n}`),o()}),e.appendChild(s)})}function ac(i,e,t=document.createElement("style")){if(!Md)return null;t.remove();const n=new CSSStyleSheet;n.replaceSync(i);let r="";i=i.replace(/@import\s+url\((.*?)\);\s*/g,(a,h)=>(r+=`@import url(${h});
`,""));const s=n.cssRules;let o="",l=`gradio-app .gradio-container.gradio-container-${e} .contain `;for(let a=0;a<s.length;a++){const h=s[a];let c=h.cssText.includes(".dark");if(h instanceof CSSStyleRule){const u=h.selectorText;if(u){const f=u.replace(".dark","").split(",").map(d=>`${c?".dark":""} ${l} ${d.trim()} `).join(",");o+=h.cssText,o+=h.cssText.replace(u,f)}}else if(h instanceof CSSMediaRule){let u=`@media ${h.media.mediaText} {`;for(let f=0;f<h.cssRules.length;f++){const d=h.cssRules[f];if(d instanceof CSSStyleRule){let p=d.cssText.includes(".dark ");const g=d.selectorText,m=g.replace(".dark","").split(",").map(b=>`${p?".dark":""} ${l} ${b.trim()} `).join(",");u+=d.cssText.replace(g,m)}}u+="}",o+=u}else if(h instanceof CSSKeyframesRule){o+=`@keyframes ${h.name} {`;for(let u=0;u<h.cssRules.length;u++){const f=h.cssRules[u];f instanceof CSSKeyframeRule&&(o+=`${f.keyText} { ${f.style.cssText} }`)}o+="}"}else h instanceof CSSFontFaceRule&&(o+=`@font-face { ${h.style.cssText} }`)}return o=r+o,t.textContent=o,document.head.appendChild(t),t}const Od={built_with_gradio:"تم الإنشاء بإستخدام Gradio",clear:"أمسح",or:"أو",submit:"أرسل"},Dd={click_to_upload:"إضغط للتحميل",drop_audio:"أسقط الملف الصوتي هنا",drop_csv:"أسقط ملف البيانات هنا",drop_file:"أسقط الملف هنا",drop_image:"أسقط الصورة هنا",drop_video:"أسقط الفيديو هنا"},I1={common:Od,upload_text:Dd},N1=Object.freeze(Object.defineProperty({__proto__:null,common:Od,default:I1,upload_text:Dd},Symbol.toStringTag,{value:"Module"})),Pd={built_with_gradio:"Construït amb gradio",clear:"Neteja",empty:"Buit",error:"Error",loading:"S'està carregant",or:"o",submit:"Envia"},Ld={click_to_upload:"Feu clic per pujar",drop_audio:"Deixeu anar l'àudio aquí",drop_csv:"Deixeu anar el CSV aquí",drop_file:"Deixeu anar el fitxer aquí",drop_image:"Deixeu anar la imatge aquí",drop_video:"Deixeu anar el vídeo aquí"},B1={common:Pd,upload_text:Ld},H1=Object.freeze(Object.defineProperty({__proto__:null,common:Pd,default:B1,upload_text:Ld},Symbol.toStringTag,{value:"Module"})),Rd={annotated_image:"وێنەی نیشانە کراو"},Id={allow_recording_access:"تکایە ڕێگە بدە بە بەکارهێنانی مایکرۆفۆنەکە بۆ تۆمارکردن.",audio:"دەنگ",record_from_microphone:"تۆمارکردن لە مایکەوە",stop_recording:"تۆمارکردن بوەستێنە"},Nd={connection_can_break:"لە مۆبایلدا، پەیوەندییەکە دەکرێت بپچڕێت ئەگەر ئەم تابە چالاک نەبێت یان ئامێرەکە بچێتە دۆخی پشوو، ئەمەش شوێنی خۆت لە ڕیزدا لەدەست دەدات.",long_requests_queue:"ڕیزێکی درێژی داواکاری هەیە. ئەم سپەیسە دووباد بکە بۆی چاوەڕوان نەبیت.",lost_connection:"پەیوەندی پچڕا بەهۆی جێهێشتنی پەیج. "},Bd={checkbox:"بۆکسی هەڵبژاردن",checkbox_group:"گروپی بۆکسی هەڵبژاردن"},Hd={code:"کۆد"},Fd={color_picker:"ڕەنگ هەڵبژاردە"},Vd={built_with:"دروستکراوە لەگەڵ...",built_with_gradio:"Gradio دروستکراوە بە",clear:"خاوێنکردنەوە",download:"دابەزاندن",edit:"بژارکردن",empty:"بەتاڵ",error:"هەڵە",hosted_on:"میوانداری کراوە لە",loading:"بارکردن",logo:"لۆگۆ",or:"یان",remove:"لابردن",share:"هاوبەشکردن",submit:"پێشکەشکردن",undo:"پووچکردنەوە"},Ud={incorrect_format:"فۆرماتێکی هەڵە، تەنها فایلەکانی CSV و TSV پشتگیری دەکرێن",new_column:"ستوونی نوێ",new_row:"ڕیزێکی نوێ"},jd={dropdown:"فڕێدانە خوار"},zd={build_error:"هەڵەی دروستکردن هەیە",config_error:"هەڵەی ڕێکخستن هەیە",contact_page_author:"تکایە پەیوەندی بە نووسەری پەیجەوە بکەن بۆ ئەوەی ئاگاداریان بکەنەوە.",no_app_file:"هیچ فایلێکی ئەپ نییە",runtime_error:"هەڵەیەکی runtime هەیە",space_not_working:'"سپەیسەکە کارناکات چونکە" {0}',space_paused:"فەزاکە وەستاوە",use_via_api:"لە ڕێگەی API بەکاری بهێنە"},Wd={uploading:"بارکردن..."},Gd={highlighted_text:"دەقی ڕۆشن کراو"},qd={allow_webcam_access:"تکایە ڕێگە بدە بە بەکارهێنانی وێبکامەکە بۆ تۆمارکردن.",brush_color:"ڕەنگی فڵچە",brush_radius:"تیژڕەوی فڵچە",image:"وێنە",remove_image:"لابردنی وێنە",select_brush_color:"ڕەنگی فڵچە هەڵبژێرە",start_drawing:"دەست بکە بە وێنەکێشان",use_brush:"فڵچە بەکاربهێنە"},$d={label:"لەیبڵ"},Kd={enable_cookies:"ئەگەر تۆ سەردانی HuggingFace Space دەکەیت لە دۆخی نادیاردا، پێویستە کووکی لایەنی سێیەم چالاک بکەیت.",incorrect_credentials:"بڕوانامەی هەڵە",login:"چونه‌ ژووره‌وه‌"},Xd={number:"ژمارە"},Jd={plot:"هێڵکاری"},Yd={radio:"ڕادیۆ"},Zd={slider:"خلیسکە"},Qd={click_to_upload:"کلیک بکە بۆ بارکردن",drop_audio:"دەنگ لێرە دابنێ",drop_csv:"لێرەدا CSV دابنێ",drop_file:"فایل لێرە دابنێ",drop_image:"وێنە لێرەدا دابنێ",drop_video:"ڤیدیۆ لێرە دابنێ"},F1={"3D_model":{"3d_model":"مۆدێلی سێ ڕەهەندی"},annotated_image:Rd,audio:Id,blocks:Nd,checkbox:Bd,code:Hd,color_picker:Fd,common:Vd,dataframe:Ud,dropdown:jd,errors:zd,file:Wd,highlighted_text:Gd,image:qd,label:$d,login:Kd,number:Xd,plot:Jd,radio:Yd,slider:Zd,upload_text:Qd},V1=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:Rd,audio:Id,blocks:Nd,checkbox:Bd,code:Hd,color_picker:Fd,common:Vd,dataframe:Ud,default:F1,dropdown:jd,errors:zd,file:Wd,highlighted_text:Gd,image:qd,label:$d,login:Kd,number:Xd,plot:Jd,radio:Yd,slider:Zd,upload_text:Qd},Symbol.toStringTag,{value:"Module"})),ep={built_with_gradio:"Mit Gradio erstellt",clear:"Löschen",or:"oder",submit:"Absenden"},tp={click_to_upload:"Hochladen",drop_audio:"Audio hier ablegen",drop_csv:"CSV Datei hier ablegen",drop_file:"Datei hier ablegen",drop_image:"Bild hier ablegen",drop_video:"Video hier ablegen"},U1={common:ep,upload_text:tp},j1=Object.freeze(Object.defineProperty({__proto__:null,common:ep,default:U1,upload_text:tp},Symbol.toStringTag,{value:"Module"})),ip={annotated_image:"Annotated Image"},np={allow_recording_access:"Please allow access to the microphone for recording.",audio:"Audio",record_from_microphone:"Record from microphone",stop_recording:"Stop recording",no_device_support:"Media devices could not be accessed. Check that you are running on a secure origin (https) or localhost (or you have passed a valid SSL certificate to ssl_verify), and you have allowed browser access to your device.",stop:"Stop",resume:"Resume",record:"Record",no_microphone:"No microphone found",pause:"Pause",play:"Play"},rp={connection_can_break:"On mobile, the connection can break if this tab is unfocused or the device sleeps, losing your position in queue.",long_requests_queue:"There is a long queue of requests pending. Duplicate this Space to skip.",lost_connection:"Lost connection due to leaving page. Rejoining queue..."},sp={checkbox:"Checkbox",checkbox_group:"Checkbox Group"},op={code:"Code"},lp={color_picker:"Color Picker"},ap={built_with:"built with",built_with_gradio:"Built with Gradio",clear:"Clear",download:"Download",edit:"Edit",empty:"Empty",error:"Error",hosted_on:"Hosted on",loading:"Loading",logo:"logo",or:"or",remove:"Remove",share:"Share",submit:"Submit",undo:"Undo",no_devices:"No devices found"},hp={incorrect_format:"Incorrect format, only CSV and TSV files are supported",new_column:"New column",new_row:"New row"},cp={dropdown:"Dropdown"},up={build_error:"there is a build error",config_error:"there is a config error",contact_page_author:"Please contact the author of the page to let them know.",no_app_file:"there is no app file",runtime_error:"there is a runtime error",space_not_working:`"Space isn't working because" {0}`,space_paused:"the space is paused",use_via_api:"Use via API"},fp={uploading:"Uploading..."},dp={highlighted_text:"Highlighted Text"},pp={allow_webcam_access:"Please allow access to the webcam for recording.",brush_color:"Brush color",brush_radius:"Brush radius",image:"Image",remove_image:"Remove Image",select_brush_color:"Select brush color",start_drawing:"Start drawing",use_brush:"Use brush"},mp={label:"Label"},gp={enable_cookies:"If you are visiting a HuggingFace Space in Incognito mode, you must enable third party cookies.",incorrect_credentials:"Incorrect Credentials",login:"Login"},bp={number:"Number"},_p={plot:"Plot"},yp={radio:"Radio"},wp={slider:"Slider"},vp={click_to_upload:"Click to Upload",drop_audio:"Drop Audio Here",drop_csv:"Drop CSV Here",drop_file:"Drop File Here",drop_image:"Drop Image Here",drop_video:"Drop Video Here",drop_gallery:"Drop Image(s) Here",paste_clipboard:"Paste from Clipboard"},z1={"3D_model":{"3d_model":"3D Model"},annotated_image:ip,audio:np,blocks:rp,checkbox:sp,code:op,color_picker:lp,common:ap,dataframe:hp,dropdown:cp,errors:up,file:fp,highlighted_text:dp,image:pp,label:mp,login:gp,number:bp,plot:_p,radio:yp,slider:wp,upload_text:vp},W1=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:ip,audio:np,blocks:rp,checkbox:sp,code:op,color_picker:lp,common:ap,dataframe:hp,default:z1,dropdown:cp,errors:up,file:fp,highlighted_text:dp,image:pp,label:mp,login:gp,number:bp,plot:_p,radio:yp,slider:wp,upload_text:vp},Symbol.toStringTag,{value:"Module"})),kp={built_with_gradio:"Construido con Gradio",clear:"Limpiar",or:"o",submit:"Enviar"},xp={click_to_upload:"Haga click para cargar",drop_audio:"Coloque el audio aquí",drop_csv:"Coloque el CSV aquí",drop_file:"Coloque el archivo aquí",drop_image:"Coloque la imagen aquí",drop_video:"Coloque el video aquí",drop_gallery:"Coloque las imagenes aquí"},G1={common:kp,upload_text:xp},q1=Object.freeze(Object.defineProperty({__proto__:null,common:kp,default:G1,upload_text:xp},Symbol.toStringTag,{value:"Module"})),Sp={built_with_gradio:"Gradiorekin eraikia",clear:"Garbitu",or:"edo",submit:"Bidali"},Ap={click_to_upload:"Klik egin kargatzeko",drop_audio:"Jarri hemen audioa",drop_csv:"Jarri hemen CSVa",drop_file:"Jarri hemen fitxategia",drop_image:"Jarri hemen irudia",drop_video:"Jarri hemen bideoa"},$1={common:Sp,upload_text:Ap},K1=Object.freeze(Object.defineProperty({__proto__:null,common:Sp,default:$1,upload_text:Ap},Symbol.toStringTag,{value:"Module"})),Ep={built_with_gradio:"ساخته شده با gradio",clear:"حذف",or:"یا",submit:"ارسال"},Cp={click_to_upload:"برای آپلود کلیک کنید",drop_audio:"صوت را اینجا رها کنید",drop_csv:"فایل csv را  اینجا رها کنید",drop_file:"فایل را اینجا رها کنید",drop_image:"تصویر را اینجا رها کنید",drop_video:"ویدیو را اینجا رها کنید"},X1={common:Ep,upload_text:Cp},J1=Object.freeze(Object.defineProperty({__proto__:null,common:Ep,default:X1,upload_text:Cp},Symbol.toStringTag,{value:"Module"})),Tp={allow_recording_access:"Veuillez autoriser l'accès à l'enregistrement",audio:"Audio",record_from_microphone:"Enregistrer avec le microphone",stop_recording:"Arrêter l'enregistrement"},Mp={built_with:"Construit avec",built_with_gradio:"Construit avec Gradio",clear:"Effacer",download:"Télécharger",edit:"Éditer",error:"Erreur",loading:"Chargement",logo:"logo",or:"ou",remove:"Supprimer",share:"Partager",submit:"Soumettre"},Op={click_to_upload:"Cliquer pour Télécharger",drop_audio:"Déposer l'Audio Ici",drop_csv:"Déposer le CSV Ici",drop_file:"Déposer le Fichier Ici",drop_image:"Déposer l'Image Ici",drop_video:"Déposer la Vidéo Ici"},Y1={audio:Tp,common:Mp,upload_text:Op},Z1=Object.freeze(Object.defineProperty({__proto__:null,audio:Tp,common:Mp,default:Y1,upload_text:Op},Symbol.toStringTag,{value:"Module"})),Dp={built_with_gradio:"בנוי עם גרדיו",clear:"נקה",or:"או",submit:"שלח"},Pp={click_to_upload:"לחץ כדי להעלות",drop_audio:"גרור לכאן קובץ שמע",drop_csv:"גרור csv קובץ לכאן",drop_file:"גרור קובץ לכאן",drop_image:"גרור קובץ תמונה לכאן",drop_video:"גרור קובץ סרטון לכאן"},Q1={common:Dp,upload_text:Pp},ew=Object.freeze(Object.defineProperty({__proto__:null,common:Dp,default:Q1,upload_text:Pp},Symbol.toStringTag,{value:"Module"})),Lp={built_with_gradio:"Gradio से बना",clear:"हटाये",or:"या",submit:"सबमिट करे"},Rp={click_to_upload:"अपलोड के लिए बटन दबायें",drop_audio:"यहाँ ऑडियो ड्रॉप करें",drop_csv:"यहाँ CSV ड्रॉप करें",drop_file:"यहाँ File ड्रॉप करें",drop_image:"यहाँ इमेज ड्रॉप करें",drop_video:"यहाँ वीडियो ड्रॉप करें"},tw={common:Lp,upload_text:Rp},iw=Object.freeze(Object.defineProperty({__proto__:null,common:Lp,default:tw,upload_text:Rp},Symbol.toStringTag,{value:"Module"})),Ip={built_with_gradio:"gradioで作ろう",clear:"クリア",or:"または",submit:"送信"},Np={click_to_upload:"クリックしてアップロード",drop_audio:"ここに音声をドロップ",drop_csv:"ここにCSVをドロップ",drop_file:"ここにファイルをドロップ",drop_image:"ここに画像をドロップ",drop_video:"ここに動画をドロップ"},nw={common:Ip,upload_text:Np},rw=Object.freeze(Object.defineProperty({__proto__:null,common:Ip,default:nw,upload_text:Np},Symbol.toStringTag,{value:"Module"})),Bp={built_with_gradio:"gradio로 제작되었습니다",clear:"클리어",or:"또는",submit:"제출하기"},Hp={click_to_upload:"클릭해서 업로드하기",drop_audio:"오디오를 끌어 놓으세요",drop_csv:"CSV파일을 끌어 놓으세요",drop_file:"파일을 끌어 놓으세요",drop_image:"이미지를 끌어 놓으세요",drop_video:"비디오를 끌어 놓으세요"},sw={common:Bp,upload_text:Hp},ow=Object.freeze(Object.defineProperty({__proto__:null,common:Bp,default:sw,upload_text:Hp},Symbol.toStringTag,{value:"Module"})),Fp={built_with_gradio:"sukurta su gradio",clear:"Trinti",or:"arba",submit:"Pateikti"},Vp={click_to_upload:"Spustelėkite norėdami įkelti",drop_audio:"Įkelkite garso įrašą čia",drop_csv:"Įkelkite CSV čia",drop_file:"Įkelkite bylą čia",drop_image:"Įkelkite paveikslėlį čia",drop_video:"Įkelkite vaizdo įrašą čia"},lw={common:Fp,upload_text:Vp},aw=Object.freeze(Object.defineProperty({__proto__:null,common:Fp,default:lw,upload_text:Vp},Symbol.toStringTag,{value:"Module"})),Up={built_with_gradio:"gemaakt met gradio",clear:"Wis",or:"of",submit:"Zend in"},jp={click_to_upload:"Klik om the Uploaden",drop_audio:"Sleep een Geluidsbestand hier",drop_csv:"Sleep een CSV hier",drop_file:"Sleep een Document hier",drop_image:"Sleep een Afbeelding hier",drop_video:"Sleep een Video hier"},hw={common:Up,upload_text:jp},cw=Object.freeze(Object.defineProperty({__proto__:null,common:Up,default:hw,upload_text:jp},Symbol.toStringTag,{value:"Module"})),zp={built_with_gradio:"utworzone z gradio",clear:"Wyczyść",or:"lub",submit:"Zatwierdź"},Wp={click_to_upload:"Kliknij, aby przesłać",drop_audio:"Przeciągnij tutaj audio",drop_csv:"Przeciągnij tutaj CSV",drop_file:"Przeciągnij tutaj plik",drop_image:"Przeciągnij tutaj zdjęcie",drop_video:"Przeciągnij tutaj video"},uw={common:zp,upload_text:Wp},fw=Object.freeze(Object.defineProperty({__proto__:null,common:zp,default:uw,upload_text:Wp},Symbol.toStringTag,{value:"Module"})),Gp={built_with_gradio:"Construído com gradio",clear:"Limpar",error:"Erro",flag:"Marcar",loading:"Carregando",or:"ou",submit:"Enviar"},qp={click_to_upload:"Clique para o Upload",drop_audio:"Solte o Áudio Aqui",drop_csv:"Solte o CSV Aqui",drop_file:"Solte o Arquivo Aqui",drop_image:"Solte a Imagem Aqui",drop_video:"Solte o Vídeo Aqui"},dw={common:Gp,upload_text:qp},pw=Object.freeze(Object.defineProperty({__proto__:null,common:Gp,default:dw,upload_text:qp},Symbol.toStringTag,{value:"Module"})),$p={annotated_image:"Аннотированное изображение"},Kp={allow_recording_access:"Пожалуйста, предоставьте доступ к микрофону для записи.",audio:"Аудио",record_from_microphone:"Записать с микрофона",stop_recording:"Остановить запись",no_device_support:"Не удалось получить доступ к медиаустройствам. Убедитесь, что вы работаете на защищенном источнике (https) или localhost (или передали действительный SSL-сертификат в ssl_verify), и разрешили браузеру доступ к устройству.",stop:"Стоп",resume:"Продолжить",record:"Записать",no_microphone:"Микрофон не найден",pause:"Пауза",play:"Воспроизвести"},Xp={connection_can_break:"На мобильных устройствах соединение может прерваться, если вкладка будет переключена или устройство отключится, что приведет к потере вашей позиции в очереди.",long_requests_queue:"Очередь запросов длинная. Продублируйте это пространство, чтобы пропустить.",lost_connection:"Потеряно соединение из-за ухода со страницы. Повторное подключение..."},Jp={checkbox:"Чекбокс",checkbox_group:"Группа чекбоксов"},Yp={code:"Код"},Zp={color_picker:"Выбор цвета"},Qp={built_with:"создано с",built_with_gradio:"Создано с помощью Gradio",clear:"Очистить",download:"Скачать",edit:"Изменить",empty:"Пусто",error:"Ошибка",hosted_on:"Размещено на",loading:"Загрузка",logo:"логотип",or:"или",remove:"Удалить",share:"Поделиться",submit:"Отправить",undo:"Отменить",no_devices:"Не найдено ни одного устройства"},em={incorrect_format:"Неправильный формат, поддерживаются только файлы CSV и TSV",new_column:"Новая колонка",new_row:"Новый ряд"},tm={dropdown:"Dropdown"},im={build_error:"возникла ошибка сборки",config_error:"возникла ошибка конфигурации",contact_page_author:"Пожалуйста, свяжитесь с автором страницы, чтобы сообщить ему об этом.",no_app_file:"отсутствует файл приложения",runtime_error:"возникла проблема с выполнением",space_not_working:'"Пространство не работает, потому что" {0}',space_paused:"пространство приостановлено",use_via_api:"Использовать через API"},nm={uploading:"Загружаем..."},rm={highlighted_text:"Выделенный текст"},sm={allow_webcam_access:"Пожалуйста, разрешите доступ к веб-камере для записи.",brush_color:"Цвет кисти",brush_radius:"Радиус кисти",image:"Изображение",remove_image:"Удалить изображение",select_brush_color:"Выберите цвет кисти",start_drawing:"Начните рисовать",use_brush:"Используйте кисть"},om={label:"Лейбл"},lm={enable_cookies:"Если вы посещаете пространство HuggingFace в режиме инкогнито, вы должны разрешить сторонние файлы cookie.",incorrect_credentials:"Неправильные учетные данные",login:"Вход в систему"},am={number:"Число"},hm={plot:"Схема"},cm={radio:"Радио"},um={slider:"Слайдер"},fm={click_to_upload:"Нажмите, чтобы загрузить",drop_audio:"Перетащите аудио сюда",drop_csv:"Перетащите файл CSV сюда",drop_file:"Перетащите файл сюда",drop_image:"Перетащите изображение сюда",drop_video:"Перетащите видео сюда",drop_gallery:"Перетащите изображение(-я) сюда",paste_clipboard:"Вставка из буфера обмена"},mw={"3D_model":{"3d_model":"3D-модель"},annotated_image:$p,audio:Kp,blocks:Xp,checkbox:Jp,code:Yp,color_picker:Zp,common:Qp,dataframe:em,dropdown:tm,errors:im,file:nm,highlighted_text:rm,image:sm,label:om,login:lm,number:am,plot:hm,radio:cm,slider:um,upload_text:fm},gw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:$p,audio:Kp,blocks:Xp,checkbox:Jp,code:Yp,color_picker:Zp,common:Qp,dataframe:em,default:mw,dropdown:tm,errors:im,file:nm,highlighted_text:rm,image:sm,label:om,login:lm,number:am,plot:hm,radio:cm,slider:um,upload_text:fm},Symbol.toStringTag,{value:"Module"})),dm={built_with_gradio:"கிரேடியோ வுடன் உருவாக்கப்பட்டது",clear:"அழிக்கவும்",or:"அல்லது",submit:"சமர்ப்பிக்கவும்"},pm={click_to_upload:"பதிவேற்ற அழுத்தவும்",drop_audio:"ஆடியோவை பதிவேற்றவும்",drop_csv:"csv ஐ பதிவேற்றவும்",drop_file:"கோப்பை பதிவேற்றவும்",drop_image:"படத்தை பதிவேற்றவும்",drop_video:"காணொளியை பதிவேற்றவும்"},bw={common:dm,upload_text:pm},_w=Object.freeze(Object.defineProperty({__proto__:null,common:dm,default:bw,upload_text:pm},Symbol.toStringTag,{value:"Module"})),mm={built_with_gradio:"Gradio ile oluşturulmuştur",clear:"Temizle",or:"veya",submit:"Yükle"},gm={click_to_upload:"Yüklemek için Tıkla",drop_audio:"Kaydı Buraya Sürükle",drop_csv:"CSV'yi Buraya Sürükle",drop_file:"Dosyayı Buraya Sürükle",drop_image:"Resmi Buraya Sürükle",drop_video:"Videoyu Buraya Sürükle"},yw={common:mm,upload_text:gm},ww=Object.freeze(Object.defineProperty({__proto__:null,common:mm,default:yw,upload_text:gm},Symbol.toStringTag,{value:"Module"})),bm={built_with_gradio:"Зроблено на основі gradio",clear:"Очистити",or:"або",submit:"Надіслати"},_m={click_to_upload:"Натисніть щоб завантажити",drop_audio:"Перетягніть аудіо сюди",drop_csv:"Перетягніть CSV-файл сюди",drop_file:"Перетягніть файл сюди",drop_image:"Перетягніть зображення сюди",drop_video:"Перетягніть відео сюди"},vw={common:bm,upload_text:_m},kw=Object.freeze(Object.defineProperty({__proto__:null,common:bm,default:vw,upload_text:_m},Symbol.toStringTag,{value:"Module"})),ym={built_with_gradio:"کے ساتھ بنایا گیا Gradio",clear:"ہٹا دیں",or:"یا",submit:"جمع کریں"},wm={click_to_upload:"اپ لوڈ کے لیے کلک کریں",drop_audio:"یہاں آڈیو ڈراپ کریں",drop_csv:"یہاں فائل ڈراپ کریں",drop_file:"یہاں فائل ڈراپ کریں",drop_image:"یہاں تصویر ڈراپ کریں",drop_video:"یہاں ویڈیو ڈراپ کریں"},xw={common:ym,upload_text:wm},Sw=Object.freeze(Object.defineProperty({__proto__:null,common:ym,default:xw,upload_text:wm},Symbol.toStringTag,{value:"Module"})),vm={built_with_gradio:"gradio bilan qilingan",clear:"Tozalash",submit:"Yubor"},km={click_to_upload:"Yuklash uchun Bosing",drop_audio:"Audioni Shu Yerga Tashlang",drop_csv:"CSVni Shu Yerga Tashlang",drop_file:"Faylni Shu Yerga Tashlang",drop_image:"Rasmni Shu Yerga Tashlang",drop_video:"Videoni Shu Yerga Tashlang"},Aw={common:vm,upload_text:km},Ew=Object.freeze(Object.defineProperty({__proto__:null,common:vm,default:Aw,upload_text:km},Symbol.toStringTag,{value:"Module"})),xm={annotated_image:"标注图像"},Sm={allow_recording_access:"请允许访问麦克风以进行录音。",audio:"音频",record_from_microphone:"从麦克风录制",stop_recording:"停止录制",no_device_support:"无法访问媒体设备。请检查您是否在安全来源（https）或本地主机上运行（或者您已经通过 ssl_verify 传递了有效的 SSL 证书），并且您已经允许浏览器访问您的设备。",stop:"停止",resume:"继续",record:"录制",no_microphone:"找不到麦克风",pause:"暂停",play:"播放"},Am={connection_can_break:"在移动设备上，如果此标签页失去焦点或设备休眠，连接可能会中断，导致您在队列中失去位置。",long_requests_queue:"有一个长时间的待处理请求队列。复制此空间以跳过。",lost_connection:"由于离开页面，连接已丢失。重新加入队列..."},Em={checkbox:"复选框",checkbox_group:"复选框组"},Cm={code:"代码"},Tm={color_picker:"颜色选择器"},Mm={built_with:"构建于",built_with_gradio:"使用 Gradio 构建",clear:"清除",download:"下载",edit:"编辑",empty:"空",error:"错误",hosted_on:"托管在",loading:"加载中",logo:"标志",or:"或",remove:"移除",share:"分享",submit:"提交",undo:"撤销"},Om={incorrect_format:"格式不正确，仅支持 CSV 和 TSV 文件",new_column:"新列",new_row:"新行"},Dm={dropdown:"下拉菜单"},Pm={build_error:"存在构建错误",config_error:"存在配置错误",contact_page_author:"请联系页面的作者并告知他们。",no_app_file:"不存在应用文件",runtime_error:"存在运行时错误",space_not_working:'"空间无法工作，原因：" {0}',space_paused:"空间已暂停",use_via_api:"通过 API 使用"},Lm={uploading:"正在上传..."},Rm={highlighted_text:"高亮文本"},Im={allow_webcam_access:"请允许访问网络摄像头以进行录制。",brush_color:"画笔颜色",brush_radius:"画笔半径",image:"图像",remove_image:"移除图像",select_brush_color:"选择画笔颜色",start_drawing:"开始绘画",use_brush:"使用画笔"},Nm={label:"标签"},Bm={enable_cookies:"如果您正在使用隐身模式访问 HuggingFace 空间，您必须启用第三方 cookie。",incorrect_credentials:"凭据不正确",login:"登录"},Hm={number:"数字"},Fm={plot:"图表"},Vm={radio:"单选框"},Um={slider:"滑块"},jm={click_to_upload:"点击上传",drop_audio:"将音频拖放到此处",drop_csv:"将 CSV 文件拖放到此处",drop_file:"将文件拖放到此处",drop_image:"将图像拖放到此处",drop_video:"将视频拖放到此处"},Cw={"3D_model":{"3d_model":"3D模型"},annotated_image:xm,audio:Sm,blocks:Am,checkbox:Em,code:Cm,color_picker:Tm,common:Mm,dataframe:Om,dropdown:Dm,errors:Pm,file:Lm,highlighted_text:Rm,image:Im,label:Nm,login:Bm,number:Hm,plot:Fm,radio:Vm,slider:Um,upload_text:jm},Tw=Object.freeze(Object.defineProperty({__proto__:null,annotated_image:xm,audio:Sm,blocks:Am,checkbox:Em,code:Cm,color_picker:Tm,common:Mm,dataframe:Om,default:Cw,dropdown:Dm,errors:Pm,file:Lm,highlighted_text:Rm,image:Im,label:Nm,login:Bm,number:Hm,plot:Fm,radio:Vm,slider:Um,upload_text:jm},Symbol.toStringTag,{value:"Module"})),zm={built_with_gradio:"使用Gradio構建",clear:"清除",or:"或",submit:"提交"},Wm={click_to_upload:"點擊上傳",drop_audio:"拖放音訊至此處",drop_csv:"拖放CSV至此處",drop_file:"拖放檔案至此處",drop_image:"拖放圖片至此處",drop_video:"拖放影片至此處"},Mw={common:zm,upload_text:Wm},Ow=Object.freeze(Object.defineProperty({__proto__:null,common:zm,default:Mw,upload_text:Wm},Symbol.toStringTag,{value:"Module"})),hc=Object.assign({"./lang/ar.json":N1,"./lang/ca.json":H1,"./lang/ckb.json":V1,"./lang/de.json":j1,"./lang/en.json":W1,"./lang/es.json":q1,"./lang/eu.json":K1,"./lang/fa.json":J1,"./lang/fr.json":Z1,"./lang/he.json":ew,"./lang/hi.json":iw,"./lang/ja.json":rw,"./lang/ko.json":ow,"./lang/lt.json":aw,"./lang/nl.json":cw,"./lang/pl.json":fw,"./lang/pt-BR.json":pw,"./lang/ru.json":gw,"./lang/ta.json":_w,"./lang/tr.json":ww,"./lang/uk.json":kw,"./lang/ur.json":Sw,"./lang/uz.json":Ew,"./lang/zh-CN.json":Tw,"./lang/zh-TW.json":Ow});function Dw(){let i={};for(const e in hc){const t=e.split("/").pop().split(".").shift();i[t]=hc[e].default}return i}const cc=Dw();for(const i in cc)Sd(i,cc[i]);async function Gm(){await h1({fallbackLocale:"en",initialLocale:_1()})}function bn(i){let e=["","k","M","G","T","P","E","Z"],t=0;for(;i>1e3&&t<e.length-1;)i/=1e3,t++;let n=e[t];return(Number.isInteger(i)?i:i.toFixed(1))+n}function uc(i){return Object.prototype.toString.call(i)==="[object Date]"}function jl(i,e,t,n){if(typeof t=="number"||uc(t)){const r=n-t,s=(t-e)/(i.dt||1/60),o=i.opts.stiffness*r,l=i.opts.damping*s,a=(o-l)*i.inv_mass,h=(s+a)*i.dt;return Math.abs(h)<i.opts.precision&&Math.abs(r)<i.opts.precision?n:(i.settled=!1,uc(t)?new Date(t.getTime()+h):t+h)}else{if(Array.isArray(t))return t.map((r,s)=>jl(i,e[s],t[s],n[s]));if(typeof t=="object"){const r={};for(const s in t)r[s]=jl(i,e[s],t[s],n[s]);return r}else throw new Error(`Cannot spring ${typeof t} values`)}}function fc(i,e={}){const t=Un(i),{stiffness:n=.15,damping:r=.8,precision:s=.01}=e;let o,l,a,h=i,c=i,u=1,f=0,d=!1;function p(m,b={}){c=m;const w=a={};return i==null||b.hard||g.stiffness>=1&&g.damping>=1?(d=!0,o=xr(),h=m,t.set(i=c),Promise.resolve()):(b.soft&&(f=1/((b.soft===!0?.5:+b.soft)*60),u=0),l||(o=xr(),d=!1,l=ho(y=>{if(d)return d=!1,l=null,!1;u=Math.min(u+f,1);const k={inv_mass:u,opts:g,settled:!0,dt:(y-o)*60/1e3},A=jl(k,h,i,c);return o=y,h=i,t.set(i=A),k.settled&&(l=null),!k.settled})),new Promise(y=>{l.promise.then(()=>{w===a&&y()})}))}const g={set:p,update:(m,b)=>p(m(c,i),b),subscribe:t.subscribe,stiffness:n,damping:r,precision:s};return g}function Pw(i){let e,t,n,r,s,o,l,a,h,c,u,f;return{c(){e=X("div"),t=Ze("svg"),n=Ze("g"),r=Ze("path"),s=Ze("path"),o=Ze("path"),l=Ze("path"),a=Ze("g"),h=Ze("path"),c=Ze("path"),u=Ze("path"),f=Ze("path"),S(r,"d","M255.926 0.754768L509.702 139.936V221.027L255.926 81.8465V0.754768Z"),S(r,"fill","#FF7C00"),S(r,"fill-opacity","0.4"),S(r,"class","svelte-zyxd38"),S(s,"d","M509.69 139.936L254.981 279.641V361.255L509.69 221.55V139.936Z"),S(s,"fill","#FF7C00"),S(s,"class","svelte-zyxd38"),S(o,"d","M0.250138 139.937L254.981 279.641V361.255L0.250138 221.55V139.937Z"),S(o,"fill","#FF7C00"),S(o,"fill-opacity","0.4"),S(o,"class","svelte-zyxd38"),S(l,"d","M255.923 0.232622L0.236328 139.936V221.55L255.923 81.8469V0.232622Z"),S(l,"fill","#FF7C00"),S(l,"class","svelte-zyxd38"),te(n,"transform","translate("+i[1][0]+"px, "+i[1][1]+"px)"),S(h,"d","M255.926 141.5L509.702 280.681V361.773L255.926 222.592V141.5Z"),S(h,"fill","#FF7C00"),S(h,"fill-opacity","0.4"),S(h,"class","svelte-zyxd38"),S(c,"d","M509.69 280.679L254.981 420.384V501.998L509.69 362.293V280.679Z"),S(c,"fill","#FF7C00"),S(c,"class","svelte-zyxd38"),S(u,"d","M0.250138 280.681L254.981 420.386V502L0.250138 362.295V280.681Z"),S(u,"fill","#FF7C00"),S(u,"fill-opacity","0.4"),S(u,"class","svelte-zyxd38"),S(f,"d","M255.923 140.977L0.236328 280.68V362.294L255.923 222.591V140.977Z"),S(f,"fill","#FF7C00"),S(f,"class","svelte-zyxd38"),te(a,"transform","translate("+i[2][0]+"px, "+i[2][1]+"px)"),S(t,"viewBox","-1200 -1200 3000 3000"),S(t,"fill","none"),S(t,"xmlns","http://www.w3.org/2000/svg"),S(t,"class","svelte-zyxd38"),S(e,"class","svelte-zyxd38"),Y(e,"margin",i[0])},m(d,p){B(d,e,p),z(e,t),z(t,n),z(n,r),z(n,s),z(n,o),z(n,l),z(t,a),z(a,h),z(a,c),z(a,u),z(a,f)},p(d,[p]){p&2&&te(n,"transform","translate("+d[1][0]+"px, "+d[1][1]+"px)"),p&4&&te(a,"transform","translate("+d[2][0]+"px, "+d[2][1]+"px)"),p&1&&Y(e,"margin",d[0])},i:Ee,o:Ee,d(d){d&&N(e)}}}function Lw(i,e,t){let n,r,{margin:s=!0}=e;const o=fc([0,0]);Tn(i,o,f=>t(1,n=f));const l=fc([0,0]);Tn(i,l,f=>t(2,r=f));let a;async function h(){await Promise.all([o.set([125,140]),l.set([-125,-140])]),await Promise.all([o.set([-125,140]),l.set([125,-140])]),await Promise.all([o.set([-125,0]),l.set([125,-0])]),await Promise.all([o.set([125,0]),l.set([-125,0])])}async function c(){await h(),a||c()}async function u(){await Promise.all([o.set([125,0]),l.set([-125,0])]),c()}return Ar(()=>(u(),()=>a=!0)),i.$$set=f=>{"margin"in f&&t(0,s=f.margin)},[s,n,r,o,l]}class Rw extends $t{constructor(e){super(),qt(this,e,Lw,Pw,yt,{margin:0})}get margin(){return this.$$.ctx[0]}set margin(e){this.$$set({margin:e}),E()}}function Iw(i){let e,t,n;const r=i[18].default,s=Fr(r,i,i[17],null);let o=[{"data-testid":i[7]},{id:i[2]},{class:t="block "+i[3].join(" ")+" svelte-12cmxck"}],l={};for(let a=0;a<o.length;a+=1)l=Fa(l,o[a]);return{c(){e=X(i[14]),s&&s.c(),Gh(i[14])(e,l),Y(e,"hidden",i[10]===!1),Y(e,"padded",i[6]),Y(e,"border_focus",i[5]==="focus"),Y(e,"border_contrast",i[5]==="contrast"),Y(e,"hide-container",!i[8]&&!i[9]),te(e,"height",i[15](i[0])),te(e,"width",typeof i[1]=="number"?`calc(min(${i[1]}px, 100%))`:i[15](i[1])),te(e,"border-style",i[4]),te(e,"overflow",i[11]?"visible":"hidden"),te(e,"flex-grow",i[12]),te(e,"min-width",`calc(min(${i[13]}px, 100%))`),te(e,"border-width","var(--block-border-width)")},m(a,h){B(a,e,h),s&&s.m(e,null),n=!0},p(a,h){s&&s.p&&(!n||h&131072)&&Ur(s,r,a,a[17],n?Vr(r,a[17],h,null):jr(a[17]),null),Gh(a[14])(e,l=nd(o,[(!n||h&128)&&{"data-testid":a[7]},(!n||h&4)&&{id:a[2]},(!n||h&8&&t!==(t="block "+a[3].join(" ")+" svelte-12cmxck"))&&{class:t}])),Y(e,"hidden",a[10]===!1),Y(e,"padded",a[6]),Y(e,"border_focus",a[5]==="focus"),Y(e,"border_contrast",a[5]==="contrast"),Y(e,"hide-container",!a[8]&&!a[9]),h&1&&te(e,"height",a[15](a[0])),h&2&&te(e,"width",typeof a[1]=="number"?`calc(min(${a[1]}px, 100%))`:a[15](a[1])),h&16&&te(e,"border-style",a[4]),h&2048&&te(e,"overflow",a[11]?"visible":"hidden"),h&4096&&te(e,"flex-grow",a[12]),h&8192&&te(e,"min-width",`calc(min(${a[13]}px, 100%))`)},i(a){n||(Q(s,a),n=!0)},o(a){ie(s,a),n=!1},d(a){a&&N(e),s&&s.d(a)}}}function Nw(i){let e,t=i[14]&&Iw(i);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,[r]){n[14]&&t.p(n,r)},i(n){e||(Q(t,n),e=!0)},o(n){ie(t,n),e=!1},d(n){t&&t.d(n)}}}function Bw(i,e,t){let{$$slots:n={},$$scope:r}=e,{height:s=void 0}=e,{width:o=void 0}=e,{elem_id:l=""}=e,{elem_classes:a=[]}=e,{variant:h="solid"}=e,{border_mode:c="base"}=e,{padding:u=!0}=e,{type:f="normal"}=e,{test_id:d=void 0}=e,{explicit_call:p=!1}=e,{container:g=!0}=e,{visible:m=!0}=e,{allow_overflow:b=!0}=e,{scale:w=null}=e,{min_width:y=0}=e,k=f==="fieldset"?"fieldset":"div";const A=x=>{if(x!==void 0){if(typeof x=="number")return x+"px";if(typeof x=="string")return x}};return i.$$set=x=>{"height"in x&&t(0,s=x.height),"width"in x&&t(1,o=x.width),"elem_id"in x&&t(2,l=x.elem_id),"elem_classes"in x&&t(3,a=x.elem_classes),"variant"in x&&t(4,h=x.variant),"border_mode"in x&&t(5,c=x.border_mode),"padding"in x&&t(6,u=x.padding),"type"in x&&t(16,f=x.type),"test_id"in x&&t(7,d=x.test_id),"explicit_call"in x&&t(8,p=x.explicit_call),"container"in x&&t(9,g=x.container),"visible"in x&&t(10,m=x.visible),"allow_overflow"in x&&t(11,b=x.allow_overflow),"scale"in x&&t(12,w=x.scale),"min_width"in x&&t(13,y=x.min_width),"$$scope"in x&&t(17,r=x.$$scope)},[s,o,l,a,h,c,u,d,p,g,m,b,w,y,k,A,f,r,n]}class Hw extends $t{constructor(e){super(),qt(this,e,Bw,Nw,yt,{height:0,width:1,elem_id:2,elem_classes:3,variant:4,border_mode:5,padding:6,type:16,test_id:7,explicit_call:8,container:9,visible:10,allow_overflow:11,scale:12,min_width:13})}get height(){return this.$$.ctx[0]}set height(e){this.$$set({height:e}),E()}get width(){return this.$$.ctx[1]}set width(e){this.$$set({width:e}),E()}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),E()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),E()}get variant(){return this.$$.ctx[4]}set variant(e){this.$$set({variant:e}),E()}get border_mode(){return this.$$.ctx[5]}set border_mode(e){this.$$set({border_mode:e}),E()}get padding(){return this.$$.ctx[6]}set padding(e){this.$$set({padding:e}),E()}get type(){return this.$$.ctx[16]}set type(e){this.$$set({type:e}),E()}get test_id(){return this.$$.ctx[7]}set test_id(e){this.$$set({test_id:e}),E()}get explicit_call(){return this.$$.ctx[8]}set explicit_call(e){this.$$set({explicit_call:e}),E()}get container(){return this.$$.ctx[9]}set container(e){this.$$set({container:e}),E()}get visible(){return this.$$.ctx[10]}set visible(e){this.$$set({visible:e}),E()}get allow_overflow(){return this.$$.ctx[11]}set allow_overflow(e){this.$$set({allow_overflow:e}),E()}get scale(){return this.$$.ctx[12]}set scale(e){this.$$set({scale:e}),E()}get min_width(){return this.$$.ctx[13]}set min_width(e){this.$$set({min_width:e}),E()}}function dc(i){let e,t;return{c(){e=X("span"),t=ce(i[1]),S(e,"class","svelte-rk35yg")},m(n,r){B(n,e,r),z(e,t)},p(n,r){r&2&&Ue(t,n[1])},d(n){n&&N(e)}}}function Fw(i){let e,t,n,r,s,o,l,a=i[2]&&dc(i);return r=new i[0]({}),{c(){e=X("button"),a&&a.c(),t=Ae(),n=X("div"),pt(r.$$.fragment),S(n,"class","svelte-rk35yg"),Y(n,"small",i[4]==="small"),Y(n,"large",i[4]==="large"),Y(n,"medium",i[4]==="medium"),e.disabled=i[7],S(e,"aria-label",i[1]),S(e,"aria-haspopup",i[8]),S(e,"title",i[1]),S(e,"class","svelte-rk35yg"),Y(e,"pending",i[3]),Y(e,"padded",i[5]),Y(e,"highlight",i[6]),Y(e,"transparent",i[9]),te(e,"color",!i[7]&&i[12]?i[12]:"var(--block-label-text-color)"),te(e,"--bg-color",i[7]?"auto":i[10]),te(e,"margin-left",i[11]+"px")},m(h,c){B(h,e,c),a&&a.m(e,null),z(e,t),z(e,n),nt(r,n,null),s=!0,o||(l=Ns(e,"click",i[14]),o=!0)},p(h,[c]){h[2]?a?a.p(h,c):(a=dc(h),a.c(),a.m(e,t)):a&&(a.d(1),a=null),(!s||c&16)&&Y(n,"small",h[4]==="small"),(!s||c&16)&&Y(n,"large",h[4]==="large"),(!s||c&16)&&Y(n,"medium",h[4]==="medium"),(!s||c&128)&&(e.disabled=h[7]),(!s||c&2)&&S(e,"aria-label",h[1]),(!s||c&256)&&S(e,"aria-haspopup",h[8]),(!s||c&2)&&S(e,"title",h[1]),(!s||c&8)&&Y(e,"pending",h[3]),(!s||c&32)&&Y(e,"padded",h[5]),(!s||c&64)&&Y(e,"highlight",h[6]),(!s||c&512)&&Y(e,"transparent",h[9]),c&4224&&te(e,"color",!h[7]&&h[12]?h[12]:"var(--block-label-text-color)"),c&1152&&te(e,"--bg-color",h[7]?"auto":h[10]),c&2048&&te(e,"margin-left",h[11]+"px")},i(h){s||(Q(r.$$.fragment,h),s=!0)},o(h){ie(r.$$.fragment,h),s=!1},d(h){h&&N(e),a&&a.d(),rt(r),o=!1,l()}}}function Vw(i,e,t){let n,{Icon:r}=e,{label:s=""}=e,{show_label:o=!1}=e,{pending:l=!1}=e,{size:a="small"}=e,{padded:h=!0}=e,{highlight:c=!1}=e,{disabled:u=!1}=e,{hasPopup:f=!1}=e,{color:d="var(--block-label-text-color)"}=e,{transparent:p=!1}=e,{background:g="var(--background-fill-primary)"}=e,{offset:m=0}=e;function b(w){P_.call(this,i,w)}return i.$$set=w=>{"Icon"in w&&t(0,r=w.Icon),"label"in w&&t(1,s=w.label),"show_label"in w&&t(2,o=w.show_label),"pending"in w&&t(3,l=w.pending),"size"in w&&t(4,a=w.size),"padded"in w&&t(5,h=w.padded),"highlight"in w&&t(6,c=w.highlight),"disabled"in w&&t(7,u=w.disabled),"hasPopup"in w&&t(8,f=w.hasPopup),"color"in w&&t(13,d=w.color),"transparent"in w&&t(9,p=w.transparent),"background"in w&&t(10,g=w.background),"offset"in w&&t(11,m=w.offset)},i.$$.update=()=>{i.$$.dirty&8256&&t(12,n=c?"var(--color-accent)":d)},[r,s,o,l,a,h,c,u,f,p,g,m,n,d,b]}class Uw extends $t{constructor(e){super(),qt(this,e,Vw,Fw,yt,{Icon:0,label:1,show_label:2,pending:3,size:4,padded:5,highlight:6,disabled:7,hasPopup:8,color:13,transparent:9,background:10,offset:11})}get Icon(){return this.$$.ctx[0]}set Icon(e){this.$$set({Icon:e}),E()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),E()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),E()}get pending(){return this.$$.ctx[3]}set pending(e){this.$$set({pending:e}),E()}get size(){return this.$$.ctx[4]}set size(e){this.$$set({size:e}),E()}get padded(){return this.$$.ctx[5]}set padded(e){this.$$set({padded:e}),E()}get highlight(){return this.$$.ctx[6]}set highlight(e){this.$$set({highlight:e}),E()}get disabled(){return this.$$.ctx[7]}set disabled(e){this.$$set({disabled:e}),E()}get hasPopup(){return this.$$.ctx[8]}set hasPopup(e){this.$$set({hasPopup:e}),E()}get color(){return this.$$.ctx[13]}set color(e){this.$$set({color:e}),E()}get transparent(){return this.$$.ctx[9]}set transparent(e){this.$$set({transparent:e}),E()}get background(){return this.$$.ctx[10]}set background(e){this.$$set({background:e}),E()}get offset(){return this.$$.ctx[11]}set offset(e){this.$$set({offset:e}),E()}}function jw(i){let e,t,n,r;return{c(){e=Ze("svg"),t=Ze("g"),n=Ze("path"),r=Ze("path"),S(n,"d","M18,6L6.087,17.913"),te(n,"fill","none"),te(n,"fill-rule","nonzero"),te(n,"stroke-width","2px"),S(t,"transform","matrix(1.14096,-0.140958,-0.140958,1.14096,-0.0559523,0.0559523)"),S(r,"d","M4.364,4.364L19.636,19.636"),te(r,"fill","none"),te(r,"fill-rule","nonzero"),te(r,"stroke-width","2px"),S(e,"width","100%"),S(e,"height","100%"),S(e,"viewBox","0 0 24 24"),S(e,"version","1.1"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),S(e,"xml:space","preserve"),S(e,"stroke","currentColor"),te(e,"fill-rule","evenodd"),te(e,"clip-rule","evenodd"),te(e,"stroke-linecap","round"),te(e,"stroke-linejoin","round")},m(s,o){B(s,e,o),z(e,t),z(t,n),z(e,r)},p:Ee,i:Ee,o:Ee,d(s){s&&N(e)}}}class zw extends $t{constructor(e){super(),qt(this,e,null,jw,yt,{})}}const DM=["red","green","blue","yellow","purple","teal","orange","cyan","lime","pink"],Ww=[{color:"red",primary:600,secondary:100},{color:"green",primary:600,secondary:100},{color:"blue",primary:600,secondary:100},{color:"yellow",primary:500,secondary:100},{color:"purple",primary:600,secondary:100},{color:"teal",primary:600,secondary:100},{color:"orange",primary:600,secondary:100},{color:"cyan",primary:600,secondary:100},{color:"lime",primary:500,secondary:100},{color:"pink",primary:600,secondary:100}],pc={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}},PM=Ww.reduce((i,{color:e,primary:t,secondary:n})=>({...i,[e]:{primary:pc[e][t],secondary:pc[e][n]}}),{});var mc=function(i,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(i,t):r?r.value=t:e.set(i,t),t},gc=function(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)},Cs,Ts;class qo extends Error{constructor(e){super(e),this.name="ShareError"}}async function LM(i,e){if(window.__gradio_space__==null)throw new qo("Must be on Spaces to share.");let t,n,r;{let a;if(typeof i=="object"&&i.url)a=i.url;else if(typeof i=="string")a=i;else throw new Error("Invalid data format for URL type");const h=await fetch(a);t=await h.blob(),n=h.headers.get("content-type")||"",r=h.headers.get("content-disposition")||""}const s=new File([t],r,{type:n}),o=await fetch("https://huggingface.co/uploads",{method:"POST",body:s,headers:{"Content-Type":s.type,"X-Requested-With":"XMLHttpRequest"}});if(!o.ok){if(o.headers.get("content-type")?.includes("application/json")){const a=await o.json();throw new qo(`Upload failed: ${a.error}`)}throw new qo("Upload failed.")}return await o.text()}function RM(i){i.addEventListener("click",e);async function e(t){const n=t.composedPath(),[r]=n.filter(s=>s?.tagName==="BUTTON"&&s.classList.contains("copy_code_button"));if(r){let a=function(h){h.style.opacity="1",setTimeout(()=>{h.style.opacity="0"},2e3)};t.stopImmediatePropagation();const s=r.parentElement.innerText.trim(),o=Array.from(r.children)[1];await Gw(s)&&a(o)}}return{destroy(){i.removeEventListener("click",e)}}}async function Gw(i){let e=!1;if("clipboard"in navigator)await navigator.clipboard.writeText(i),e=!0;else{const t=document.createElement("textarea");t.value=i,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy"),e=!0}catch(n){console.error(n),e=!1}finally{t.remove()}}return e}const IM=i=>{const e=Math.floor(i/3600),t=Math.floor(i%3600/60),n=Math.round(i)%60,r=`${t<10?"0":""}${t}`,s=`${n<10?"0":""}${n}`;return e>0?`${e}:${r}:${s}`:`${t}:${s}`};class NM{constructor(e,t,n,r,s,o,l,a=u=>u,h,c){Cs.set(this,void 0),Ts.set(this,void 0),this.load_component=qw.bind(this),mc(this,Cs,e,"f"),this.theme=n,this.version=r,mc(this,Ts,t,"f"),this.max_file_size=l,this.i18n=a,this.root=s,this.autoscroll=o,this.client=h,this._load_component=c}dispatch(e,t){const n=new CustomEvent("gradio",{bubbles:!0,detail:{data:t,id:gc(this,Cs,"f"),event:e}});gc(this,Ts,"f").dispatchEvent(n)}}Cs=new WeakMap,Ts=new WeakMap;function qw(i,e="component"){return this._load_component({name:i,api_url:this.client.config?.root,variant:e})}const $w=i=>({}),bc=i=>({}),Kw=i=>({}),_c=i=>({});function yc(i,e,t){const n=i.slice();return n[40]=e[t],n[42]=t,n}function wc(i,e,t){const n=i.slice();return n[40]=e[t],n}function Xw(i){let e,t,n,r,s=i[1]("common.error")+"",o,l,a;t=new Uw({props:{Icon:zw,label:i[1]("common.clear"),disabled:!1}}),t.$on("click",i[32]);const h=i[30].error,c=Fr(h,i,i[29],bc);return{c(){e=X("div"),pt(t.$$.fragment),n=Ae(),r=X("span"),o=ce(s),l=Ae(),c&&c.c(),S(e,"class","clear-status svelte-au1olv"),S(r,"class","error svelte-au1olv")},m(u,f){B(u,e,f),nt(t,e,null),B(u,n,f),B(u,r,f),z(r,o),B(u,l,f),c&&c.m(u,f),a=!0},p(u,f){const d={};f[0]&2&&(d.label=u[1]("common.clear")),t.$set(d),(!a||f[0]&2)&&s!==(s=u[1]("common.error")+"")&&Ue(o,s),c&&c.p&&(!a||f[0]&536870912)&&Ur(c,h,u,u[29],a?Vr(h,u[29],f,$w):jr(u[29]),bc)},i(u){a||(Q(t.$$.fragment,u),Q(c,u),a=!0)},o(u){ie(t.$$.fragment,u),ie(c,u),a=!1},d(u){u&&(N(e),N(n),N(r),N(l)),rt(t),c&&c.d(u)}}}function Jw(i){let e,t,n,r,s,o,l,a,h,c=i[8]==="default"&&i[18]&&i[6]==="full"&&vc(i);function u(y,k){if(y[7])return Qw;if(y[2]!==null&&y[3]!==void 0&&y[2]>=0)return Zw;if(y[2]===0)return Yw}let f=u(i),d=f&&f(i),p=i[5]&&Sc(i);const g=[nv,iv],m=[];function b(y,k){return y[15]!=null?0:y[6]==="full"?1:-1}~(s=b(i))&&(o=m[s]=g[s](i));let w=!i[5]&&Dc(i);return{c(){c&&c.c(),e=Ae(),t=X("div"),d&&d.c(),n=Ae(),p&&p.c(),r=Ae(),o&&o.c(),l=Ae(),w&&w.c(),a=Ct(),S(t,"class","progress-text svelte-au1olv"),Y(t,"meta-text-center",i[8]==="center"),Y(t,"meta-text",i[8]==="default")},m(y,k){c&&c.m(y,k),B(y,e,k),B(y,t,k),d&&d.m(t,null),z(t,n),p&&p.m(t,null),B(y,r,k),~s&&m[s].m(y,k),B(y,l,k),w&&w.m(y,k),B(y,a,k),h=!0},p(y,k){y[8]==="default"&&y[18]&&y[6]==="full"?c?c.p(y,k):(c=vc(y),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f===(f=u(y))&&d?d.p(y,k):(d&&d.d(1),d=f&&f(y),d&&(d.c(),d.m(t,n))),y[5]?p?p.p(y,k):(p=Sc(y),p.c(),p.m(t,null)):p&&(p.d(1),p=null),(!h||k[0]&256)&&Y(t,"meta-text-center",y[8]==="center"),(!h||k[0]&256)&&Y(t,"meta-text",y[8]==="default");let A=s;s=b(y),s===A?~s&&m[s].p(y,k):(o&&(zt(),ie(m[A],1,1,()=>{m[A]=null}),Wt()),~s?(o=m[s],o?o.p(y,k):(o=m[s]=g[s](y),o.c()),Q(o,1),o.m(l.parentNode,l)):o=null),y[5]?w&&(zt(),ie(w,1,1,()=>{w=null}),Wt()):w?(w.p(y,k),k[0]&32&&Q(w,1)):(w=Dc(y),w.c(),Q(w,1),w.m(a.parentNode,a))},i(y){h||(Q(o),Q(w),h=!0)},o(y){ie(o),ie(w),h=!1},d(y){y&&(N(e),N(t),N(r),N(l),N(a)),c&&c.d(y),d&&d.d(),p&&p.d(),~s&&m[s].d(y),w&&w.d(y)}}}function vc(i){let e,t=`translateX(${(i[17]||0)*100-100}%)`;return{c(){e=X("div"),S(e,"class","eta-bar svelte-au1olv"),te(e,"transform",t)},m(n,r){B(n,e,r)},p(n,r){r[0]&131072&&t!==(t=`translateX(${(n[17]||0)*100-100}%)`)&&te(e,"transform",t)},d(n){n&&N(e)}}}function Yw(i){let e;return{c(){e=ce("processing |")},m(t,n){B(t,e,n)},p:Ee,d(t){t&&N(e)}}}function Zw(i){let e,t=i[2]+1+"",n,r,s,o;return{c(){e=ce("queue: "),n=ce(t),r=ce("/"),s=ce(i[3]),o=ce(" |")},m(l,a){B(l,e,a),B(l,n,a),B(l,r,a),B(l,s,a),B(l,o,a)},p(l,a){a[0]&4&&t!==(t=l[2]+1+"")&&Ue(n,t),a[0]&8&&Ue(s,l[3])},d(l){l&&(N(e),N(n),N(r),N(s),N(o))}}}function Qw(i){let e,t=Us(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=xc(wc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ct()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);B(r,e,s)},p(r,s){if(s[0]&128){t=Us(r[7]);let o;for(o=0;o<t.length;o+=1){const l=wc(r,t,o);n[o]?n[o].p(l,s):(n[o]=xc(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(r){r&&N(e),Qf(n,r)}}}function kc(i){let e,t=i[40].unit+"",n,r,s=" ",o;function l(c,u){return c[40].length!=null?tv:ev}let a=l(i),h=a(i);return{c(){h.c(),e=Ae(),n=ce(t),r=ce(" | "),o=ce(s)},m(c,u){h.m(c,u),B(c,e,u),B(c,n,u),B(c,r,u),B(c,o,u)},p(c,u){a===(a=l(c))&&h?h.p(c,u):(h.d(1),h=a(c),h&&(h.c(),h.m(e.parentNode,e))),u[0]&128&&t!==(t=c[40].unit+"")&&Ue(n,t)},d(c){c&&(N(e),N(n),N(r),N(o)),h.d(c)}}}function ev(i){let e=bn(i[40].index||0)+"",t;return{c(){t=ce(e)},m(n,r){B(n,t,r)},p(n,r){r[0]&128&&e!==(e=bn(n[40].index||0)+"")&&Ue(t,e)},d(n){n&&N(t)}}}function tv(i){let e=bn(i[40].index||0)+"",t,n,r=bn(i[40].length)+"",s;return{c(){t=ce(e),n=ce("/"),s=ce(r)},m(o,l){B(o,t,l),B(o,n,l),B(o,s,l)},p(o,l){l[0]&128&&e!==(e=bn(o[40].index||0)+"")&&Ue(t,e),l[0]&128&&r!==(r=bn(o[40].length)+"")&&Ue(s,r)},d(o){o&&(N(t),N(n),N(s))}}}function xc(i){let e,t=i[40].index!=null&&kc(i);return{c(){t&&t.c(),e=Ct()},m(n,r){t&&t.m(n,r),B(n,e,r)},p(n,r){n[40].index!=null?t?t.p(n,r):(t=kc(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&N(e),t&&t.d(n)}}}function Sc(i){let e,t=i[0]?`/${i[19]}`:"",n,r;return{c(){e=ce(i[20]),n=ce(t),r=ce("s")},m(s,o){B(s,e,o),B(s,n,o),B(s,r,o)},p(s,o){o[0]&1048576&&Ue(e,s[20]),o[0]&524289&&t!==(t=s[0]?`/${s[19]}`:"")&&Ue(n,t)},d(s){s&&(N(e),N(n),N(r))}}}function iv(i){let e,t;return e=new Rw({props:{margin:i[8]==="default"}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&256&&(s.margin=n[8]==="default"),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function nv(i){let e,t,n,r,s,o=`${i[15]*100}%`,l=i[7]!=null&&Ac(i);return{c(){e=X("div"),t=X("div"),l&&l.c(),n=Ae(),r=X("div"),s=X("div"),S(t,"class","progress-level-inner svelte-au1olv"),S(s,"class","progress-bar svelte-au1olv"),te(s,"width",o),S(r,"class","progress-bar-wrap svelte-au1olv"),S(e,"class","progress-level svelte-au1olv")},m(a,h){B(a,e,h),z(e,t),l&&l.m(t,null),z(e,n),z(e,r),z(r,s),i[31](s)},p(a,h){a[7]!=null?l?l.p(a,h):(l=Ac(a),l.c(),l.m(t,null)):l&&(l.d(1),l=null),h[0]&32768&&o!==(o=`${a[15]*100}%`)&&te(s,"width",o)},i:Ee,o:Ee,d(a){a&&N(e),l&&l.d(),i[31](null)}}}function Ac(i){let e,t=Us(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Oc(yc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ct()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);B(r,e,s)},p(r,s){if(s[0]&16512){t=Us(r[7]);let o;for(o=0;o<t.length;o+=1){const l=yc(r,t,o);n[o]?n[o].p(l,s):(n[o]=Oc(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(r){r&&N(e),Qf(n,r)}}}function Ec(i){let e,t,n,r,s=i[42]!==0&&rv(),o=i[40].desc!=null&&Cc(i),l=i[40].desc!=null&&i[14]&&i[14][i[42]]!=null&&Tc(),a=i[14]!=null&&Mc(i);return{c(){s&&s.c(),e=Ae(),o&&o.c(),t=Ae(),l&&l.c(),n=Ae(),a&&a.c(),r=Ct()},m(h,c){s&&s.m(h,c),B(h,e,c),o&&o.m(h,c),B(h,t,c),l&&l.m(h,c),B(h,n,c),a&&a.m(h,c),B(h,r,c)},p(h,c){h[40].desc!=null?o?o.p(h,c):(o=Cc(h),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),h[40].desc!=null&&h[14]&&h[14][h[42]]!=null?l||(l=Tc(),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),h[14]!=null?a?a.p(h,c):(a=Mc(h),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(h){h&&(N(e),N(t),N(n),N(r)),s&&s.d(h),o&&o.d(h),l&&l.d(h),a&&a.d(h)}}}function rv(i){let e;return{c(){e=ce(" /")},m(t,n){B(t,e,n)},d(t){t&&N(e)}}}function Cc(i){let e=i[40].desc+"",t;return{c(){t=ce(e)},m(n,r){B(n,t,r)},p(n,r){r[0]&128&&e!==(e=n[40].desc+"")&&Ue(t,e)},d(n){n&&N(t)}}}function Tc(i){let e;return{c(){e=ce("-")},m(t,n){B(t,e,n)},d(t){t&&N(e)}}}function Mc(i){let e=(100*(i[14][i[42]]||0)).toFixed(1)+"",t,n;return{c(){t=ce(e),n=ce("%")},m(r,s){B(r,t,s),B(r,n,s)},p(r,s){s[0]&16384&&e!==(e=(100*(r[14][r[42]]||0)).toFixed(1)+"")&&Ue(t,e)},d(r){r&&(N(t),N(n))}}}function Oc(i){let e,t=(i[40].desc!=null||i[14]&&i[14][i[42]]!=null)&&Ec(i);return{c(){t&&t.c(),e=Ct()},m(n,r){t&&t.m(n,r),B(n,e,r)},p(n,r){n[40].desc!=null||n[14]&&n[14][n[42]]!=null?t?t.p(n,r):(t=Ec(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&N(e),t&&t.d(n)}}}function Dc(i){let e,t,n,r;const s=i[30]["additional-loading-text"],o=Fr(s,i,i[29],_c);return{c(){e=X("p"),t=ce(i[9]),n=Ae(),o&&o.c(),S(e,"class","loading svelte-au1olv")},m(l,a){B(l,e,a),z(e,t),B(l,n,a),o&&o.m(l,a),r=!0},p(l,a){(!r||a[0]&512)&&Ue(t,l[9]),o&&o.p&&(!r||a[0]&536870912)&&Ur(o,s,l,l[29],r?Vr(s,l[29],a,Kw):jr(l[29]),_c)},i(l){r||(Q(o,l),r=!0)},o(l){ie(o,l),r=!1},d(l){l&&(N(e),N(n)),o&&o.d(l)}}}function sv(i){let e,t,n,r,s;const o=[Jw,Xw],l=[];function a(h,c){return h[4]==="pending"?0:h[4]==="error"?1:-1}return~(t=a(i))&&(n=l[t]=o[t](i)),{c(){e=X("div"),n&&n.c(),S(e,"class",r="wrap "+i[8]+" "+i[6]+" svelte-au1olv"),Y(e,"hide",!i[4]||i[4]==="complete"||i[6]==="hidden"),Y(e,"translucent",i[8]==="center"&&(i[4]==="pending"||i[4]==="error")||i[11]||i[6]==="minimal"),Y(e,"generating",i[4]==="generating"&&i[6]==="full"),Y(e,"border",i[12]),te(e,"position",i[10]?"absolute":"static"),te(e,"padding",i[10]?"0":"var(--size-8) 0")},m(h,c){B(h,e,c),~t&&l[t].m(e,null),i[33](e),s=!0},p(h,c){let u=t;t=a(h),t===u?~t&&l[t].p(h,c):(n&&(zt(),ie(l[u],1,1,()=>{l[u]=null}),Wt()),~t?(n=l[t],n?n.p(h,c):(n=l[t]=o[t](h),n.c()),Q(n,1),n.m(e,null)):n=null),(!s||c[0]&320&&r!==(r="wrap "+h[8]+" "+h[6]+" svelte-au1olv"))&&S(e,"class",r),(!s||c[0]&336)&&Y(e,"hide",!h[4]||h[4]==="complete"||h[6]==="hidden"),(!s||c[0]&2384)&&Y(e,"translucent",h[8]==="center"&&(h[4]==="pending"||h[4]==="error")||h[11]||h[6]==="minimal"),(!s||c[0]&336)&&Y(e,"generating",h[4]==="generating"&&h[6]==="full"),(!s||c[0]&4416)&&Y(e,"border",h[12]),c[0]&1024&&te(e,"position",h[10]?"absolute":"static"),c[0]&1024&&te(e,"padding",h[10]?"0":"var(--size-8) 0")},i(h){s||(Q(n),s=!0)},o(h){ie(n),s=!1},d(h){h&&N(e),~t&&l[t].d(),i[33](null)}}}let ns=[],$o=!1;async function ov(i,e=!0){if(!(window.__gradio_mode__==="website"||window.__gradio_mode__!=="app"&&e!==!0)){if(ns.push(i),!$o)$o=!0;else return;await L_(),requestAnimationFrame(()=>{let t=[0,0];for(let n=0;n<ns.length;n++){const s=ns[n].getBoundingClientRect();(n===0||s.top+window.scrollY<=t[0])&&(t[0]=s.top+window.scrollY,t[1]=n)}window.scrollTo({top:t[0]-20,behavior:"smooth"}),$o=!1,ns=[]})}}function lv(i,e,t){let n,{$$slots:r={},$$scope:s}=e;const o=uo();let{i18n:l}=e,{eta:a=null}=e,{queue_position:h}=e,{queue_size:c}=e,{status:u}=e,{scroll_to_output:f=!1}=e,{timer:d=!0}=e,{show_progress:p="full"}=e,{message:g=null}=e,{progress:m=null}=e,{variant:b="default"}=e,{loading_text:w="Loading..."}=e,{absolute:y=!0}=e,{translucent:k=!1}=e,{border:A=!1}=e,{autoscroll:x}=e,R,D=!1,F=0,L=0,T=null,W=null,ne=0,_e=null,ee,P=null,re=!0;const U=()=>{t(0,a=t(27,T=t(19,j=null))),t(25,F=performance.now()),t(26,L=0),D=!0,M()};function M(){requestAnimationFrame(()=>{t(26,L=(performance.now()-F)/1e3),D&&M()})}function Z(){t(26,L=0),t(0,a=t(27,T=t(19,j=null))),D&&(D=!1)}ja(()=>{D&&Z()});let j=null;function Ce($){_t[$?"unshift":"push"](()=>{P=$,t(16,P),t(7,m),t(14,_e),t(15,ee)})}const ae=()=>{o("clear_status")};function ot($){_t[$?"unshift":"push"](()=>{R=$,t(13,R)})}return i.$$set=$=>{"i18n"in $&&t(1,l=$.i18n),"eta"in $&&t(0,a=$.eta),"queue_position"in $&&t(2,h=$.queue_position),"queue_size"in $&&t(3,c=$.queue_size),"status"in $&&t(4,u=$.status),"scroll_to_output"in $&&t(22,f=$.scroll_to_output),"timer"in $&&t(5,d=$.timer),"show_progress"in $&&t(6,p=$.show_progress),"message"in $&&t(23,g=$.message),"progress"in $&&t(7,m=$.progress),"variant"in $&&t(8,b=$.variant),"loading_text"in $&&t(9,w=$.loading_text),"absolute"in $&&t(10,y=$.absolute),"translucent"in $&&t(11,k=$.translucent),"border"in $&&t(12,A=$.border),"autoscroll"in $&&t(24,x=$.autoscroll),"$$scope"in $&&t(29,s=$.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&436207617&&(a===null&&t(0,a=T),a!=null&&T!==a&&(t(28,W=(performance.now()-F)/1e3+a),t(19,j=W.toFixed(1)),t(27,T=a))),i.$$.dirty[0]&335544320&&t(17,ne=W===null||W<=0||!L?null:Math.min(L/W,1)),i.$$.dirty[0]&128&&m!=null&&t(18,re=!1),i.$$.dirty[0]&114816&&(m!=null?t(14,_e=m.map($=>{if($.index!=null&&$.length!=null)return $.index/$.length;if($.progress!=null)return $.progress})):t(14,_e=null),_e?(t(15,ee=_e[_e.length-1]),P&&(ee===0?t(16,P.style.transition="0",P):t(16,P.style.transition="150ms",P))):t(15,ee=void 0)),i.$$.dirty[0]&16&&(u==="pending"?U():Z()),i.$$.dirty[0]&20979728&&R&&f&&(u==="pending"||u==="complete")&&ov(R,x),i.$$.dirty[0]&8388624,i.$$.dirty[0]&67108864&&t(20,n=L.toFixed(1))},[a,l,h,c,u,d,p,m,b,w,y,k,A,R,_e,ee,P,ne,re,j,n,o,f,g,x,F,L,T,W,s,r,Ce,ae,ot]}class qm extends $t{constructor(e){super(),qt(this,e,lv,sv,yt,{i18n:1,eta:0,queue_position:2,queue_size:3,status:4,scroll_to_output:22,timer:5,show_progress:6,message:23,progress:7,variant:8,loading_text:9,absolute:10,translucent:11,border:12,autoscroll:24},null,[-1,-1])}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),E()}get eta(){return this.$$.ctx[0]}set eta(e){this.$$set({eta:e}),E()}get queue_position(){return this.$$.ctx[2]}set queue_position(e){this.$$set({queue_position:e}),E()}get queue_size(){return this.$$.ctx[3]}set queue_size(e){this.$$set({queue_size:e}),E()}get status(){return this.$$.ctx[4]}set status(e){this.$$set({status:e}),E()}get scroll_to_output(){return this.$$.ctx[22]}set scroll_to_output(e){this.$$set({scroll_to_output:e}),E()}get timer(){return this.$$.ctx[5]}set timer(e){this.$$set({timer:e}),E()}get show_progress(){return this.$$.ctx[6]}set show_progress(e){this.$$set({show_progress:e}),E()}get message(){return this.$$.ctx[23]}set message(e){this.$$set({message:e}),E()}get progress(){return this.$$.ctx[7]}set progress(e){this.$$set({progress:e}),E()}get variant(){return this.$$.ctx[8]}set variant(e){this.$$set({variant:e}),E()}get loading_text(){return this.$$.ctx[9]}set loading_text(e){this.$$set({loading_text:e}),E()}get absolute(){return this.$$.ctx[10]}set absolute(e){this.$$set({absolute:e}),E()}get translucent(){return this.$$.ctx[11]}set translucent(e){this.$$set({translucent:e}),E()}get border(){return this.$$.ctx[12]}set border(e){this.$$set({border:e}),E()}get autoscroll(){return this.$$.ctx[24]}set autoscroll(e){this.$$set({autoscroll:e}),E()}}/*! @license DOMPurify 3.0.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.3/LICENSE */const{entries:$m,setPrototypeOf:Pc,isFrozen:av,getPrototypeOf:hv,getOwnPropertyDescriptor:cv}=Object;let{freeze:ft,seal:Gt,create:uv}=Object,{apply:zl,construct:Wl}=typeof Reflect<"u"&&Reflect;zl||(zl=function(e,t,n){return e.apply(t,n)});ft||(ft=function(e){return e});Gt||(Gt=function(e){return e});Wl||(Wl=function(e,t){return new e(...t)});const fv=Bt(Array.prototype.forEach),Lc=Bt(Array.prototype.pop),Zn=Bt(Array.prototype.push),Ms=Bt(String.prototype.toLowerCase),Ko=Bt(String.prototype.toString),dv=Bt(String.prototype.match),Vt=Bt(String.prototype.replace),pv=Bt(String.prototype.indexOf),mv=Bt(String.prototype.trim),kt=Bt(RegExp.prototype.test),Qn=gv(TypeError);function Bt(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zl(i,e,n)}}function gv(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Wl(i,t)}}function oe(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:Ms,Pc&&Pc(i,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const o=t(s);o!==s&&(av(e)||(e[r]=o),s=o)}i[s]=!0}return i}function dn(i){const e=uv(null);for(const[t,n]of $m(i))e[t]=n;return e}function rs(i,e){for(;i!==null;){const n=cv(i,e);if(n){if(n.get)return Bt(n.get);if(typeof n.value=="function")return Bt(n.value)}i=hv(i)}function t(n){return console.warn("fallback value for",n),null}return t}const Rc=ft(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xo=ft(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jo=ft(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bv=ft(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yo=ft(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_v=ft(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ic=ft(["#text"]),Nc=ft(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Zo=ft(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bc=ft(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ss=ft(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yv=Gt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wv=Gt(/<%[\w\W]*|[\w\W]*%>/gm),vv=Gt(/\${[\w\W]*}/gm),kv=Gt(/^data-[\-\w.\u00B7-\uFFFF]/),xv=Gt(/^aria-[\-\w]+$/),Km=Gt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Sv=Gt(/^(?:\w+script|data):/i),Av=Gt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xm=Gt(/^html$/i);var Hc=Object.freeze({__proto__:null,MUSTACHE_EXPR:yv,ERB_EXPR:wv,TMPLIT_EXPR:vv,DATA_ATTR:kv,ARIA_ATTR:xv,IS_ALLOWED_URI:Km,IS_SCRIPT_OR_DATA:Sv,ATTR_WHITESPACE:Av,DOCTYPE_NAME:Xm});const Ev=()=>typeof window>"u"?null:window,Cv=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function Jm(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ev();const e=K=>Jm(K);if(e.version="3.0.3",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;const t=i.document,n=t.currentScript;let{document:r}=i;const{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:a,NodeFilter:h,NamedNodeMap:c=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:d}=i,p=a.prototype,g=rs(p,"cloneNode"),m=rs(p,"nextSibling"),b=rs(p,"childNodes"),w=rs(p,"parentNode");if(typeof o=="function"){const K=r.createElement("template");K.content&&K.content.ownerDocument&&(r=K.content.ownerDocument)}let y,k="";const{implementation:A,createNodeIterator:x,createDocumentFragment:R,getElementsByTagName:D}=r,{importNode:F}=t;let L={};e.isSupported=typeof $m=="function"&&typeof w=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:T,ERB_EXPR:W,TMPLIT_EXPR:ne,DATA_ATTR:_e,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:P,ATTR_WHITESPACE:re}=Hc;let{IS_ALLOWED_URI:U}=Hc,M=null;const Z=oe({},[...Rc,...Xo,...Jo,...Yo,...Ic]);let j=null;const Ce=oe({},[...Nc,...Zo,...Bc,...ss]);let ae=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ot=null,$=null,Bi=!0,di=!0,yi=!1,wi=!0,mt=!1,Tt=!1,de=!1,Be=!1,lt=!1,Ft=!1,ye=!1,vt=!0,gt=!1;const I="user-content-";let me=!0,se=!1,ke={},He=null;const Kn=oe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xn=null;const an=oe({},["audio","video","img","source","image","track"]);let Mt=null;const je=oe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),at="http://www.w3.org/1998/Math/MathML",Yr="http://www.w3.org/2000/svg",pi="http://www.w3.org/1999/xhtml";let hn=pi,Lo=!1,Ro=null;const Zb=oe({},[at,Yr,pi],Ko);let Hi;const Qb=["application/xhtml+xml","text/html"],e_="text/html";let Ge,cn=null;const t_=r.createElement("form"),Dh=function(v){return v instanceof RegExp||v instanceof Function},Io=function(v){if(!(cn&&cn===v)){if((!v||typeof v!="object")&&(v={}),v=dn(v),Hi=Qb.indexOf(v.PARSER_MEDIA_TYPE)===-1?Hi=e_:Hi=v.PARSER_MEDIA_TYPE,Ge=Hi==="application/xhtml+xml"?Ko:Ms,M="ALLOWED_TAGS"in v?oe({},v.ALLOWED_TAGS,Ge):Z,j="ALLOWED_ATTR"in v?oe({},v.ALLOWED_ATTR,Ge):Ce,Ro="ALLOWED_NAMESPACES"in v?oe({},v.ALLOWED_NAMESPACES,Ko):Zb,Mt="ADD_URI_SAFE_ATTR"in v?oe(dn(je),v.ADD_URI_SAFE_ATTR,Ge):je,Xn="ADD_DATA_URI_TAGS"in v?oe(dn(an),v.ADD_DATA_URI_TAGS,Ge):an,He="FORBID_CONTENTS"in v?oe({},v.FORBID_CONTENTS,Ge):Kn,ot="FORBID_TAGS"in v?oe({},v.FORBID_TAGS,Ge):{},$="FORBID_ATTR"in v?oe({},v.FORBID_ATTR,Ge):{},ke="USE_PROFILES"in v?v.USE_PROFILES:!1,Bi=v.ALLOW_ARIA_ATTR!==!1,di=v.ALLOW_DATA_ATTR!==!1,yi=v.ALLOW_UNKNOWN_PROTOCOLS||!1,wi=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,mt=v.SAFE_FOR_TEMPLATES||!1,Tt=v.WHOLE_DOCUMENT||!1,lt=v.RETURN_DOM||!1,Ft=v.RETURN_DOM_FRAGMENT||!1,ye=v.RETURN_TRUSTED_TYPE||!1,Be=v.FORCE_BODY||!1,vt=v.SANITIZE_DOM!==!1,gt=v.SANITIZE_NAMED_PROPS||!1,me=v.KEEP_CONTENT!==!1,se=v.IN_PLACE||!1,U=v.ALLOWED_URI_REGEXP||Km,hn=v.NAMESPACE||pi,ae=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&Dh(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&Dh(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),mt&&(di=!1),Ft&&(lt=!0),ke&&(M=oe({},[...Ic]),j=[],ke.html===!0&&(oe(M,Rc),oe(j,Nc)),ke.svg===!0&&(oe(M,Xo),oe(j,Zo),oe(j,ss)),ke.svgFilters===!0&&(oe(M,Jo),oe(j,Zo),oe(j,ss)),ke.mathMl===!0&&(oe(M,Yo),oe(j,Bc),oe(j,ss))),v.ADD_TAGS&&(M===Z&&(M=dn(M)),oe(M,v.ADD_TAGS,Ge)),v.ADD_ATTR&&(j===Ce&&(j=dn(j)),oe(j,v.ADD_ATTR,Ge)),v.ADD_URI_SAFE_ATTR&&oe(Mt,v.ADD_URI_SAFE_ATTR,Ge),v.FORBID_CONTENTS&&(He===Kn&&(He=dn(He)),oe(He,v.FORBID_CONTENTS,Ge)),me&&(M["#text"]=!0),Tt&&oe(M,["html","head","body"]),M.table&&(oe(M,["tbody"]),delete ot.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw Qn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Qn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=v.TRUSTED_TYPES_POLICY,k=y.createHTML("")}else y===void 0&&(y=Cv(d,n)),y!==null&&typeof k=="string"&&(k=y.createHTML(""));ft&&ft(v),cn=v}},Ph=oe({},["mi","mo","mn","ms","mtext"]),Lh=oe({},["foreignobject","desc","title","annotation-xml"]),i_=oe({},["title","style","font","a","script"]),Zr=oe({},Xo);oe(Zr,Jo),oe(Zr,bv);const No=oe({},Yo);oe(No,_v);const n_=function(v){let O=w(v);(!O||!O.tagName)&&(O={namespaceURI:hn,tagName:"template"});const V=Ms(v.tagName),xe=Ms(O.tagName);return Ro[v.namespaceURI]?v.namespaceURI===Yr?O.namespaceURI===pi?V==="svg":O.namespaceURI===at?V==="svg"&&(xe==="annotation-xml"||Ph[xe]):!!Zr[V]:v.namespaceURI===at?O.namespaceURI===pi?V==="math":O.namespaceURI===Yr?V==="math"&&Lh[xe]:!!No[V]:v.namespaceURI===pi?O.namespaceURI===Yr&&!Lh[xe]||O.namespaceURI===at&&!Ph[xe]?!1:!No[V]&&(i_[V]||!Zr[V]):!!(Hi==="application/xhtml+xml"&&Ro[v.namespaceURI]):!1},Fi=function(v){Zn(e.removed,{element:v});try{v.parentNode.removeChild(v)}catch{v.remove()}},Bo=function(v,O){try{Zn(e.removed,{attribute:O.getAttributeNode(v),from:O})}catch{Zn(e.removed,{attribute:null,from:O})}if(O.removeAttribute(v),v==="is"&&!j[v])if(lt||Ft)try{Fi(O)}catch{}else try{O.setAttribute(v,"")}catch{}},Rh=function(v){let O,V;if(Be)v="<remove></remove>"+v;else{const Ot=dv(v,/^[\r\n\t ]+/);V=Ot&&Ot[0]}Hi==="application/xhtml+xml"&&hn===pi&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const xe=y?y.createHTML(v):v;if(hn===pi)try{O=new f().parseFromString(xe,Hi)}catch{}if(!O||!O.documentElement){O=A.createDocument(hn,"template",null);try{O.documentElement.innerHTML=Lo?k:xe}catch{}}const qe=O.body||O.documentElement;return v&&V&&qe.insertBefore(r.createTextNode(V),qe.childNodes[0]||null),hn===pi?D.call(O,Tt?"html":"body")[0]:Tt?O.documentElement:qe},Ih=function(v){return x.call(v.ownerDocument||v,v,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT,null,!1)},r_=function(v){return v instanceof u&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof c)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},Qr=function(v){return typeof l=="object"?v instanceof l:v&&typeof v=="object"&&typeof v.nodeType=="number"&&typeof v.nodeName=="string"},mi=function(v,O,V){L[v]&&fv(L[v],xe=>{xe.call(e,O,V,cn)})},Nh=function(v){let O;if(mi("beforeSanitizeElements",v,null),r_(v))return Fi(v),!0;const V=Ge(v.nodeName);if(mi("uponSanitizeElement",v,{tagName:V,allowedTags:M}),v.hasChildNodes()&&!Qr(v.firstElementChild)&&(!Qr(v.content)||!Qr(v.content.firstElementChild))&&kt(/<[/\w]/g,v.innerHTML)&&kt(/<[/\w]/g,v.textContent))return Fi(v),!0;if(!M[V]||ot[V]){if(!ot[V]&&Hh(V)&&(ae.tagNameCheck instanceof RegExp&&kt(ae.tagNameCheck,V)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(V)))return!1;if(me&&!He[V]){const xe=w(v)||v.parentNode,qe=b(v)||v.childNodes;if(qe&&xe){const Ot=qe.length;for(let Le=Ot-1;Le>=0;--Le)xe.insertBefore(g(qe[Le],!0),m(v))}}return Fi(v),!0}return v instanceof a&&!n_(v)||(V==="noscript"||V==="noembed")&&kt(/<\/no(script|embed)/i,v.innerHTML)?(Fi(v),!0):(mt&&v.nodeType===3&&(O=v.textContent,O=Vt(O,T," "),O=Vt(O,W," "),O=Vt(O,ne," "),v.textContent!==O&&(Zn(e.removed,{element:v.cloneNode()}),v.textContent=O)),mi("afterSanitizeElements",v,null),!1)},Bh=function(v,O,V){if(vt&&(O==="id"||O==="name")&&(V in r||V in t_))return!1;if(!(di&&!$[O]&&kt(_e,O))){if(!(Bi&&kt(ee,O))){if(!j[O]||$[O]){if(!(Hh(v)&&(ae.tagNameCheck instanceof RegExp&&kt(ae.tagNameCheck,v)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(v))&&(ae.attributeNameCheck instanceof RegExp&&kt(ae.attributeNameCheck,O)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(O))||O==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&kt(ae.tagNameCheck,V)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(V))))return!1}else if(!Mt[O]){if(!kt(U,Vt(V,re,""))){if(!((O==="src"||O==="xlink:href"||O==="href")&&v!=="script"&&pv(V,"data:")===0&&Xn[v])){if(!(yi&&!kt(P,Vt(V,re,"")))){if(V)return!1}}}}}}return!0},Hh=function(v){return v.indexOf("-")>0},Fh=function(v){let O,V,xe,qe;mi("beforeSanitizeAttributes",v,null);const{attributes:Ot}=v;if(!Ot)return;const Le={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};for(qe=Ot.length;qe--;){O=Ot[qe];const{name:Xt,namespaceURI:Ho}=O;if(V=Xt==="value"?O.value:mv(O.value),xe=Ge(Xt),Le.attrName=xe,Le.attrValue=V,Le.keepAttr=!0,Le.forceKeepAttr=void 0,mi("uponSanitizeAttribute",v,Le),V=Le.attrValue,Le.forceKeepAttr||(Bo(Xt,v),!Le.keepAttr))continue;if(!wi&&kt(/\/>/i,V)){Bo(Xt,v);continue}mt&&(V=Vt(V,T," "),V=Vt(V,W," "),V=Vt(V,ne," "));const Vh=Ge(v.nodeName);if(Bh(Vh,xe,V)){if(gt&&(xe==="id"||xe==="name")&&(Bo(Xt,v),V=I+V),y&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!Ho)switch(d.getAttributeType(Vh,xe)){case"TrustedHTML":{V=y.createHTML(V);break}case"TrustedScriptURL":{V=y.createScriptURL(V);break}}try{Ho?v.setAttributeNS(Ho,Xt,V):v.setAttribute(Xt,V),Lc(e.removed)}catch{}}}mi("afterSanitizeAttributes",v,null)},s_=function K(v){let O;const V=Ih(v);for(mi("beforeSanitizeShadowDOM",v,null);O=V.nextNode();)mi("uponSanitizeShadowNode",O,null),!Nh(O)&&(O.content instanceof s&&K(O.content),Fh(O));mi("afterSanitizeShadowDOM",v,null)};return e.sanitize=function(K){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O,V,xe,qe;if(Lo=!K,Lo&&(K="<!-->"),typeof K!="string"&&!Qr(K))if(typeof K.toString=="function"){if(K=K.toString(),typeof K!="string")throw Qn("dirty is not a string, aborting")}else throw Qn("toString is not a function");if(!e.isSupported)return K;if(de||Io(v),e.removed=[],typeof K=="string"&&(se=!1),se){if(K.nodeName){const Xt=Ge(K.nodeName);if(!M[Xt]||ot[Xt])throw Qn("root node is forbidden and cannot be sanitized in-place")}}else if(K instanceof l)O=Rh("<!---->"),V=O.ownerDocument.importNode(K,!0),V.nodeType===1&&V.nodeName==="BODY"||V.nodeName==="HTML"?O=V:O.appendChild(V);else{if(!lt&&!mt&&!Tt&&K.indexOf("<")===-1)return y&&ye?y.createHTML(K):K;if(O=Rh(K),!O)return lt?null:ye?k:""}O&&Be&&Fi(O.firstChild);const Ot=Ih(se?K:O);for(;xe=Ot.nextNode();)Nh(xe)||(xe.content instanceof s&&s_(xe.content),Fh(xe));if(se)return K;if(lt){if(Ft)for(qe=R.call(O.ownerDocument);O.firstChild;)qe.appendChild(O.firstChild);else qe=O;return(j.shadowroot||j.shadowrootmod)&&(qe=F.call(t,qe,!0)),qe}let Le=Tt?O.outerHTML:O.innerHTML;return Tt&&M["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&kt(Xm,O.ownerDocument.doctype.name)&&(Le="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+Le),mt&&(Le=Vt(Le,T," "),Le=Vt(Le,W," "),Le=Vt(Le,ne," ")),y&&ye?y.createHTML(Le):Le},e.setConfig=function(K){Io(K),de=!0},e.clearConfig=function(){cn=null,de=!1},e.isValidAttribute=function(K,v,O){cn||Io({});const V=Ge(K),xe=Ge(v);return Bh(V,xe,O)},e.addHook=function(K,v){typeof v=="function"&&(L[K]=L[K]||[],Zn(L[K],v))},e.removeHook=function(K){if(L[K])return Lc(L[K])},e.removeHooks=function(K){L[K]&&(L[K]=[])},e.removeAllHooks=function(){L={}},e}var BM=Jm();const Ym="WORKER_PROXY_CONTEXT_KEY";function Tv(i){O_(Ym,i)}function HM(){return D_(Ym)}var Mv=()=>{const i=document.createElement("link");i.href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap",i.rel="stylesheet";const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&display=swap",e.rel="stylesheet",document.head.appendChild(i),document.head.appendChild(e)},Ov=()=>{const i=document.createElement("div");return i.style.backgroundImage="linear-gradient(to top, #f9fafb, white)",i.style.border="1px solid #e5e7eb",i.style.borderRadius="0.75rem",i.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.1)",i.style.color="#374151",i.style.display="flex",i.style.flexDirection="row",i.style.alignItems="center",i.style.height="40px",i.style.justifyContent="space-between",i.style.overflow="hidden",i.style.position="fixed",i.style.right=".75rem",i.style.top=".75rem",i.style.width="auto",i.style.zIndex="20",i.style.paddingLeft="1rem",i.setAttribute("id","huggingface-space-header"),window.matchMedia("(max-width: 768px)").addEventListener("change",e=>{e.matches?i.style.display="none":i.style.display="flex"}),i},Dv=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),i.setAttribute("aria-hidden","true"),i.setAttribute("focusable","false"),i.setAttribute("role","img"),i.setAttribute("width","1em"),i.setAttribute("height","1em"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("viewBox","0 0 12 12"),i.setAttribute("fill","currentColor");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M0.375001 10.3828L0.375 1.61719C0.375 1.104 0.816001 0.687501 1.35938 0.687501L10.6406 0.6875C10.9017 0.6875 11.1521 0.785449 11.3367 0.959797C11.5213 1.13415 11.625 1.37062 11.625 1.61719V10.3828C11.625 10.6294 11.5213 10.8659 11.3367 11.0402C11.1521 11.2145 10.9017 11.3125 10.6406 11.3125H1.35938C0.816001 11.3125 0.375001 10.896 0.375001 10.3828ZM1.35938 10.5156H10.6406C10.7183 10.5156 10.7813 10.4561 10.7813 10.3828V4.40625H1.21875V10.3828C1.21875 10.418 1.23356 10.4518 1.25994 10.4767C1.28631 10.5017 1.32208 10.5156 1.35938 10.5156ZM4.61052 6.38251L5.9999 7.69472L7.38927 6.38251C7.44083 6.33007 7.50645 6.29173 7.57913 6.27153C7.6518 6.25134 7.72898 6.25003 7.8024 6.26776C7.87583 6.28549 7.9428 6.3216 7.99628 6.37227C8.04983 6.42295 8.08785 6.48631 8.10645 6.5557C8.12528 6.62497 8.12393 6.69773 8.10263 6.76635C8.0814 6.83497 8.0409 6.8969 7.98555 6.94564L6.29802 8.53936C6.21892 8.61399 6.11169 8.65592 5.9999 8.65592C5.8881 8.65592 5.78087 8.61399 5.70177 8.53936L4.01427 6.94564C3.95874 6.89694 3.91814 6.835 3.89676 6.76633C3.87538 6.69766 3.874 6.62483 3.89277 6.55549C3.91154 6.48615 3.94977 6.42287 4.00343 6.37233C4.05708 6.32179 4.12418 6.28585 4.19765 6.2683C4.27098 6.25054 4.34803 6.25178 4.42068 6.27188C4.49334 6.29198 4.55891 6.3302 4.61052 6.38251Z"),i.appendChild(e),i},Pv=(i,e)=>{const t=document.createElement("div");return t.setAttribute("id","space-header__collapse"),t.style.display="flex",t.style.flexDirection="row",t.style.alignItems="center",t.style.justifyContent="center",t.style.fontSize="16px",t.style.paddingLeft="10px",t.style.paddingRight="10px",t.style.height="40px",t.style.cursor="pointer",t.style.color="#40546e",t.style.transitionDuration="0.1s",t.style.transitionProperty="all",t.style.transitionTimingFunction="ease-in-out",t.appendChild(Dv()),t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),e()}),t.addEventListener("mouseenter",()=>{t.style.color="#213551"}),t.addEventListener("mouseleave",()=>{t.style.color="#40546e"}),t},Lv=i=>{const e=document.createElement("p");return e.style.margin="0",e.style.padding="0",e.style.color="#9ca3af",e.style.fontSize="14px",e.style.fontFamily="Source Sans Pro, sans-serif",e.style.padding="0px 6px",e.style.borderLeft="1px solid #e5e7eb",e.style.marginLeft="4px",e.textContent=(i??0).toString(),e},Rv=()=>{const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"),i.setAttribute("aria-hidden","true"),i.setAttribute("focusable","false"),i.setAttribute("role","img"),i.setAttribute("width","1em"),i.setAttribute("height","1em"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("viewBox","0 0 32 32"),i.setAttribute("fill","#6b7280");const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d","M22.45,6a5.47,5.47,0,0,1,3.91,1.64,5.7,5.7,0,0,1,0,8L16,26.13,5.64,15.64a5.7,5.7,0,0,1,0-8,5.48,5.48,0,0,1,7.82,0L16,10.24l2.53-2.58A5.44,5.44,0,0,1,22.45,6m0-2a7.47,7.47,0,0,0-5.34,2.24L16,7.36,14.89,6.24a7.49,7.49,0,0,0-10.68,0,7.72,7.72,0,0,0,0,10.82L16,29,27.79,17.06a7.72,7.72,0,0,0,0-10.82A7.49,7.49,0,0,0,22.45,4Z"),i.appendChild(e),i},Iv=i=>{const e=document.createElement("a");return e.setAttribute("href",`https://huggingface.co/spaces/${i.id}`),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.style.border="1px solid #e5e7eb",e.style.borderRadius="6px",e.style.display="flex",e.style.flexDirection="row",e.style.alignItems="center",e.style.margin="0 0 0 12px",e.style.fontSize="14px",e.style.paddingLeft="4px",e.style.textDecoration="none",e.appendChild(Rv()),e.appendChild(Lv(i.likes)),e},Nv=i=>{const e=document.createElement("img");return e.src=`https://huggingface.co/api/users/${i}/avatar`,e.style.width="0.875rem",e.style.height="0.875rem",e.style.borderRadius="50%",e.style.flex="none",e.style.marginRight="0.375rem",e},Bv=i=>{const[e,t]=i.split("/"),n=document.createElement("a");return n.setAttribute("href",`https://huggingface.co/spaces/${i}`),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n.style.color="#1f2937",n.style.textDecoration="none",n.style.fontWeight="600",n.style.fontSize="15px",n.style.lineHeight="24px",n.style.flex="none",n.style.fontFamily="IBM Plex Mono, sans-serif",n.addEventListener("mouseover",()=>{n.style.color="#2563eb"}),n.addEventListener("mouseout",()=>{n.style.color="#1f2937"}),n.textContent=t,n},Hv=()=>{const i=document.createElement("div");return i.style.marginLeft=".125rem",i.style.marginRight=".125rem",i.style.color="#d1d5db",i.textContent="/",i},Fv=i=>{const e=document.createElement("a");return e.setAttribute("href",`https://huggingface.co/${i}`),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.style.color="rgb(107, 114, 128)",e.style.textDecoration="none",e.style.fontWeight="400",e.style.fontSize="16px",e.style.lineHeight="24px",e.style.flex="none",e.style.fontFamily="Source Sans Pro, sans-serif",e.addEventListener("mouseover",()=>{e.style.color="#2563eb"}),e.addEventListener("mouseout",()=>{e.style.color="rgb(107, 114, 128)"}),e.textContent=i,e},Vv=i=>{const e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="row",e.style.alignItems="center",e.style.justifyContent="center",e.style.borderRight="1px solid #e5e7eb",e.style.paddingRight="12px",e.style.height="40px",e.appendChild(Nv(i.author)),e.appendChild(Fv(i.author)),e.appendChild(Hv()),e.appendChild(Bv(i.id)),e.appendChild(Iv(i)),e},Uv=i=>{const e=Ov(),t=()=>e.style.display="none";return e.appendChild(Vv(i)),e.appendChild(Pv(i,t)),e},jv=async i=>{try{return await(await fetch(`https://huggingface.co/api/spaces/${i}`)).json()}catch{return null}},zv=(i,e)=>{if(document.body===null)return console.error("document.body is null");document.body.appendChild(i)};async function Wv(i,e){var t,n;if(window===void 0)return console.error("Please run this script in a browser environment");if(Object.values((n=(t=window.location)==null?void 0:t.ancestorOrigins)!=null?n:{0:window.document.referrer}).some(l=>{var a;return((a=new URL(l))==null?void 0:a.origin)==="https://huggingface.co"}))return;Mv();let s;if(typeof i=="string"){if(s=await jv(i),s===null)return console.error("Space not found")}else s=i;const o=Uv(s);return zv(o),{element:o}}var Gv=(i,e)=>Wv(i);function Fc(i){let e,t;return e=new qm({props:{absolute:!i[4],status:i[15],timer:!1,queue_position:null,queue_size:null,translucent:!0,loading_text:i[16],i18n:i[22],autoscroll:i[0],$$slots:{error:[Jv],"additional-loading-text":[$v]},$$scope:{ctx:i}}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&16&&(s.absolute=!n[4]),r[0]&32768&&(s.status=n[15]),r[0]&65536&&(s.loading_text=n[16]),r[0]&4194304&&(s.i18n=n[22]),r[0]&1&&(s.autoscroll=n[0]),r[0]&4202752|r[1]&4194304&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function qv(i){let e;return{c(){e=X("p"),e.innerHTML='If your custom component never loads, consult the troubleshooting <a style="color: blue;" href="https://www.gradio.app/guides/frequently-asked-questions#the-development-server-didnt-work-for-me" class="svelte-y6l4b">guide</a>.'},m(t,n){B(t,e,n)},d(t){t&&N(e)}}}function $v(i){let e,t=i[23]==="dev"&&qv();return{c(){e=X("div"),t&&t.c(),S(e,"class","load-text"),S(e,"slot","additional-loading-text")},m(n,r){B(n,e,r),t&&t.m(e,null)},p:Ee,d(n){n&&N(e),t&&t.d()}}}function Kv(i){let e,t=i[22]("errors.contact_page_author")+"",n;return{c(){e=X("p"),n=ce(t),S(e,"class","svelte-y6l4b")},m(r,s){B(r,e,s),z(e,n)},p(r,s){s[0]&4194304&&t!==(t=r[22]("errors.contact_page_author")+"")&&Ue(n,t)},d(r){r&&N(e)}}}function Xv(i){let e,t,n,r,s,o;return{c(){e=X("p"),t=ce("Please "),n=X("a"),r=ce("contact the author of the space"),o=ce(" to let them know."),S(n,"href",s="https://huggingface.co/spaces/"+i[8]+"/discussions/new?title="+i[24].title(i[13]?.detail)+"&description="+i[24].description(i[13]?.detail,location.origin)),S(n,"class","svelte-y6l4b"),S(e,"class","svelte-y6l4b")},m(l,a){B(l,e,a),z(e,t),z(e,n),z(n,r),z(e,o)},p(l,a){a[0]&8448&&s!==(s="https://huggingface.co/spaces/"+l[8]+"/discussions/new?title="+l[24].title(l[13]?.detail)+"&description="+l[24].description(l[13]?.detail,location.origin))&&S(n,"href",s)},d(l){l&&N(e)}}}function Jv(i){let e,t,n,r=(i[13]?.message||"")+"",s,o;function l(c,u){return(c[13].status==="space_error"||c[13].status==="paused")&&c[13].discussions_enabled?Xv:Kv}let a=l(i),h=a(i);return{c(){e=X("div"),t=X("p"),n=X("strong"),s=ce(r),o=Ae(),h.c(),S(t,"class","svelte-y6l4b"),S(e,"class","error svelte-y6l4b"),S(e,"slot","error")},m(c,u){B(c,e,u),z(e,t),z(t,n),z(n,s),z(e,o),h.m(e,null)},p(c,u){u[0]&8192&&r!==(r=(c[13]?.message||"")+"")&&Ue(s,r),a===(a=l(c))&&h?h.p(c,u):(h.d(1),h=a(c),h&&(h.c(),h.m(e,null)))},d(c){c&&N(e),h.d()}}}function Yv(i){let e,t,n,r,s;const o=[{app:i[14]},i[12],{fill_height:!i[4]&&i[12].fill_height},{theme_mode:i[17]},{control_page_title:i[5]},{target:i[9]},{autoscroll:i[0]},{show_footer:!i[4]},{app_mode:i[3]},{version:i[1]}];function l(u){i[33](u)}function a(u){i[34](u)}function h(u){i[35](u)}let c={};for(let u=0;u<o.length;u+=1)c=Fa(c,o[u]);return i[10]!==void 0&&(c.ready=i[10]),i[11]!==void 0&&(c.render_complete=i[11]),i[21]!==void 0&&(c.add_new_message=i[21]),e=new i[19]({props:c}),_t.push(()=>gr(e,"ready",l)),_t.push(()=>gr(e,"render_complete",a)),_t.push(()=>gr(e,"add_new_message",h)),{c(){pt(e.$$.fragment)},m(u,f){nt(e,u,f),s=!0},p(u,f){const d=f[0]&152123?nd(o,[f[0]&16384&&{app:u[14]},f[0]&4096&&B_(u[12]),f[0]&4112&&{fill_height:!u[4]&&u[12].fill_height},f[0]&131072&&{theme_mode:u[17]},f[0]&32&&{control_page_title:u[5]},f[0]&512&&{target:u[9]},f[0]&1&&{autoscroll:u[0]},f[0]&16&&{show_footer:!u[4]},f[0]&8&&{app_mode:u[3]},f[0]&2&&{version:u[1]}]):{};!t&&f[0]&1024&&(t=!0,d.ready=u[10],mr(()=>t=!1)),!n&&f[0]&2048&&(n=!0,d.render_complete=u[11],mr(()=>n=!1)),!r&&f[0]&2097152&&(r=!0,d.add_new_message=u[21],mr(()=>r=!1)),e.$set(d)},i(u){s||(Q(e.$$.fragment,u),s=!0)},o(u){ie(e.$$.fragment,u),s=!1},d(u){rt(e,u)}}}function Zv(i){let e,t;return e=new i[20]({props:{auth_message:i[12].auth_message,root:i[12].root,space_id:i[8],app_mode:i[3]}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&4096&&(s.auth_message=n[12].auth_message),r[0]&4096&&(s.root=n[12].root),r[0]&256&&(s.space_id=n[8]),r[0]&8&&(s.app_mode=n[3]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function Qv(i){let e,t,n,r,s,o=(i[15]==="pending"||i[15]==="error")&&!(i[12]&&i[12]?.auth_required)&&Fc(i);const l=[Zv,Yv],a=[];function h(c,u){return c[12]?.auth_required&&c[20]?0:c[12]&&c[19]&&c[18]?1:-1}return~(t=h(i))&&(n=a[t]=l[t](i)),{c(){o&&o.c(),e=Ae(),n&&n.c(),r=Ct()},m(c,u){o&&o.m(c,u),B(c,e,u),~t&&a[t].m(c,u),B(c,r,u),s=!0},p(c,u){(c[15]==="pending"||c[15]==="error")&&!(c[12]&&c[12]?.auth_required)?o?(o.p(c,u),u[0]&36864&&Q(o,1)):(o=Fc(c),o.c(),Q(o,1),o.m(e.parentNode,e)):o&&(zt(),ie(o,1,1,()=>{o=null}),Wt());let f=t;t=h(c),t===f?~t&&a[t].p(c,u):(n&&(zt(),ie(a[f],1,1,()=>{a[f]=null}),Wt()),~t?(n=a[t],n?n.p(c,u):(n=a[t]=l[t](c),n.c()),Q(n,1),n.m(r.parentNode,r)):n=null)},i(c){s||(Q(o),Q(n),s=!0)},o(c){ie(o),ie(n),s=!1},d(c){c&&(N(e),N(r)),o&&o.d(c),~t&&a[t].d(c)}}}function e2(i){let e,t,n;function r(o){i[36](o)}let s={display:i[6]&&i[4],is_embed:i[4],info:!!i[8]&&i[7],version:i[1],initial_height:i[2],space:i[8],loaded:i[15]==="complete",fill_width:i[12]?.fill_width||!1,$$slots:{default:[Qv]},$$scope:{ctx:i}};return i[9]!==void 0&&(s.wrapper=i[9]),e=new R1({props:s}),_t.push(()=>gr(e,"wrapper",r)),{c(){pt(e.$$.fragment)},m(o,l){nt(e,o,l),n=!0},p(o,l){const a={};l[0]&80&&(a.display=o[6]&&o[4]),l[0]&16&&(a.is_embed=o[4]),l[0]&384&&(a.info=!!o[8]&&o[7]),l[0]&2&&(a.version=o[1]),l[0]&4&&(a.initial_height=o[2]),l[0]&256&&(a.space=o[8]),l[0]&32768&&(a.loaded=o[15]==="complete"),l[0]&4096&&(a.fill_width=o[12]?.fill_width||!1),l[0]&8388411|l[1]&4194304&&(a.$$scope={dirty:l,ctx:o}),!t&&l[0]&512&&(t=!0,a.wrapper=o[9],mr(()=>t=!1)),e.$set(a)},i(o){n||(Q(e.$$.fragment,o),n=!0)},o(o){ie(e.$$.fragment,o),n=!1},d(o){rt(e,o)}}}let t2=-1;function i2(){const i=Un({}),e=new Map,t=new IntersectionObserver(r=>{r.forEach(s=>{if(s.isIntersecting){let o=e.get(s.target);o!==void 0&&i.update(l=>({...l,[o]:!0}))}})});function n(r,s){e.set(s,r),t.observe(s)}return{register:n,subscribe:i.subscribe}}const Vc=i2();async function n2(i){if(i){const e=new DOMParser,t=Array.from(e.parseFromString(i,"text/html").head.children);if(t)for(let n of t){let r=document.createElement(n.tagName);if(Array.from(n.attributes).forEach(s=>{r.setAttribute(s.name,s.value)}),r.textContent=n.textContent,r.tagName=="META"&&r.getAttribute("property")){const o=Array.from(document.head.getElementsByTagName("meta")??[]).find(l=>l.getAttribute("property")==r.getAttribute("property")&&!l.isEqualNode(r));if(o){document.head.replaceChild(r,o);continue}}document.head.appendChild(r)}}}function r2(i,e,t){let n,r;Tn(i,Xa,I=>t(22,n=I)),Tn(i,Vc,I=>t(32,r=I)),Gm();const s=uo();let{autoscroll:o}=e,{version:l}=e,{initial_height:a}=e,{app_mode:h}=e,{is_embed:c}=e,{theme_mode:u="system"}=e,{control_page_title:f}=e,{container:d}=e,{info:p}=e,{eager:g}=e,m,{mount_css:b=Ja}=e,{Client:w}=e,{worker_proxy:y=void 0}=e;y&&(Tv(y),y.addEventListener("progress-update",I=>{t(16,ne=I.detail+"...")}));let{space:k}=e,{host:A}=e,{src:x}=e,R=t2++,D="pending",F,L=!1,T=!1,W,ne=n("common.loading")+"...",_e,ee,P=null;async function re(I){I&&(P=ac(I,l,P||void 0)),await b(W.root+"/theme.css?v="+W.theme_hash,document.head),W.stylesheets&&await Promise.all(W.stylesheets.map(me=>me.startsWith("http:")||me.startsWith("https:")?b(me,document.head):fetch(W.root+"/"+me).then(ke=>ke.text()).then(ke=>{ac(ke,l)})))}function U(I){const me=window.__gradio_mode__==="website";let se;if(me)se="light";else{const He=new URL(window.location.toString()).searchParams.get("__theme");se=u||He||"system"}return se==="dark"||se==="light"?Z(I,se):se=M(I),se}function M(I){const me=se();window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",se);function se(){let ke=window?.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light";return Z(I,ke),ke}return me}function Z(I,me){const se=c?I.parentElement:document.body,ke=c?I:I.parentElement;ke.style.background="var(--body-background-fill)",me==="dark"?se.classList.add("dark"):se.classList.remove("dark")}let j={message:"",load_status:"pending",status:"sleeping",detail:"SLEEPING"},Ce,ae=!1;function ot(I){t(13,j=I)}const $=window.__GRADIO_DEV__;Ar(async()=>{t(17,_e=U(F));const I=window.__GRADIO__SERVER_PORT__;if(ee=$==="dev"?`http://localhost:${typeof I=="number"?I:7860}`:A||k||x||location.origin,t(14,Ce=await w.connect(ee,{status_callback:ot,with_null_state:!0,events:["data","log","status","render"]})),!Ce.config)throw new Error("Could not resolve app config");t(12,W=Ce.config),window.__gradio_space__=W.space_id,t(13,j={message:"",load_status:"complete",status:"running",detail:"RUNNING"}),await re(W.css),await n2(W.head),t(18,ae=!0),window.__is_colab__=W.is_colab,s("loaded"),W.dev_mode&&setTimeout(()=>{const{host:me}=new URL(ee);let se=new URL(`http://${me}/dev/reload`);m=new EventSource(se),m.addEventListener("error",async ke=>{de("Error reloading app","error"),console.error(JSON.parse(ke.data))}),m.addEventListener("reload",async ke=>{if(Ce.close(),t(14,Ce=await w.connect(ee,{status_callback:ot,with_null_state:!0,events:["data","log","status","render"]})),!Ce.config)throw new Error("Could not resolve app config");t(12,W=Ce.config),window.__gradio_space__=W.space_id,await re(W.css)})},200)});let Bi,di;async function yi(){t(19,Bi=(await Fe(()=>import("./assets/Blocks-DULSXkxK.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)).default)}async function wi(){t(20,di=(await Fe(()=>import("./assets/Login-DhUCc-x6.js"),__vite__mapDeps([4,5,6,7,8,9,10,11,1,2,12,13,14,15,16]),import.meta.url)).default)}function mt(){W.auth_required?wi():yi()}const Tt={readable_error:{NO_APP_FILE:n("errors.no_app_file"),CONFIG_ERROR:n("errors.config_error"),BUILD_ERROR:n("errors.build_error"),RUNTIME_ERROR:n("errors.runtime_error"),PAUSED:n("errors.space_paused")},title(I){return encodeURIComponent(n("errors.space_not_working"))},description(I,me){return encodeURIComponent(`Hello,

Firstly, thanks for creating this space!

I noticed that the space isn't working correctly because there is ${this.readable_error[I]||"an error"}.

It would be great if you could take a look at this because this space is being embedded on ${me}.

Thanks!`)}};let de;Ar(async()=>{Vc.register(R,F)});let Be;async function lt(I,me){if(I&&!me&&window.self===window.top){Be&&(Be.remove(),Be=void 0);const se=await Gv(I);se&&(Be=se.element)}}ja(()=>{Be?.remove()});function Ft(I){L=I,t(10,L)}function ye(I){T=I,t(11,T)}function vt(I){de=I,t(21,de)}function gt(I){F=I,t(9,F)}return i.$$set=I=>{"autoscroll"in I&&t(0,o=I.autoscroll),"version"in I&&t(1,l=I.version),"initial_height"in I&&t(2,a=I.initial_height),"app_mode"in I&&t(3,h=I.app_mode),"is_embed"in I&&t(4,c=I.is_embed),"theme_mode"in I&&t(25,u=I.theme_mode),"control_page_title"in I&&t(5,f=I.control_page_title),"container"in I&&t(6,d=I.container),"info"in I&&t(7,p=I.info),"eager"in I&&t(26,g=I.eager),"mount_css"in I&&t(27,b=I.mount_css),"Client"in I&&t(28,w=I.Client),"worker_proxy"in I&&t(29,y=I.worker_proxy),"space"in I&&t(8,k=I.space),"host"in I&&t(30,A=I.host),"src"in I&&t(31,x=I.src)},i.$$.update=()=>{i.$$.dirty[0]&4096&&W?.app_id&&W.app_id,i.$$.dirty[0]&9216&&t(15,D=!L&&j.load_status!=="error"?"pending":!L&&j.load_status==="error"?"error":j.load_status),i.$$.dirty[0]&67112960|i.$$.dirty[1]&2&&W&&(g||r[R])&&mt(),i.$$.dirty[0]&2560&&T&&F.dispatchEvent(new CustomEvent("render",{bubbles:!0,cancelable:!1,composed:!0})),i.$$.dirty[0]&16400&&Ce?.config&&lt(Ce?.config?.space_id,c)},[o,l,a,h,c,f,d,p,k,F,L,T,W,j,Ce,D,ne,_e,ae,Bi,di,de,n,$,Tt,u,g,b,w,y,A,x,r,Ft,ye,vt,gt]}class Zm extends $t{constructor(e){super(),qt(this,e,r2,e2,yt,{autoscroll:0,version:1,initial_height:2,app_mode:3,is_embed:4,theme_mode:25,control_page_title:5,container:6,info:7,eager:26,mount_css:27,Client:28,worker_proxy:29,space:8,host:30,src:31},null,[-1,-1])}get autoscroll(){return this.$$.ctx[0]}set autoscroll(e){this.$$set({autoscroll:e}),E()}get version(){return this.$$.ctx[1]}set version(e){this.$$set({version:e}),E()}get initial_height(){return this.$$.ctx[2]}set initial_height(e){this.$$set({initial_height:e}),E()}get app_mode(){return this.$$.ctx[3]}set app_mode(e){this.$$set({app_mode:e}),E()}get is_embed(){return this.$$.ctx[4]}set is_embed(e){this.$$set({is_embed:e}),E()}get theme_mode(){return this.$$.ctx[25]}set theme_mode(e){this.$$set({theme_mode:e}),E()}get control_page_title(){return this.$$.ctx[5]}set control_page_title(e){this.$$set({control_page_title:e}),E()}get container(){return this.$$.ctx[6]}set container(e){this.$$set({container:e}),E()}get info(){return this.$$.ctx[7]}set info(e){this.$$set({info:e}),E()}get eager(){return this.$$.ctx[26]}set eager(e){this.$$set({eager:e}),E()}get mount_css(){return this.$$.ctx[27]}set mount_css(e){this.$$set({mount_css:e}),E()}get Client(){return this.$$.ctx[28]}set Client(e){this.$$set({Client:e}),E()}get worker_proxy(){return this.$$.ctx[29]}set worker_proxy(e){this.$$set({worker_proxy:e}),E()}get space(){return this.$$.ctx[8]}set space(e){this.$$set({space:e}),E()}get host(){return this.$$.ctx[30]}set host(e){this.$$set({host:e}),E()}get src(){return this.$$.ctx[31]}set src(e){this.$$set({src:e}),E()}}class ve{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),ni.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),ni.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new br(this),s=new br(e);for(let o=t,l=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=n)return!0}}iter(e=1){return new br(this,e)}iterRange(e,t=this.length){return new Qm(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new eg(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ve.empty:e.length<=32?new Ve(e):ni.from(Ve.split(e,[]))}}class Ve extends ve{constructor(e,t=s2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((t?n:l)>=e)return new o2(r,l,n,o);r=l+1,n++}}decompose(e,t,n,r){let s=e<=0&&t>=this.length?this:new Ve(Uc(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=n.pop(),l=Os(s.text,o.text.slice(),0,s.length);if(l.length<=32)n.push(new Ve(l,o.length+s.length));else{let a=l.length>>1;n.push(new Ve(l.slice(0,a)),new Ve(l.slice(a)))}}else n.push(s)}replace(e,t,n){if(!(n instanceof Ve))return super.replace(e,t,n);let r=Os(this.text,Os(n.text,Uc(this.text,0,e)),t),s=this.length+n.length-(t-e);return r.length<=32?new Ve(r,s):ni.from(Ve.split(r,[]),s)}sliceString(e,t=this.length,n=`
`){let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=n),e<a&&t>s&&(r+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let s of e)n.push(s),r+=s.length+1,n.length==32&&(t.push(new Ve(n,r)),n=[],r=-1);return r>-1&&t.push(new Ve(n,r)),t}}class ni extends ve{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=n+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,n,r);r=l+1,n=a+1}}decompose(e,t,n,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let h=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!h?n.push(l):l.decompose(e-o,t-o,n,h)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,n),h=this.lines-o.lines+a.lines;if(a.lines<h>>4&&a.lines>h>>6){let c=this.children.slice();return c[r]=a,new ni(c,this.length-(t-e)+n.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=n),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ni))return 0;let n=0,[r,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==l)return n;let a=this.children[r],h=e.children[s];if(a!=h)return n+a.scanIdentical(h,t);n+=a.length+1}}static from(e,t=e.reduce((n,r)=>n+r.length+1,-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let d=[];for(let p of e)p.flatten(d);return new Ve(d,t)}let r=Math.max(32,n>>5),s=r<<1,o=r>>1,l=[],a=0,h=-1,c=[];function u(d){let p;if(d.lines>s&&d instanceof ni)for(let g of d.children)u(g);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof Ve&&a&&(p=c[c.length-1])instanceof Ve&&d.lines+p.lines<=32?(a+=d.lines,h+=d.length+1,c[c.length-1]=new Ve(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&f(),a+=d.lines,h+=d.length+1,c.push(d))}function f(){a!=0&&(l.push(c.length==1?c[0]:ni.from(c,h)),h=-1,a=c.length=0)}for(let d of e)u(d);return f(),l.length==1?l[0]:new ni(l,t)}}ve.empty=new Ve([""],0);function s2(i){let e=-1;for(let t of i)e+=t.length+1;return e}function Os(i,e,t=0,n=1e9){for(let r=0,s=0,o=!0;s<i.length&&r<=n;s++){let l=i[s],a=r+l.length;a>=t&&(a>n&&(l=l.slice(0,n-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function Uc(i,e,t){return Os(i,[""],e,t)}class br{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ve?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],s=this.offsets[n],o=s>>1,l=r instanceof Ve?r.text.length:r.children.length;if(o==(t>0?l:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Ve){let a=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof Ve?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Qm{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new br(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class eg{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ve.prototype[Symbol.iterator]=function(){return this.iter()},br.prototype[Symbol.iterator]=Qm.prototype[Symbol.iterator]=eg.prototype[Symbol.iterator]=function(){return this});class o2{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let Sn="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(i=>i?parseInt(i,36):1);for(let i=1;i<Sn.length;i++)Sn[i]+=Sn[i-1];function l2(i){for(let e=1;e<Sn.length;e+=2)if(Sn[e]>i)return Sn[e-1]<=i;return!1}function jc(i){return i>=127462&&i<=127487}const zc=8205;function At(i,e,t=!0,n=!0){return(t?tg:a2)(i,e,n)}function tg(i,e,t){if(e==i.length)return e;e&&ig(i.charCodeAt(e))&&ng(i.charCodeAt(e-1))&&e--;let n=et(i,e);for(e+=Dt(n);e<i.length;){let r=et(i,e);if(n==zc||r==zc||t&&l2(r))e+=Dt(r),n=r;else if(jc(r)){let s=0,o=e-2;for(;o>=0&&jc(et(i,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function a2(i,e,t){for(;e>0;){let n=tg(i,e-2,t);if(n<e)return n;e--}return 0}function ig(i){return i>=56320&&i<57344}function ng(i){return i>=55296&&i<56320}function et(i,e){let t=i.charCodeAt(e);if(!ng(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return ig(n)?(t-55296<<10)+(n-56320)+65536:t}function rg(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Dt(i){return i<65536?1:2}const Gl=/\r\n?|\n/;var Je=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(Je||(Je={}));class ai{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,s),r+=s):r+=o,n+=s}}iterChangedRanges(e,t=!1){ql(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new ai(e)}composeDesc(e){return this.empty?e:e.empty?this:sg(this,e)}mapDesc(e,t=!1){return e.empty?this:$l(this,e,t)}mapPos(e,t=-1,n=Je.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=r+l;if(a<0){if(h>e)return s+(e-r);s+=l}else{if(n!=Je.Simple&&h>=e&&(n==Je.TrackDel&&r<e&&h>e||n==Je.TrackBefore&&r<e||n==Je.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==r||t<0?s:s+a;s+=a}r=h}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let s=this.sections[n++],o=this.sections[n++],l=r+s;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ai(e)}static create(e){return new ai(e)}}class ze extends ai{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ql(this,(t,n,r,s,o)=>e=e.replace(r,r+(n-t),o),!1),e}mapDesc(e,t=!1){return $l(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(ve.empty);n.push(o?e.slice(s,s+o):ve.empty)}s+=o}return new ze(t,n)}compose(e){return this.empty?e:e.empty?this:sg(this,e,!0)}map(e,t=!1){return e.empty?this:$l(this,e,t,!0)}iterChanges(e,t=!1){ql(this,e,t)}get desc(){return ai.create(this.sections)}filter(e){let t=[],n=[],r=[],s=new Tr(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);Qe(r,c,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;Qe(t,c,u),u>0&&Ei(n,t,s.text),s.forward(c),l+=c}let h=e[o++];for(;l<h;){if(s.done)break e;let c=Math.min(s.len,h-l);Qe(t,c,-1),Qe(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new ze(t,n),filtered:ai.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):r==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<t&&Qe(r,t-o,-1);let u=new ze(r,s);l=l?l.compose(u.map(l)):u,r=[],s=[],o=0}function h(c){if(Array.isArray(c))for(let u of c)h(u);else if(c instanceof ze){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:u,to:f=u,insert:d}=c;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?ve.of(d.split(n||Gl)):d:ve.empty,g=p.length;if(u==f&&g==0)return;u<o&&a(),u>o&&Qe(r,u-o,-1),Qe(r,f-u,g),Ei(s,r,p),o=f}}return h(e),a(!l),l}static empty(e){return new ze(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;n.length<r;)n.push(ve.empty);n[r]=ve.of(s.slice(1)),t.push(s[0],n[r].length)}}}return new ze(t,n)}static createSet(e,t){return new ze(e,t)}}function Qe(i,e,t,n=!1){if(e==0&&t<=0)return;let r=i.length-2;r>=0&&t<=0&&t==i[r+1]?i[r]+=e:e==0&&i[r]==0?i[r+1]+=t:n?(i[r]+=e,i[r+1]+=t):i.push(e,t)}function Ei(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(ve.empty);i.push(t)}}function ql(i,e,t){let n=i.inserted;for(let r=0,s=0,o=0;o<i.sections.length;){let l=i.sections[o++],a=i.sections[o++];if(a<0)r+=l,s+=l;else{let h=r,c=s,u=ve.empty;for(;h+=l,c+=a,a&&n&&(u=u.append(n[o-2>>1])),!(t||o==i.sections.length||i.sections[o+1]<0);)l=i.sections[o++],a=i.sections[o++];e(r,h,s,c,u),r=h,s=c}}}function $l(i,e,t,n=!1){let r=[],s=n?[]:null,o=new Tr(i),l=new Tr(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let h=Math.min(o.len,l.len);Qe(r,h,-1),o.forward(h),l.forward(h)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let h=l.len;for(Qe(r,l.ins,-1);h;){let c=Math.min(o.len,h);o.ins>=0&&a<o.i&&o.len<=c&&(Qe(r,0,o.ins),s&&Ei(s,r,o.text),a=o.i),o.forward(c),h-=c}l.next()}else if(o.ins>=0){let h=0,c=o.len;for(;c;)if(l.ins==-1){let u=Math.min(c,l.len);h+=u,c-=u,l.forward(u)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Qe(r,h,a<o.i?o.ins:0),s&&a<o.i&&Ei(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?ze.createSet(r,s):ai.create(r);throw new Error("Mismatched change set lengths")}}function sg(i,e,t=!1){let n=[],r=t?[]:null,s=new Tr(i),o=new Tr(e);for(let l=!1;;){if(s.done&&o.done)return r?ze.createSet(n,r):ai.create(n);if(s.ins==0)Qe(n,s.len,0,l),s.next();else if(o.len==0&&!o.done)Qe(n,0,o.ins,l),r&&Ei(r,n,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),h=n.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Qe(n,a,c,l),r&&c&&Ei(r,n,o.text)}else o.ins==-1?(Qe(n,s.off?0:s.len,a,l),r&&Ei(r,n,s.textBit(a))):(Qe(n,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&Ei(r,n,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||n.length>h),s.forward2(a),o.forward(a)}}}}class Tr{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ve.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?ve.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Wi{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Wi(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return C.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return C.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return C.range(e.anchor,e.head)}static create(e,t,n){return new Wi(e,t,n)}}class C{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:C.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new C([this.main],0)}addRange(e,t=!0){return C.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,C.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new C(e.ranges.map(t=>Wi.fromJSON(t)),e.main)}static single(e,t=e){return new C([C.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=n:s.from<n)return C.normalized(e.slice(),t);n=s.to}return new C(e,t)}static cursor(e,t=0,n,r){return Wi.create(e,e,(t==0?0:t<0?4:8)|(n==null?3:Math.min(2,n))|(r??33554431)<<5)}static range(e,t,n){let r=(n??33554431)<<5;return t<e?Wi.create(t,e,16|r|8):Wi.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let n=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(n);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?C.range(a,l):C.range(l,a))}}return new C(e,t)}}function og(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Ya=0;class q{constructor(e,t,n,r,s){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=Ya++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new q(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Za),!!e.static,e.enables)}of(e){return new Ds([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ds(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ds(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Za(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class Ds{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Ya++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,h=!1,c=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?h=!0:((t=e[u.id])!==null&&t!==void 0?t:1)&1||c.push(e[u.id]);return{create(u){return u.values[o]=n(u),1},update(u,f){if(a&&f.docChanged||h&&(f.docChanged||f.selection)||Kl(u,c)){let d=n(u);if(l?!Wc(d,u.values[o],r):!r(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d=n(u),p=f.config.address[s];if(p!=null){let g=qs(f,p);if(this.dependencies.every(m=>m instanceof q?f.facet(m)===u.facet(m):m instanceof wt?f.field(m,!1)==u.field(m,!1):!0)||(l?Wc(d,g,r):r(d,g)))return u.values[o]=g,0}return u.values[o]=d,1}}}}function Wc(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function Kl(i,e){let t=!1;for(let n of e)_r(i,n)&1&&(t=!0);return t}function h2(i,e,t){let n=t.map(a=>i[a.id]),r=t.map(a=>a.type),s=n.filter(a=>!(a&1)),o=i[e.id]>>1;function l(a){let h=[];for(let c=0;c<n.length;c++){let u=qs(a,n[c]);if(r[c]==2)for(let f of u)h.push(f);else h.push(u)}return e.combine(h)}return{create(a){for(let h of n)_r(a,h);return a.values[o]=l(a),1},update(a,h){if(!Kl(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,h){let c=Kl(a,n),u=h.config.facets[e.id],f=h.facet(e);if(u&&!c&&Za(t,u))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}const Gc=q.define({static:!0});class wt{constructor(e,t,n,r,s){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new wt(Ya++,e.create,e.update,e.compare||((n,r)=>n===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Gc).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,r)=>{let s=n.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(n.values[t]=o,1)},reconfigure:(n,r)=>r.config.address[this.id]!=null?(n.values[t]=r.field(this),0):(n.values[t]=this.create(n),1)}}init(e){return[this,Gc.of({field:this,create:e})]}get extension(){return this}}const ji={lowest:4,low:3,default:2,high:1,highest:0};function er(i){return e=>new lg(e,i)}const Gr={highest:er(ji.highest),high:er(ji.high),default:er(ji.default),low:er(ji.low),lowest:er(ji.lowest)};class lg{constructor(e,t){this.inner=e,this.prec=t}}class go{of(e){return new Xl(this,e)}reconfigure(e){return go.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Xl{constructor(e,t){this.compartment=e,this.inner=t}}class Gs{constructor(e,t,n,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],s=Object.create(null),o=new Map;for(let f of c2(e,t,o))f instanceof wt?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],h=[];for(let f of r)l[f.id]=h.length<<1,h.push(d=>f.slot(d));let c=n?.config.facets;for(let f in s){let d=s[f],p=d[0].facet,g=c&&c[f]||[];if(d.every(m=>m.type==0))if(l[p.id]=a.length<<1|1,Za(g,d))a.push(n.facet(p));else{let m=p.combine(d.map(b=>b.value));a.push(n&&p.compare(m,n.facet(p))?n.facet(p):m)}else{for(let m of d)m.type==0?(l[m.id]=a.length<<1|1,a.push(m.value)):(l[m.id]=h.length<<1,h.push(b=>m.dynamicSlot(b)));l[p.id]=h.length<<1,h.push(m=>h2(m,p,d))}}let u=h.map(f=>f(l));return new Gs(e,o,u,l,a,s)}}function c2(i,e,t){let n=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let h=n[a].indexOf(o);h>-1&&n[a].splice(h,1),o instanceof Xl&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let h of o)s(h,l);else if(o instanceof Xl){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;t.set(o.compartment,h),s(h,l)}else if(o instanceof lg)s(o.inner,o.prec);else if(o instanceof wt)n[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Ds)n[l].push(o),o.facet.extensions&&s(o.facet.extensions,ji.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,l)}}return s(i,ji.default),n.reduce((o,l)=>o.concat(l))}function _r(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let r=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|r}function qs(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const ag=q.define(),hg=q.define({combine:i=>i.some(e=>e),static:!0}),cg=q.define({combine:i=>i.length?i[0]:void 0,static:!0}),ug=q.define(),fg=q.define(),dg=q.define(),pg=q.define({combine:i=>i.length?i[0]:!1});class sn{constructor(e,t){this.type=e,this.value=t}static define(){return new u2}}class u2{of(e){return new sn(this,e)}}class f2{constructor(e){this.map=e}of(e){return new ue(this,e)}}class ue{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ue(this.type,t)}is(e){return this.type==e}static define(e={}){return new f2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let s=r.map(t);s&&n.push(s)}return n}}ue.reconfigure=ue.define();ue.appendConfig=ue.define();class We{constructor(e,t,n,r,s,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,n&&og(n,t.newLength),s.some(l=>l.type==We.time)||(this.annotations=s.concat(We.time.of(Date.now())))}static create(e,t,n,r,s,o){return new We(e,t,n,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(We.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}We.time=sn.define();We.userEvent=sn.define();We.addToHistory=sn.define();We.remote=sn.define();function d2(i,e){let t=[];for(let n=0,r=0;;){let s,o;if(n<i.length&&(r==e.length||e[r]>=i[n]))s=i[n++],o=i[n++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function mg(i,e,t){var n;let r,s,o;return t?(r=e.changes,s=ze.empty(e.changes.length),o=i.changes.compose(e.changes)):(r=e.changes.map(i.changes),s=i.changes.mapDesc(e.changes,!0),o=i.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(n=i.selection)===null||n===void 0?void 0:n.map(r),effects:ue.mapEffects(i.effects,r).concat(ue.mapEffects(e.effects,s)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function Jl(i,e,t){let n=e.selection,r=An(e.annotations);return e.userEvent&&(r=r.concat(We.userEvent.of(e.userEvent))),{changes:e.changes instanceof ze?e.changes:ze.of(e.changes||[],t,i.facet(cg)),selection:n&&(n instanceof C?n:C.single(n.anchor,n.head)),effects:An(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function gg(i,e,t){let n=Jl(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;n=mg(n,Jl(i,e[s],o?n.changes.newLength:i.doc.length),o)}let r=We.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return m2(t?p2(r):r)}function p2(i){let e=i.startState,t=!0;for(let r of e.facet(ug)){let s=r(i);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:d2(t,s))}if(t!==!0){let r,s;if(t===!1)s=i.changes.invertedDesc,r=ze.empty(e.doc.length);else{let o=i.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}i=We.create(e,r,i.selection&&i.selection.map(s),ue.mapEffects(i.effects,s),i.annotations,i.scrollIntoView)}let n=e.facet(fg);for(let r=n.length-1;r>=0;r--){let s=n[r](i);s instanceof We?i=s:Array.isArray(s)&&s.length==1&&s[0]instanceof We?i=s[0]:i=gg(e,An(s),!1)}return i}function m2(i){let e=i.startState,t=e.facet(dg),n=i;for(let r=t.length-1;r>=0;r--){let s=t[r](i);s&&Object.keys(s).length&&(n=mg(n,Jl(e,s,i.changes.newLength),!0))}return n==i?i:We.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const g2=[];function An(i){return i==null?g2:Array.isArray(i)?i:[i]}var Pt=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(Pt||(Pt={}));const b2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Yl;try{Yl=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function _2(i){if(Yl)return Yl.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||b2.test(t)))return!0}return!1}function y2(i){return e=>{if(!/\S/.test(e))return Pt.Space;if(_2(e))return Pt.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return Pt.Word;return Pt.Other}}class be{constructor(e,t,n,r,s,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)_r(this,l<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return _r(this,n),qs(this,n)}update(...e){return gg(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:r}=t;for(let o of e.effects)o.is(go.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,a)=>r.set(a,l)),t=null),r.set(o.value.compartment,o.value.extension)):o.is(ue.reconfigure)?(t=null,n=o.value):o.is(ue.appendConfig)&&(t=null,n=An(n).concat(o.value));let s;t?s=e.startState.values.slice():(t=Gs.resolve(n,r,this),s=new be(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new be(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:C.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),s=[n.range],o=An(n.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),h=this.changes(a.changes),c=h.map(r);for(let f=0;f<l;f++)s[f]=s[f].map(c);let u=r.mapDesc(h,!0);s.push(a.range.map(u)),r=r.compose(c),o=ue.mapEffects(o,c).concat(ue.mapEffects(An(a.effects),u))}return{changes:r,selection:C.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ze?e:ze.of(e,this.doc.length,this.facet(be.lineSeparator))}toText(e){return ve.of(e.split(this.facet(be.lineSeparator)||Gl))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(_r(this,t),qs(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof wt&&this.config.address[r.id]!=null&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let o=n[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return be.create({doc:e.doc,selection:C.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Gs.resolve(e.extensions||[],new Map),n=e.doc instanceof ve?e.doc:ve.of((e.doc||"").split(t.staticFacet(be.lineSeparator)||Gl)),r=e.selection?e.selection instanceof C?e.selection:C.single(e.selection.anchor,e.selection.head):C.single(0);return og(r,n.length),t.staticFacet(hg)||(r=r.asSingle()),new be(t,n,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(be.tabSize)}get lineBreak(){return this.facet(be.lineSeparator)||`
`}get readOnly(){return this.facet(pg)}phrase(e,...t){for(let n of this.facet(be.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?n:t[s-1]})),e}languageDataAt(e,t,n=-1){let r=[];for(let s of this.facet(ag))for(let o of s(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return y2(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-n,l=e-n;for(;o>0;){let a=At(t,o,!1);if(s(t.slice(a,o))!=Pt.Word)break;o=a}for(;l<r;){let a=At(t,l);if(s(t.slice(l,a))!=Pt.Word)break;l=a}return o==l?null:C.range(o+n,l+n)}}be.allowMultipleSelections=hg;be.tabSize=q.define({combine:i=>i.length?i[0]:4});be.lineSeparator=cg;be.readOnly=pg;be.phrases=q.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(r=>i[r]==e[r])}});be.languageData=ag;be.changeFilter=ug;be.transactionFilter=fg;be.transactionExtender=dg;go.reconfigure=ue.define();function on(i,e,t={}){let n={};for(let r of i)for(let s of Object.keys(r)){let o=r[s],l=n[s];if(l===void 0)n[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))n[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)n[r]===void 0&&(n[r]=e[r]);return n}class Ji{eq(e){return this==e}range(e,t=e){return Zl.create(e,t,this)}}Ji.prototype.startSide=Ji.prototype.endSide=0;Ji.prototype.point=!1;Ji.prototype.mapMode=Je.TrackDel;let Zl=class bg{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new bg(e,t,n)}};function Ql(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class Qa{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let s=n?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,h=s[a]-e||(n?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return h>=0?o:l;h>=0?l=a:o=a+1}}between(e,t,n,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let n=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let h=this.value[a],c=this.from[a]+e,u=this.to[a]+e,f,d;if(c==u){let p=t.mapPos(c,h.startSide,h.mapMode);if(p==null||(f=d=p,h.startSide!=h.endSide&&(d=t.mapPos(c,h.endSide),d<f)))continue}else if(f=t.mapPos(c,h.startSide),d=t.mapPos(u,h.endSide),f>d||f==d&&h.startSide>0&&h.endSide<=0)continue;(d-f||h.endSide-h.startSide)<0||(o<0&&(o=f),h.point&&(l=Math.max(l,d-f)),n.push(h),r.push(f-o),s.push(d-o))}return{mapped:n.length?new Qa(r,s,n,l):null,pos:o}}}class Se{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Se(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(Ql)),this.isEmpty)return t.length?Se.of(t):this;let l=new _g(this,null,-1).goto(0),a=0,h=[],c=new Yi;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];c.addInner(u.from,u.to,u.value)||h.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||h.push(Zl.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!h.length?Se.empty:this.nextLayer.update({add:h,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],h=e.touchesRange(l,l+a.length);if(h===!1)r=Math.max(r,a.maxPoint),t.push(a),n.push(e.mapPos(l));else if(h===!0){let{mapped:c,pos:u}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),t.push(c),n.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new Se(n,t,s||Se.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Mr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Mr.from(e).goto(t)}static compare(e,t,n,r,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=qc(o,l,n),h=new tr(o,a,s),c=new tr(l,a,s);n.iterGaps((u,f,d)=>$c(h,u,c,f,d,r)),n.empty&&n.length==0&&$c(h,0,c,0,0,r)}static eq(e,t,n=0,r){r==null&&(r=1e9);let s=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),o=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=qc(s,o),a=new tr(s,l,0).goto(n),h=new tr(o,l,0).goto(n);for(;;){if(a.to!=h.to||!ea(a.active,h.active)||a.point&&(!h.point||!a.point.eq(h.point)))return!1;if(a.to>r)return!0;a.next(),h.next()}}static spans(e,t,n,r,s=-1){let o=new tr(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let h=Math.min(o.to,n);if(o.point?(r.point(l,h,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(h)+(o.to>h?1:0)):h>l&&(r.span(l,h,o.active,a),a=o.openEnd(h)),o.to>n)break;l=o.to,o.next()}return a}static of(e,t=!1){let n=new Yi;for(let r of e instanceof Zl?[e]:t?w2(e):e)n.add(r.from,r.to,r.value);return n.finish()}}Se.empty=new Se([],[],null,-1);function w2(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(Ql(e,n)>0)return i.slice().sort(Ql);e=n}return i}Se.empty.nextLayer=Se.empty;class Yi{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Qa(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new Yi)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Se.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Se.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function qc(i,e,t){let n=new Map;for(let s of i)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&n.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=n.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!t?.touchesRange(l,l+s.chunk[o].length)&&r.add(s.chunk[o])}return r}class _g{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Mr{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new _g(o,t,n,s));return r.length==1?r[0]:new Mr(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Qo(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Qo(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Qo(this.heap,0)}}}function Qo(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let r=i[n];if(n+1<i.length&&r.compare(i[n+1])>=0&&(r=i[n+1],n++),t.compare(r)<0)break;i[n]=t,i[e]=r,e=n}}class tr{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Mr.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){os(this.active,e),os(this.activeTo,e),os(this.activeRank,e),this.minActive=Kc(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;ls(this.active,t,n),ls(this.activeTo,t,r),ls(this.activeRank,t,s),e&&ls(e,t,this.cursor.from),this.minActive=Kc(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&os(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(n),this.cursor.from<e&&this.cursor.to>e&&r++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){let s=0;for(;s<n.length&&n[s]<e;)s++;this.openStart=s+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function $c(i,e,t,n,r,s){i.goto(e),t.goto(n);let o=n+r,l=n,a=n-e;for(;;){let h=i.to+a-t.to||i.endSide-t.endSide,c=h<0?i.to+a:t.to,u=Math.min(c,o);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&ea(i.activeForPoint(i.to+a),t.activeForPoint(t.to))||s.comparePoint(l,u,i.point,t.point):u>l&&!ea(i.active,t.active)&&s.compareRange(l,u,i.active,t.active),c>o)break;l=c,h<=0&&i.next(),h>=0&&t.next()}}function ea(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function os(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function ls(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function Kc(i,e){let t=-1,n=1e9;for(let r=0;r<e.length;r++)(e[r]-n||i[r].endSide-i[t].endSide)<0&&(t=r,n=e[r]);return t}function qr(i,e,t=i.length){let n=0;for(let r=0;r<t;)i.charCodeAt(r)==9?(n+=e-n%e,r++):(n++,r=At(i,r));return n}function ta(i,e,t,n){for(let r=0,s=0;;){if(s>=e)return r;if(r==i.length)break;s+=i.charCodeAt(r)==9?t-s%t:1,r=At(i,r)}return n===!0?-1:i.length}const ia="ͼ",Xc=typeof Symbol>"u"?"__"+ia:Symbol.for(ia),na=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Oi{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,h){let c=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),p,a);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,c,f)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||f)&&a.push((n&&!u&&!h?o.map(n):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Jc[Xc]||1;return Jc[Xc]=e+1,ia+e.toString(36)}static mount(e,t,n){let r=e[na],s=n&&n.nonce;r?s&&r.setNonce(s):r=new v2(e,s),r.mount(Array.isArray(t)?t:[t])}}let Yc=new Map;class v2{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=Yc.get(n);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[na]=s;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Yc.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[na]=this}mount(e){let t=this.sheet,n=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],n++)}else{for(;r<l;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Di={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Or={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},k2=typeof navigator<"u"&&/Mac/.test(navigator.platform),x2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Xe=0;Xe<10;Xe++)Di[48+Xe]=Di[96+Xe]=String(Xe);for(var Xe=1;Xe<=24;Xe++)Di[Xe+111]="F"+Xe;for(var Xe=65;Xe<=90;Xe++)Di[Xe]=String.fromCharCode(Xe+32),Or[Xe]=String.fromCharCode(Xe);for(var el in Di)Or.hasOwnProperty(el)||(Or[el]=Di[el]);function S2(i){var e=k2&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||x2&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Or:Di)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $s(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function Rn(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function A2(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ps(i,e){if(!e.anchorNode)return!1;try{return Rn(i,e.anchorNode)}catch{return!1}}function Dr(i){return i.nodeType==3?In(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Ks(i,e,t,n){return t?Zc(i,e,t,n,-1)||Zc(i,e,t,n,1):!1}function Xs(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function Zc(i,e,t,n,r){for(;;){if(i==t&&e==n)return!0;if(e==(r<0?0:Pr(i))){if(i.nodeName=="DIV")return!1;let s=i.parentNode;if(!s||s.nodeType!=1)return!1;e=Xs(i)+(r<0?0:1),i=s}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=r<0?Pr(i):0}else return!1}}function Pr(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}const yg={left:0,right:0,top:0,bottom:0};function eh(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function E2(i){return{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function C2(i,e,t,n,r,s,o,l){let a=i.ownerDocument,h=a.defaultView||window;for(let c=i;c;)if(c.nodeType==1){let u,f=c==a.body;if(f)u=E2(h);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let g=c.getBoundingClientRect();u={left:g.left,right:g.left+c.clientWidth,top:g.top,bottom:g.top+c.clientHeight}}let d=0,p=0;if(r=="nearest")e.top<u.top?(p=-(u.top-e.top+o),t>0&&e.bottom>u.bottom+p&&(p=e.bottom-u.bottom+p+o)):e.bottom>u.bottom&&(p=e.bottom-u.bottom+o,t<0&&e.top-p<u.top&&(p=-(u.top+p-e.top+o)));else{let g=e.bottom-e.top,m=u.bottom-u.top;p=(r=="center"&&g<=m?e.top+g/2-m/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-m+o)-u.top}if(n=="nearest"?e.left<u.left?(d=-(u.left-e.left+s),t>0&&e.right>u.right+d&&(d=e.right-u.right+d+s)):e.right>u.right&&(d=e.right-u.right+s,t<0&&e.left<u.left+d&&(d=-(u.left+d-e.left+s))):d=(n=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:n=="start"==l?e.left-s:e.right-(u.right-u.left)+s)-u.left,d||p)if(f)h.scrollBy(d,p);else{let g=0,m=0;if(p){let b=c.scrollTop;c.scrollTop+=p,m=c.scrollTop-b}if(d){let b=c.scrollLeft;c.scrollLeft+=d,g=c.scrollLeft-b}e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m},g&&Math.abs(g-d)<1&&(n="nearest"),m&&Math.abs(m-p)<1&&(r="nearest")}if(f)break;c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}class T2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let pn=null;function wg(i){if(i.setActive)return i.setActive();if(pn)return i.focus(pn);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(pn==null?{get preventScroll(){return pn={preventScroll:!0},!0}}:void 0),!pn){pn=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],s=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let Qc;function In(i,e,t=e){let n=Qc||(Qc=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function En(i,e,t){let n={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",n);r.synthetic=!0,i.dispatchEvent(r);let s=new KeyboardEvent("keyup",n);return s.synthetic=!0,i.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function M2(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function vg(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function O2(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(;;)if(n){if(t.nodeType!=1)return!1;let r=t.childNodes[n-1];r.contentEditable=="false"?n--:(t=r,n=Pr(t))}else{if(t==i)return!0;n=Xs(t),t=t.parentNode}}class tt{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new tt(e.parentNode,Xs(e),t)}static after(e,t){return new tt(e.parentNode,Xs(e)+1,t)}}const th=[];class De{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,n=null,r;for(let s of this.children){if(s.dirty){if(!s.dom&&(r=n?n.nextSibling:t.firstChild)){let o=De.get(r);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(r)}s.sync(e),s.dirty=0}if(r=n?n.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&r!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;r&&r!=s.dom;)r=eu(r);else t.insertBefore(s.dom,r);n=s.dom}for(r=n?n.nextSibling:t.firstChild,r&&e&&e.node==t&&(e.written=!0);r;)r=eu(r)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=Pr(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!De.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==n)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,h=n,c=n;a<this.children.length;a++){let u=this.children[a],f=h+u.length;if(h<e&&f>t)return u.domBoundsAround(e,t,h);if(f>=e&&r==-1&&(r=a,s=h),h>t&&u.dom.parentNode==this.dom){o=a,l=c;break}c=f,h=f+u.breakAfter}return{from:s,to:l<0?n+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=th){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new kg(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}De.prototype.breakAfter=0;function eu(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class kg{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function xg(i,e,t,n,r,s,o,l,a){let{children:h}=i,c=h.length?h[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==n&&c&&!o&&!f&&s.length<2&&c.merge(t,r,s.length?u:null,t==0,l,a))){if(n<h.length){let d=h[n];d&&r<d.length?(e==n&&(d=d.split(r),r=0),!f&&u&&d.merge(0,r,u,!0,0,a)?s[s.length-1]=d:(r&&d.merge(0,r,null,!1,0,a),s.push(d))):d?.breakAfter&&(u?u.breakAfter=1:o=1),n++}for(c&&(c.breakAfter=o,t>0&&(!o&&s.length&&c.merge(t,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,l,0),e++));e<n&&s.length;)if(h[n-1].become(s[s.length-1]))n--,s.pop(),a=s.length?0:l;else if(h[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&n<h.length&&!h[e-1].breakAfter&&h[n].merge(0,0,h[e-1],!1,l,a)&&e--,(e<n||s.length)&&i.replaceChildren(e,n,s)}}function Sg(i,e,t,n,r,s){let o=i.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:h,off:c}=o.findPos(e,-1),u=e-t;for(let f of n)u+=f.length;i.length+=u,xg(i,h,c,l,a,n,0,r,s)}let St=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ra=typeof document<"u"?document:{documentElement:{style:{}}};const sa=/Edge\/(\d+)/.exec(St.userAgent),Ag=/MSIE \d/.test(St.userAgent),oa=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(St.userAgent),bo=!!(Ag||oa||sa),tu=!bo&&/gecko\/(\d+)/i.test(St.userAgent),tl=!bo&&/Chrome\/(\d+)/.exec(St.userAgent),iu="webkitFontSmoothing"in ra.documentElement.style,Eg=!bo&&/Apple Computer/.test(St.vendor),nu=Eg&&(/Mobile\/\w+/.test(St.userAgent)||St.maxTouchPoints>2);var G={mac:nu||/Mac/.test(St.platform),windows:/Win/.test(St.platform),linux:/Linux|X11/.test(St.platform),ie:bo,ie_version:Ag?ra.documentMode||6:oa?+oa[1]:sa?+sa[1]:0,gecko:tu,gecko_version:tu?+(/Firefox\/(\d+)/.exec(St.userAgent)||[0,0])[1]:0,chrome:!!tl,chrome_version:tl?+tl[1]:0,ios:nu,android:/Android\b/.test(St.userAgent),webkit:iu,safari:Eg,webkit_version:iu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:ra.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const D2=256;class Pi extends De{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return n&&(!(n instanceof Pi)||this.length-(t-e)+n.length>D2)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Pi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new tt(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return la(this.dom,e,t)}}class ci extends De{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(vg(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,s,o){return n&&(!(n instanceof ci&&n.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(Sg(this,e,t,n?n.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,s=0;for(let l of this.children){let a=n+l.length;a>e&&t.push(n<e?l.split(e-n):l),r<0&&n>=e&&(r=s),n=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new ci(this.mark,t,o)}domAtPos(e){return Mg(this,e)}coordsAt(e,t){return Dg(this,e,t)}}function la(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let r=e,s=e,o=0;e==0&&t<0||e==n&&t>=0?G.chrome||G.gecko||(e?(r--,o=1):s<n&&(s++,o=-1)):t<0?r--:s<n&&s++;let l=In(i,r,s).getClientRects();if(!l.length)return yg;let a=l[(o?o<0:t>=0)?0:l.length-1];return G.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,h=>h.width)||a),o?eh(a,o<0):a||null}class Ci extends De{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Ci)(e,t,n)}split(e){let t=Ci.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,s,o){return n&&(!(n instanceof Ci)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Ci&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ve.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):ve.empty}domAtPos(e){return e==0?tt.before(this.dom):tt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return yg;for(let s=e>0?n.length-1:0;r=n[s],!(e>0?s==0:s==n.length-1||r.top<r.bottom);s+=e>0?-1:1);return this.length?r:eh(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cg extends Ci{domAtPos(e){let{topView:t,text:n}=this.widget;return t?aa(e,0,t,n,(r,s)=>r.domAtPos(s),r=>new tt(n,Math.min(r,n.nodeValue.length))):new tt(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?Tg(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?aa(e,t,n,r,(s,o,l)=>s.coordsAt(o,l),(s,o)=>la(r,s,o)):la(r,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function aa(i,e,t,n,r,s){if(t instanceof ci){for(let o=t.dom.firstChild;o;o=o.nextSibling){let l=De.get(o);if(!l)return s(i,e);let a=Rn(o,n),h=l.length+(a?n.nodeValue.length:0);if(i<h||i==h&&l.getSide()<=0)return a?aa(i,e,l,n,r,s):r(l,i,e);i-=h}return r(t,t.length,-1)}else return t.dom==n?s(i,e):r(t,i,e)}function Tg(i,e,t,n){if(t instanceof ci)for(let r of t.children){let s=0,o=Rn(r.dom,n);if(Rn(r.dom,i))return s+(o?Tg(i,e,r,n):r.localPosFromDOM(i,e));s+=o?n.nodeValue.length:r.length}else if(t.dom==n)return Math.min(e,n.nodeValue.length);return t.localPosFromDOM(i,e)}class Nn extends De{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Nn&&e.side==this.side}split(){return new Nn(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return tt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=P2(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return ve.empty}}Pi.prototype.children=Ci.prototype.children=Nn.prototype.children=th;function P2(i,e){let t=i.parent,n=t?t.children.indexOf(i):-1;for(;t&&n>=0;)if(e<0?n>0:n<t.children.length){let r=t.children[n+e];if(r instanceof Pi){let s=r.coordsAt(e<0?r.length:0,e);if(s)return s}n+=e}else if(t instanceof ci&&t.parent)n=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let r=t.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function Mg(i,e){let t=i.dom,{children:n}=i,r=0;for(let s=0;r<n.length;r++){let o=n[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=n[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<n.length;s++){let o=n[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new tt(t,0)}function Og(i,e,t){let n,{children:r}=i;t>0&&e instanceof ci&&r.length&&(n=r[r.length-1])instanceof ci&&n.mark.eq(e.mark)?Og(n,e.children[0],t-1):(r.push(e),e.setParent(i)),i.length+=e.length}function Dg(i,e,t){let n=null,r=-1,s=null,o=-1;function l(h,c){for(let u=0,f=0;u<h.children.length&&f<=c;u++){let d=h.children[u],p=f+d.length;p>=c&&(d.children.length?l(d,c-f):!s&&(p>c||f==p&&d.getSide()>0)?(s=d,o=c-f):(f<c||f==p&&d.getSide()<0)&&(n=d,r=c-f)),f=p}}l(i,e);let a=(t<0?n:s)||n||s;return a?a.coordsAt(Math.max(0,a==n?r:o),t):L2(i)}function L2(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=Dr(e);return t[t.length-1]||null}function ha(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}function ih(i,e){if(i==e)return!0;if(!i||!e)return!1;let t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r of t)if(n.indexOf(r)==-1||i[r]!==e[r])return!1;return!0}function ca(i,e,t){let n=null;if(e)for(let r in e)t&&r in t||i.removeAttribute(n=r);if(t)for(let r in t)e&&e[r]==t[r]||i.setAttribute(n=r,t[r]);return!!n}class ui{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Te=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(Te||(Te={}));class he extends Ji{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new _o(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Zi(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,r;if(e.isBlockGap)n=-5e8,r=4e8;else{let{start:s,end:o}=Pg(e,t);n=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Zi(e,n,r,t,e.widget||null,!0)}static line(e){return new $r(e)}static set(e,t=!1){return Se.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}he.none=Se.empty;class _o extends he{constructor(e){let{start:t,end:n}=Pg(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof _o&&this.tagName==e.tagName&&this.class==e.class&&ih(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}_o.prototype.point=!1;class $r extends he{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof $r&&ih(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}$r.prototype.mapMode=Je.TrackBefore;$r.prototype.point=!0;class Zi extends he{constructor(e,t,n,r,s,o){super(t,n,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Je.TrackBefore:Je.TrackAfter:Je.TrackDel}get type(){return this.startSide<this.endSide?Te.WidgetRange:this.startSide<=0?Te.WidgetBefore:Te.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Zi&&R2(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Zi.prototype.point=!0;function Pg(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function R2(i,e){return i==e||!!(i&&e&&i.compare(e))}function ua(i,e,t,n=0){let r=t.length-1;r>=0&&t[r]+n>=i?t[r]=Math.max(t[r],e):t.push(i,e)}class ct extends De{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,s,o){if(n){if(!(n instanceof ct))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Sg(this,e,t,n?n.children:[],s,o),!0}split(e){let t=new ct;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)t.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ih(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Og(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=ha(t,this.attrs||{})),n&&(this.attrs=ha({class:n},this.attrs||{}))}domAtPos(e){return Mg(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(vg(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(ca(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&De.get(n)instanceof ci;)n=n.lastChild;if(!n||!this.length||n.nodeName!="BR"&&((t=De.get(n))===null||t===void 0?void 0:t.isEditable)==!1&&(!G.ios||!this.children.some(r=>r instanceof Pi))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Pi)||/[^ -~]/.test(t.text))return null;let n=Dr(t.dom);if(n.length!=1)return null;e+=n[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return Dg(this,e,t)}become(e){return!1}get type(){return Te.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let s=e.children[n],o=r+s.length;if(o>=t){if(s instanceof ct)return s;if(o>t)break}r=o+s.breakAfter}return null}}class Ki extends De{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,s,o){return n&&(!(n instanceof Ki)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?tt.before(this.dom):tt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Ki(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return th}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ve.empty}domBoundsAround(){return null}become(e){return e instanceof Ki&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nh{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ki&&e.type==Te.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ct),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(as(new Nn(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(as(new Pi(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,s,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Zi){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(n instanceof Zi)if(n.block){let{type:a}=n;a==Te.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ki(n.widget||new ru("div"),l,a))}else{let a=Ci.create(n.widget||new ru("span"),l,l?0:n.startSide),h=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<t||n.startSide>0),c=!a.isEditable&&(e<t||n.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!h&&(this.pendingBuffer=0),this.flushBuffer(r),h&&(u.append(as(new Nn(1),r),s),s=r.length+Math.max(0,s-r.length)),u.append(as(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,n,r,s){let o=new nh(e,t,n,s);return o.openEnd=Se.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function as(i,e){for(let t of e)i=new ci(t,[i],i.length);return i}class ru extends ui{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const Lg=q.define(),Rg=q.define(),Ig=q.define(),Ng=q.define(),fa=q.define(),Bg=q.define(),Hg=q.define({combine:i=>i.some(e=>e)}),Fg=q.define({combine:i=>i.some(e=>e)});class Js{constructor(e,t="nearest",n="nearest",r=5,s=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Js(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const su=ue.define({map:(i,e)=>i.map(e)});function jt(i,e,t){let n=i.facet(Ng);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const yo=q.define({combine:i=>i.length?i[0]:!0});let I2=0;const cr=q.define();class it{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:s}=t||{};return new it(I2++,e,n,o=>{let l=[cr.of(o)];return s&&l.push(Lr.of(a=>{let h=a.plugin(o);return h?s(h):he.none})),r&&l.push(r(o)),l})}static fromClass(e,t){return it.define(n=>new e(n),t)}}class il{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(jt(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){jt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){jt(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Vg=q.define(),Ug=q.define(),Lr=q.define(),jg=q.define(),zg=q.define(),ur=q.define();class hi{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new hi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],h=o-l,c=a?a.fromB:1e9;for(;s<t.length&&t[s]<c;){let u=t[s],f=t[s+1],d=Math.max(l,u),p=Math.min(c,f);if(d<=p&&new hi(d+h,p+h,d,p).addToSet(n),f>c)break;s+=2}if(!a)return n;new hi(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,l=a.toB}}}class Ys{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ze.empty(this.startState.doc.length);for(let o of n)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,l,a,h)=>r.push(new hi(o,l,a,h))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,n){return new Ys(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Ie=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(Ie||(Ie={}));const da=Ie.LTR,N2=Ie.RTL;function Wg(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const B2=Wg("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),H2=Wg("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),pa=Object.create(null),Jt=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);pa[e]=t,pa[t]=-e}function F2(i){return i<=247?B2[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?H2[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8203?256:64336<=i&&i<=65023?4:i==8204?256:1}const V2=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Cn{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?N2:da}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==n)return o;(s<0||(r!=0?r<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Re=[];function U2(i,e){let t=i.length,n=e==da?1:2,r=e==da?2:1;if(!i||n==1&&!V2.test(i))return Gg(t);for(let o=0,l=n,a=n;o<t;o++){let h=F2(i.charCodeAt(o));h==512?h=l:h==8&&a==4&&(h=16),Re[o]=h==4?2:h,h&7&&(a=h),l=h}for(let o=0,l=n,a=n;o<t;o++){let h=Re[o];if(h==128)o<t-1&&l==Re[o+1]&&l&24?h=Re[o]=l:Re[o]=256;else if(h==64){let c=o+1;for(;c<t&&Re[c]==64;)c++;let u=o&&l==8||c<t&&Re[c]==8?a==1?1:8:256;for(let f=o;f<c;f++)Re[f]=u;o=c-1}else h==8&&a==1&&(Re[o]=1);l=h,h&7&&(a=h)}for(let o=0,l=0,a=0,h,c,u;o<t;o++)if(c=pa[h=i.charCodeAt(o)])if(c<0){for(let f=l-3;f>=0;f-=3)if(Jt[f+1]==-c){let d=Jt[f+2],p=d&2?n:d&4?d&1?r:n:0;p&&(Re[o]=Re[Jt[f]]=p),l=f;break}}else{if(Jt.length==189)break;Jt[l++]=o,Jt[l++]=h,Jt[l++]=a}else if((u=Re[o])==2||u==1){let f=u==n;a=f?0:1;for(let d=l-3;d>=0;d-=3){let p=Jt[d+2];if(p&2)break;if(f)Jt[d+2]|=2;else{if(p&4)break;Jt[d+2]|=4}}}for(let o=0;o<t;o++)if(Re[o]==256){let l=o+1;for(;l<t&&Re[l]==256;)l++;let a=(o?Re[o-1]:n)==1,h=(l<t?Re[l]:n)==1,c=a==h?a?1:2:n;for(let u=o;u<l;u++)Re[u]=c;o=l-1}let s=[];if(n==1)for(let o=0;o<t;){let l=o,a=Re[o++]!=1;for(;o<t&&a==(Re[o]!=1);)o++;if(a)for(let h=o;h>l;){let c=h,u=Re[--h]!=2;for(;h>l&&u==(Re[h-1]!=2);)h--;s.push(new Cn(h,c,u?2:1))}else s.push(new Cn(l,o,0))}else for(let o=0;o<t;){let l=o,a=Re[o++]==2;for(;o<t&&a==(Re[o]==2);)o++;s.push(new Cn(l,o,a?1:2))}return s}function Gg(i){return[new Cn(0,i,0)]}let qg="";function j2(i,e,t,n,r){var s;let o=n.head-i.from,l=-1;if(o==0){if(!r||!i.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==i.length){if(r)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),l=e.length-1)}l<0&&(l=Cn.find(e,o,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc));let a=e[l];o==a.side(r,t)&&(a=e[l+=r?1:-1],o=a.side(!r,t));let h=r==(a.dir==t),c=At(i.text,o,h);if(qg=i.text.slice(Math.min(o,c),Math.max(o,c)),c!=a.side(r,t))return C.cursor(c+i.from,h?-1:1,a.level);let u=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!u&&a.level!=t?C.cursor(r?i.to:i.from,r?-1:1,t):u&&u.level<a.level?C.cursor(u.side(!r,t)+i.from,r?1:-1,u.level):C.cursor(c+i.from,r?-1:1,a.level)}const Ti="￿";class $g{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(be.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ti}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let s=r.nextSibling;if(s==t)break;let o=De.get(r),l=De.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:ou(r))||ou(s)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=s}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(l=r.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);n=s+o}}readNode(e){if(e.cmIgnore)return;let t=De.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let r=n.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function ou(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}class lu{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class au extends De{constructor(e){super(),this.view=e,this.compositionDeco=he.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ct],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new hi(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=he.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=W2(this.view,e.changes)),(G.ie||G.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=this.decorations,r=this.updateDeco(),s=K2(n,r,e.changes);return t=hi.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=G.chrome||G.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||n.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Ki&&s.widget instanceof hu&&r.push(s.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let r=e.length-1;;r--){let s=r>=0?e[r]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:h}=s,{content:c,breakAtStart:u,openStart:f,openEnd:d}=nh.build(this.view.state.doc,a,h,this.decorations,this.dynamicDecorationMap),{i:p,off:g}=n.findPos(l,1),{i:m,off:b}=n.findPos(o,-1);xg(this,m,b,p,g,c,u,f,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.domAtPos(r.anchor),o=r.empty?s:this.domAtPos(r.head);if(G.gecko&&r.empty&&z2(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new tt(a,0),n=!0}let l=this.view.observer.selectionRange;(n||!l.focusNode||!Ks(s.node,s.offset,l.anchorNode,l.anchorOffset)||!Ks(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{G.android&&G.chrome&&this.dom.contains(l.focusNode)&&X2(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=$s(this.view.root);if(a)if(r.empty){if(G.gecko){let h=q2(s.node,s.offset);if(h&&h!=3){let c=Xg(s.node,s.offset,h==1?1:-1);c&&(s=new tt(c,h==1?0:c.nodeValue.length))}}a.collapse(s.node,s.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(a.extend){a.collapse(s.node,s.offset);try{a.extend(o.node,o.offset)}catch{}}else{let h=document.createRange();r.anchor>r.head&&([s,o]=[o,s]),h.setEnd(o.node,o.offset),h.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(h)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new tt(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new tt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,n=$s(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=ct.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),h=this.coordsAt(t.head,1);if(!a||!h||a.bottom>h.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Ps(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let n=De.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(n<r.length||r instanceof ct)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=n-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Te.WidgetBefore&&s.type!=Te.WidgetAfter&&(!r||t==2||this.children[r-1].breakAfter||this.children[r-1].type==Te.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ie.LTR;for(let h=0,c=0;c<this.children.length;c++){let u=this.children[c],f=h+u.length;if(f>r)break;if(h>=n){let d=u.dom.getBoundingClientRect();if(t.push(d.height),o){let p=u.dom.lastChild,g=p?Dr(p):[];if(g.length){let m=g[g.length-1],b=a?m.right-d.left:d.right-m.left;b>l&&(l=b,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=f)}}}h=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ie.RTL:Ie.LTR}measureTextSize(){for(let r of this.children)if(r instanceof ct){let s=r.measureTextSize();if(s)return s}let e=document.createElement("div"),t,n;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=Dr(e.firstChild)[0];t=e.getBoundingClientRect().height,n=r?r.width/27:7,e.remove()}),{lineHeight:t,charWidth:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new kg(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>n){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(he.replace({widget:new hu(l),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!s)break;n=s.to+1}return he.set(e)}updateDeco(){let e=this.view.state.facet(Lr).map((t,n)=>(this.dynamicDecorationMap[n]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!n)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,r.left),top:Math.min(n.top,r.top),right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)});let s=0,o=0,l=0,a=0;for(let c of this.view.state.facet(zg).map(u=>u(this.view)))if(c){let{left:u,right:f,top:d,bottom:p}=c;u!=null&&(s=Math.max(s,u)),f!=null&&(o=Math.max(o,f)),d!=null&&(l=Math.max(l,d)),p!=null&&(a=Math.max(a,p))}let h={left:n.left-s,top:n.top-l,right:n.right+o,bottom:n.bottom+a};C2(this.view.scrollDOM,h,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Ie.LTR)}}function z2(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}class hu extends ui{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Kg(i){let e=i.observer.selectionRange,t=e.focusNode&&Xg(e.focusNode,e.focusOffset,0);if(!t)return null;let n=i.docView.nearest(t);if(!n)return null;if(n instanceof ct){let r=t;for(;r.parentNode!=n.dom;)r=r.parentNode;let s=r.previousSibling;for(;s&&!De.get(s);)s=s.previousSibling;let o=s?De.get(s).posAtEnd:n.posAtStart;return{from:o,to:o,node:r,text:t}}else{for(;;){let{parent:s}=n;if(!s)return null;if(s instanceof ct)break;n=s}let r=n.posAtStart;return{from:r,to:r+n.length,node:n.dom,text:t}}}function W2(i,e){let t=Kg(i);if(!t)return he.none;let{from:n,to:r,node:s,text:o}=t,l=e.mapPos(n,1),a=Math.max(l,e.mapPos(r,-1)),{state:h}=i,c=s.nodeType==3?s.nodeValue:new $g([],h).readRange(s.firstChild,null).text;if(a-l<c.length)if(h.doc.sliceString(l,Math.min(h.doc.length,l+c.length),Ti)==c)a=l+c.length;else if(h.doc.sliceString(Math.max(0,a-c.length),a,Ti)==c)l=a-c.length;else return he.none;else if(h.doc.sliceString(l,a,Ti)!=c)return he.none;let u=De.get(s);return u instanceof Cg?u=u.widget.topView:u&&(u.parent=null),he.set(he.replace({widget:new G2(s,o,u),inclusive:!0}).range(l,a))}class G2 extends ui{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Cg}}function Xg(i,e,t){for(;;){if(i.nodeType==3)return i;if(i.nodeType==1&&e>0&&t<=0)i=i.childNodes[e-1],e=Pr(i);else if(i.nodeType==1&&e<i.childNodes.length&&t>=0)i=i.childNodes[e],e=0;else return null}}function q2(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}class $2{constructor(){this.changes=[]}compareRange(e,t){ua(e,t,this.changes)}comparePoint(e,t){ua(e,t,this.changes)}}function K2(i,e,t){let n=new $2;return Se.compare(i,e,t,n),n.changes}function X2(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function J2(i,e,t=1){let n=i.charCategorizer(e),r=i.doc.lineAt(e),s=e-r.from;if(r.length==0)return C.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,l=s;t<0?o=At(r.text,s,!1):l=At(r.text,s);let a=n(r.text.slice(o,l));for(;o>0;){let h=At(r.text,o,!1);if(n(r.text.slice(h,o))!=a)break;o=h}for(;l<r.length;){let h=At(r.text,l);if(n(r.text.slice(l,h))!=a)break;l=h}return C.range(o+r.from,l+r.from)}function Y2(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function Z2(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function nl(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function cu(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function uu(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function ma(i,e,t){let n,r,s,o,l=!1,a,h,c,u;for(let p=i.firstChild;p;p=p.nextSibling){let g=Dr(p);for(let m=0;m<g.length;m++){let b=g[m];r&&nl(r,b)&&(b=cu(uu(b,r.bottom),r.top));let w=Y2(e,b),y=Z2(t,b);if(w==0&&y==0)return p.nodeType==3?fu(p,e,t):ma(p,e,t);(!n||o>y||o==y&&s>w)&&(n=p,r=b,s=w,o=y,l=!w||(w>0?m<g.length-1:m>0)),w==0?t>b.bottom&&(!c||c.bottom<b.bottom)?(a=p,c=b):t<b.top&&(!u||u.top>b.top)&&(h=p,u=b):c&&nl(c,b)?c=uu(c,b.bottom):u&&nl(u,b)&&(u=cu(u,b.top))}}if(c&&c.bottom>=t?(n=a,r=c):u&&u.top<=t&&(n=h,r=u),!n)return{node:i,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(n.nodeType==3)return fu(n,f,t);if(l&&n.contentEditable!="false")return ma(n,f,t);let d=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(r.left+r.right)/2?1:0);return{node:i,offset:d}}function fu(i,e,t){let n=i.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<n;l++){let a=In(i,l,l+1).getClientRects();for(let h=0;h<a.length;h++){let c=a[h];if(c.top==c.bottom)continue;o||(o=e-c.left);let u=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<s){let f=e>=(c.left+c.right)/2,d=f;if((G.chrome||G.gecko)&&In(i,l).getBoundingClientRect().left==c.right&&(d=!f),u<=0)return{node:i,offset:l+(d?1:0)};r=l+(d?1:0),s=u}}}return{node:i,offset:r>-1?r:o>0?i.nodeValue.length:0}}function Jg(i,{x:e,y:t},n,r=-1){var s;let o=i.contentDOM.getBoundingClientRect(),l=o.top+i.viewState.paddingTop,a,{docHeight:h}=i.viewState,c=t-l;if(c<0)return 0;if(c>h)return i.state.doc.length;for(let b=i.defaultLineHeight/2,w=!1;a=i.elementAtHeight(c),a.type!=Te.Text;)for(;c=r>0?a.bottom+b:a.top-b,!(c>=0&&c<=h);){if(w)return n?null:0;w=!0,r=-r}t=l+c;let u=a.from;if(u<i.viewport.from)return i.viewport.from==0?0:n?null:du(i,o,a,e,t);if(u>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:n?null:du(i,o,a,e,t);let f=i.dom.ownerDocument,d=i.root.elementFromPoint?i.root:f,p=d.elementFromPoint(e,t);p&&!i.contentDOM.contains(p)&&(p=null),p||(e=Math.max(o.left+1,Math.min(o.right-1,e)),p=d.elementFromPoint(e,t),p&&!i.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&((s=i.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let b=f.caretPositionFromPoint(e,t);b&&({offsetNode:g,offset:m}=b)}else if(f.caretRangeFromPoint){let b=f.caretRangeFromPoint(e,t);b&&({startContainer:g,startOffset:m}=b,(!i.contentDOM.contains(g)||G.safari&&Q2(g,m,e)||G.chrome&&ek(g,m,e))&&(g=void 0))}}if(!g||!i.docView.dom.contains(g)){let b=ct.find(i.docView,u);if(!b)return c>a.top+a.height/2?a.to:a.from;({node:g,offset:m}=ma(b.dom,e,t))}return i.docView.posFromDOM(g,m)}function du(i,e,t,n,r){let s=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let l=Math.floor((r-t.top)/i.defaultLineHeight);s+=l*i.viewState.heightOracle.lineLength}let o=i.state.sliceDoc(t.from,t.to);return t.from+ta(o,s,i.state.tabSize)}function Q2(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let r=i.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return In(i,n-1,n).getBoundingClientRect().left>t}function ek(i,e,t){if(e!=0)return!1;for(let r=i;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let n=i.nodeType==1?i.getBoundingClientRect():In(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function tk(i,e,t,n){let r=i.state.doc.lineAt(e.head),s=!n||!i.lineWrapping?null:i.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=i.dom.getBoundingClientRect(),h=i.textDirectionAt(r.from),c=i.posAtCoords({x:t==(h==Ie.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(c!=null)return C.cursor(c,t?-1:1)}let o=ct.find(i.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?r.to:r.from;return C.cursor(l,t?-1:1)}function pu(i,e,t,n){let r=i.state.doc.lineAt(e.head),s=i.bidiSpans(r),o=i.textDirectionAt(r.from);for(let l=e,a=null;;){let h=j2(r,s,o,l,t),c=qg;if(!h){if(r.number==(t?i.state.doc.lines:1))return l;c=`
`,r=i.state.doc.line(r.number+(t?1:-1)),s=i.bidiSpans(r),h=C.cursor(t?r.from:r.to)}if(a){if(!a(c))return l}else{if(!n)return h;a=n(c)}l=h}}function ik(i,e,t){let n=i.state.charCategorizer(e),r=n(t);return s=>{let o=n(s);return r==Pt.Space&&(r=o),r==o}}function nk(i,e,t,n){let r=e.head,s=t?1:-1;if(r==(t?i.state.doc.length:0))return C.cursor(r,e.assoc);let o=e.goalColumn,l,a=i.contentDOM.getBoundingClientRect(),h=i.coordsAtPos(r),c=i.documentTop;if(h)o==null&&(o=h.left-a.left),l=s<0?h.top:h.bottom;else{let d=i.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,i.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+c}let u=a.left+o,f=n??i.defaultLineHeight>>1;for(let d=0;;d+=10){let p=l+(f+d)*s,g=Jg(i,{x:u,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r))return C.cursor(g,e.assoc,void 0,o)}}function rl(i,e,t){let n=i.state.facet(jg).map(r=>r(i));for(;;){let r=!1;for(let s of n)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.head>t.from?C.cursor(o,1):C.cursor(l,-1),r=!0)});if(!r)return t}}class rk{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in $e){let n=$e[t];e.contentDOM.addEventListener(t,r=>{!mu(e,r)||this.ignoreDuringComposition(r)||t=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r))},ga[t]),this.registeredEvents.push(t)}G.chrome&&G.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,G.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let s of t)if(r=(n=s.update(e).spec)===null||n===void 0?void 0:n.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{mu(e,l)&&this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(o){jt(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(s){jt(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(G.android&&G.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return G.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((n=Yg.find(r=>r.keyCode==t.keyCode))&&!t.ctrlKey||sk.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=n||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,En(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:G.safari&&!G.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Yg=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],sk="dthko",Zg=[16,17,18,20,91,92,224,225];class ok{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(be.allowMultipleSelections)&&lk(e,t),this.dragMove=ak(e,t),this.dragging=hk(e,t)&&i0(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function lk(i,e){let t=i.state.facet(Lg);return t.length?t[0](e):G.mac?e.metaKey:e.ctrlKey}function ak(i,e){let t=i.state.facet(Rg);return t.length?t[0](e):G.mac?!e.altKey:!e.ctrlKey}function hk(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=$s(i.root);if(!n||n.rangeCount==0)return!0;let r=n.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function mu(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=De.get(t))&&n.ignoreEvent(e))return!1;return!0}const $e=Object.create(null),ga=Object.create(null),Qg=G.ie&&G.ie_version<15||G.ios&&G.webkit_version<604;function ck(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),e0(i,t.value)},50)}function e0(i,e){let{state:t}=i,n,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(ba!=null&&t.selection.ranges.every(a=>a.empty)&&ba==s.toString()){let a=-1;n=t.changeByRange(h=>{let c=t.doc.lineAt(h.from);if(c.from==a)return{range:h};a=c.from;let u=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:u},range:C.cursor(h.from+u.length)}})}else o?n=t.changeByRange(a=>{let h=s.line(r++);return{changes:{from:a.from,to:a.to,insert:h.text},range:C.cursor(a.from+h.length)}}):n=t.replaceSelection(s);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}$e.keydown=(i,e)=>{i.inputState.setSelectionOrigin("select"),e.keyCode==27?i.inputState.lastEscPress=Date.now():Zg.indexOf(e.keyCode)<0&&(i.inputState.lastEscPress=0)};$e.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};$e.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};ga.touchstart=ga.touchmove={passive:!0};$e.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let n of i.state.facet(Ig))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=dk(i,e)),t){let n=i.root.activeElement!=i.contentDOM;n&&i.observer.ignore(()=>wg(i.contentDOM)),i.inputState.startMouseSelection(new ok(i,e,t,n))}};function gu(i,e,t,n){if(n==1)return C.cursor(e,t);if(n==2)return J2(i.state,e,t);{let r=ct.find(i.docView,e),s=i.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<i.state.doc.length&&l==s.to&&l++,C.range(o,l)}}let t0=(i,e)=>i>=e.top&&i<=e.bottom,bu=(i,e,t)=>t0(e,t)&&i>=t.left&&i<=t.right;function uk(i,e,t,n){let r=ct.find(i.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&bu(t,n,o))return-1;let l=r.coordsAt(s,1);return l&&bu(t,n,l)?1:o&&t0(n,o)?-1:1}function _u(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:uk(i,t,e.clientX,e.clientY)}}const fk=G.ie&&G.ie_version<=11;let yu=null,wu=0,vu=0;function i0(i){if(!fk)return i.detail;let e=yu,t=vu;return yu=i,vu=Date.now(),wu=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(wu+1)%3:1}function dk(i,e){let t=_u(i,e),n=i0(e),r=i.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),r=r.map(l.changes),o=null)},get(l,a,h){let c;o&&l.clientX==o.clientX&&l.clientY==o.clientY?c=s:(c=s=_u(i,l),o=l);let u=gu(i,c.pos,c.bias,n);if(t.pos!=c.pos&&!a){let f=gu(i,t.pos,t.bias,n),d=Math.min(f.from,u.from),p=Math.max(f.to,u.to);u=d<u.from?C.range(d,p):C.range(p,d)}return a?r.replaceRange(r.main.extend(u.from,u.to)):h&&r.ranges.length>1&&r.ranges.some(f=>f.eq(u))?pk(r,u):h?r.addRange(u):C.create([u])}}}function pk(i,e){for(let t=0;;t++)if(i.ranges[t].eq(e))return C.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}$e.dragstart=(i,e)=>{let{selection:{main:t}}=i.state,{mouseSelection:n}=i.inputState;n&&(n.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",i.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function ku(i,e,t,n){if(!t)return;let r=i.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=i.inputState,o=n&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:t},a=i.state.changes(o?[o,l]:l);i.focus(),i.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}$e.drop=(i,e)=>{if(!e.dataTransfer)return;if(i.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let n=Array(t.length),r=0,s=()=>{++r==t.length&&ku(i,e,n.filter(o=>o!=null).join(i.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(n[o]=l.result),s()},l.readAsText(t[o])}}else ku(i,e,e.dataTransfer.getData("Text"),!0)};$e.paste=(i,e)=>{if(i.state.readOnly)return e.preventDefault();i.observer.flush();let t=Qg?null:e.clipboardData;t?(e0(i,t.getData("text/plain")),e.preventDefault()):ck(i)};function mk(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function gk(i){let e=[],t=[],n=!1;for(let r of i.selection.ranges)r.empty||(e.push(i.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of i.selection.ranges){let o=i.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(i.doc.length,o.to+1)})),r=o.number}n=!0}return{text:e.join(i.lineBreak),ranges:t,linewise:n}}let ba=null;$e.copy=$e.cut=(i,e)=>{let{text:t,ranges:n,linewise:r}=gk(i.state);if(!t&&!r)return;ba=r?t:null;let s=Qg?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):mk(i,t),e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"})};function n0(i){setTimeout(()=>{i.hasFocus!=i.inputState.notifiedFocused&&i.update([])},10)}$e.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),n0(i)};$e.blur=i=>{i.observer.clearSelectionRange(),n0(i)};$e.compositionstart=$e.compositionupdate=i=>{i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0)};$e.compositionend=i=>{i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionFirstChange=null,G.chrome&&G.android&&i.observer.flushSoon(),setTimeout(()=>{i.inputState.composing<0&&i.docView.compositionDeco.size&&i.update([])},50)};$e.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};$e.beforeinput=(i,e)=>{var t;let n;if(G.chrome&&G.android&&(n=Yg.find(r=>r.inputType==e.inputType))&&(i.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}};const xu=["pre-wrap","normal","pre-line","break-spaces"];class bk{constructor(){this.doc=ve.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xu.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,n,r,s){let o=xu.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,l){this.heightSamples={};for(let a=0;a<s.length;a++){let h=s[a];h<0?a++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class _k{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Mi{constructor(e,t,n,r,s){this.from=e,this.length=t,this.top=n,this.height=r,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Mi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Oe=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(Oe||(Oe={}));const Ls=.001;class ut{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Ls&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return ut.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let s=this;for(let o=r.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:h,toB:c}=r[o],u=s.lineAt(l,Oe.ByPosNoHeight,t,0,0),f=u.to>=a?u:s.lineAt(a,Oe.ByPosNoHeight,t,0,0);for(c+=f.to-a,a=f.to;o>0&&u.from<=r[o-1].toA;)l=r[o-1].fromA,h=r[o-1].fromB,o--,l<u.from&&(u=s.lineAt(l,Oe.ByPosNoHeight,t,0,0));h+=u.from-l,l=u.from;let d=rh.build(n,e,h,c);s=s.replace(l,a,d)}return s.updateHeight(n,0)}static empty(){return new xt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,r=0,s=0;for(;;)if(t==n)if(r>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),n+=1+l.break,r-=l.size}else if(s>r*2){let l=e[n];l.break?e.splice(n,1,l.left,null,l.right):e.splice(n,1,l.left,l.right),n+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[t++];l&&(r+=l.size)}else{let l=e[--n];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new yk(ut.of(e.slice(0,t)),o,ut.of(e.slice(n)))}}ut.prototype.size=1;class r0 extends ut{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Mi(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,s){return this.blockAt(0,n,r,s)}forEachLine(e,t,n,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,n,r,s))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class xt extends r0{constructor(e,t){super(e,t,Te.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return n.length==1&&(r instanceof xt||r instanceof Ke&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ke?r=new xt(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):ut.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ke extends ut{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,r),a=Math.max(0,Math.min(o-s,Math.floor((e-n)/l))),{from:h,length:c}=t.line(s+a);return new Mi(h,c,n+l*a,l,Te.Text)}lineAt(e,t,n,r,s){if(t==Oe.ByHeight)return this.blockAt(e,n,r,s);if(t==Oe.ByPosNoHeight){let{from:u,to:f}=n.lineAt(e);return new Mi(u,f-u,0,0,Te.Text)}let{firstLine:o,lineHeight:l}=this.lines(n,s),{from:a,length:h,number:c}=n.lineAt(e);return new Mi(a,h,r+l*(c-o),l,Te.Text)}forEachLine(e,t,n,r,s,o){let{firstLine:l,lineHeight:a}=this.lines(n,s);for(let h=Math.max(e,s),c=Math.min(s+this.length,t);h<=c;){let u=n.lineAt(h);h==e&&(r+=a*(u.number-l)),o(new Mi(u.from,u.length,r,a,Te.Text)),r+=a,h=u.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let s=n[n.length-1];s instanceof Ke?n[n.length-1]=new Ke(s.length+r):n.push(null,new Ke(r-1))}if(e>0){let s=n[0];s instanceof Ke?n[0]=new Ke(e+s.length):n.unshift(new Ke(e-1),null)}return ut.of(n)}decomposeLeft(e,t){t.push(new Ke(e-1),null)}decomposeRight(e,t){t.push(null,new Ke(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1,h=e.heightChanged;for(r.from>t&&o.push(new Ke(r.from-t-1).updateHeight(e,t));l<=s&&r.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=Ls&&(a=-2);let d=new xt(u,f);d.outdated=!1,o.push(d),l+=u+1}l<=s&&o.push(null,new Ke(s-l).updateHeight(e,l));let c=ut.of(o);return e.heightChanged=h||a<0||Math.abs(c.height-this.height)>=Ls||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Ls,c}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class yk extends ut{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,r){let s=n+this.left.height;return e<s?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,n,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=t==Oe.ByHeight?e<o:e<l,h=a?this.left.lineAt(e,t,n,r,s):this.right.lineAt(e,t,n,o,l);if(this.break||(a?h.to<l:h.from>l))return h;let c=t==Oe.ByPosNoHeight?Oe.ByPosNoHeight:Oe.ByPos;return a?h.join(this.right.lineAt(l,c,n,o,l)):this.left.lineAt(l,c,n,r,s).join(h)}forEachLine(e,t,n,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,s,o),t>=a&&this.right.forEachLine(e,t,n,l,a,o);else{let h=this.lineAt(a,Oe.ByPos,n,r,s);e<h.from&&this.left.forEachLine(e,h.from-1,n,r,s,o),h.to>=e&&h.from<=t&&o(h),t>h.to&&this.right.forEachLine(h.to+1,t,n,l,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of n)s.push(l);if(e>0&&Su(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),Su(s,l)}return ut.of(s)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ut.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return r&&r.from<=t+s.length&&r.more?a=s=s.updateHeight(e,t,n,r):s.updateHeight(e,t,n),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,n,r):o.updateHeight(e,l,n),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Su(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Ke&&(n=i[e+1])instanceof Ke&&i.splice(e-1,3,new Ke(t.length+1+n.length))}const wk=5;class rh{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof xt?r.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new xt(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;n.block?this.addBlock(new r0(s,r,n.type)):(s||r>=wk)&&this.addLineDeco(r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new xt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Ke(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof xt)return e;let t=new xt(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==Te.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Te.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof xt)&&!this.isCovered?this.nodes.push(new xt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let r of this.nodes)r instanceof xt&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let s=new rh(n,e);return Se.spans(t,n,r,s,0),s.finish(n)}}function vk(i,e,t){let n=new kk;return Se.compare(i,e,t,n,0),n.changes}class kk{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&ua(e,t,this.changes,5)}}function xk(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,r=n.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let h=i.parentNode;h&&h!=n.body;)if(h.nodeType==1){let c=h,u=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&u.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=h==i.parentNode?f.bottom:Math.min(a,f.bottom)}h=u.position=="absolute"||u.position=="fixed"?c.offsetParent:c.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function Sk(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class sl{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],s=t[n];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return he.replace({widget:new Ak(this.size,e)}).range(this.from,this.to)}}class Ak extends ui{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Au{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new bk,this.scaler=Eu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ie.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Lr).filter(t=>typeof t!="function"),this.heightMap=ut.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle.setDoc(e.doc),[new hi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=he.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new hs(s,o))}}this.viewports=e.sort((n,r)=>n.from-r.from),this.scaler=this.heightMap.height<=7e6?Eu:new Tk(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:fr(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Lr).filter(h=>typeof h!="function");let r=e.changedRanges,s=hi.extendWithRanges(r,vk(n,this.stateDeco,e?e.changes:ze.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Fg)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Ie.RTL:Ie.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,h=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;(this.paddingTop!=c||this.paddingBottom!=u)&&(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let f=(this.printing?Sk:xk)(t,this.paddingTop),d=f.top-this.pixelViewport.top,p=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let m=t.clientWidth;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let w=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(w)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:y,charWidth:k}=e.docView.measureTextSize();o=y>0&&r.refresh(s,y,k,m/k,w),o&&(e.docView.minWidth=0,a|=8)}d>0&&p>0?h=Math.max(d,p):d<0&&p<0&&(h=Math.min(d,p)),r.heightChanged=!1;for(let y of this.viewports){let k=y.from==this.viewport.from?w:e.docView.measureVisibleLineHeights(y);this.heightMap=o?ut.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle,[new hi(0,0,0,e.state.doc.length)]):this.heightMap.updateHeight(r,0,o,new _k(y.from,k))}r.heightChanged&&(a|=2)}let b=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(this.viewport=this.getViewport(h,this.scrollTarget)),this.updateForViewport(),(a&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new hs(r.lineAt(o-n*1e3,Oe.ByHeight,s,0,0).from,r.lineAt(l+(1-n)*1e3,Oe.ByHeight,s,0,0).to);if(t){let{head:h}=t.range;if(h<a.from||h>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(h,Oe.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&h<a.from?f=u.top:f=u.bottom-c,a=new hs(r.lineAt(f-1e3/2,Oe.ByHeight,s,0,0).from,r.lineAt(f+c+1e3/2,Oe.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new hs(this.heightMap.lineAt(n,Oe.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Oe.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Oe.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,Oe.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(n,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new sl(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ie.LTR&&!n)return[];let l=[],a=(h,c,u,f)=>{if(c-h<s)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let m of p)if(m>h&&m<c){a(h,m-10,u,f),a(m+10,c,u,f);return}let g=Ck(e,m=>m.from>=u.from&&m.to<=u.to&&Math.abs(m.from-h)<s&&Math.abs(m.to-c)<s&&!p.some(b=>m.from<b&&m.to>b));if(!g){if(c<u.to&&t&&n&&t.visibleRanges.some(m=>m.from<=c&&m.to>=c)){let m=t.moveToLineBoundary(C.cursor(c),!1,!0).head;m>h&&(c=m)}g=new sl(h,c,this.gapSize(u,h,c,f))}l.push(g)};for(let h of this.viewportLines){if(h.length<o)continue;let c=Ek(h.from,h.to,this.stateDeco);if(c.total<o)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,f,d;if(n){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,m;if(u!=null){let b=us(c,u),w=((this.visibleBottom-this.visibleTop)/2+p)/h.height;g=b-w,m=b+w}else g=(this.visibleTop-h.top-p)/h.height,m=(this.visibleBottom-h.top+p)/h.height;f=cs(c,g),d=cs(c,m)}else{let p=c.total*this.heightOracle.charWidth,g=r*this.heightOracle.charWidth,m,b;if(u!=null){let w=us(c,u),y=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;m=w-y,b=w+y}else m=(this.pixelViewport.left-g)/p,b=(this.pixelViewport.right+g)/p;f=cs(c,m),d=cs(c,b)}f>h.from&&a(h.from,f,h,c),d<h.to&&a(d,h.to,h,c)}return l}gapSize(e,t,n,r){let s=us(r,n)-us(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){sl.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=he.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Se.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||fr(this.heightMap.lineAt(e,Oe.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return fr(this.heightMap.lineAt(this.scaler.fromDOM(e),Oe.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return fr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class hs{constructor(e,t){this.from=e,this.to=t}}function Ek(i,e,t){let n=[],r=i,s=0;return Se.spans(t,i,e,{span(){},point(o,l){o>r&&(n.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(n.push({from:r,to:e}),s+=e-r),{total:s,ranges:n}}function cs({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(n<=l)return s+n;n-=l}}function us(i,e){let t=0;for(let{from:n,to:r}of i.ranges){if(e<=r){t+=e-n;break}t+=r-n}return t/i.total}function Ck(i,e){for(let t of i)if(e(t))return t}const Eu={toDOM(i){return i},fromDOM(i){return i},scale:1};class Tk{constructor(e,t,n){let r=0,s=0,o=0;this.viewports=n.map(({from:l,to:a})=>{let h=t.lineAt(l,Oe.ByPos,e,0,0).top,c=t.lineAt(a,Oe.ByPos,e,0,0).bottom;return r+=c-h,{from:l,to:a,top:h,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return n+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,r=s.domBottom}}}function fr(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new Mi(i.from,i.length,t,n-t,Array.isArray(i.type)?i.type.map(r=>fr(r,e)):i.type)}const fs=q.define({combine:i=>i.join(" ")}),_a=q.define({combine:i=>i.indexOf(!0)>-1}),ya=Oi.newName(),s0=Oi.newName(),o0=Oi.newName(),l0={"&light":"."+s0,"&dark":"."+o0};function wa(i,e,t){return new Oi(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,r=>{if(r=="&")return i;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):i+" "+n}})}const Mk=wa("."+ya,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},l0);class Ok{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(t>-1&&!e.state.readOnly&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let l=s||o?[]:Pk(e),a=new $g(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=Lk(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Rn(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),h=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Rn(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=C.single(h,a)}}}function a0(i,e){let t,{newSel:n}=e,r=i.state.selection.main;if(e.bounds){let{from:s,to:o}=e.bounds,l=r.from,a=null;(i.inputState.lastKeyCode===8&&i.inputState.lastKeyTime>Date.now()-100||G.android&&e.text.length<o-s)&&(l=r.to,a="end");let h=Dk(i.state.doc.sliceString(s,o,Ti),e.text,l-s,a);h&&(G.chrome&&i.inputState.lastKeyCode==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Ti+Ti&&h.toB--,t={from:s+h.from,to:s+h.toA,insert:ve.of(e.text.slice(h.from,h.toB).split(Ti))})}else n&&(!i.hasFocus||!i.state.facet(yo)||n.main.eq(r))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!r.empty&&n&&n.main.empty?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:i.state.doc.slice(r.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,r.to))}:(G.mac||G.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())?(n&&t.insert.length==2&&(n=C.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:ve.of([" "])}):G.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=C.single(n.main.anchor-1,n.main.head-1)),t={from:r.from,to:r.to,insert:ve.of([" "])}),t){let s=i.state;if(G.ios&&i.inputState.flushIOSKey(i)||G.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&En(i.contentDOM,"Enter",13)||t.from==r.from-1&&t.to==r.to&&t.insert.length==0&&En(i.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&En(i.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(i.state.facet(Bg).some(h=>h(i,t.from,t.to,o)))return!0;i.inputState.composing>=0&&i.inputState.composing++;let l;if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&i.inputState.composing<0){let h=r.from<t.from?s.sliceDoc(r.from,t.from):"",c=r.to>t.to?s.sliceDoc(t.to,r.to):"";l=s.replaceSelection(i.state.toText(h+t.insert.sliceString(0,void 0,i.state.lineBreak)+c))}else{let h=s.changes(t),c=n&&!s.selection.main.eq(n.main)&&n.main.to<=h.newLength?n.main:void 0;if(s.selection.ranges.length>1&&i.inputState.composing>=0&&t.to<=r.to&&t.to>=r.to-10){let u=i.state.sliceDoc(t.from,t.to),f=Kg(i)||i.state.doc.lineAt(r.head),d=r.to-t.to,p=r.to-r.from;l=s.changeByRange(g=>{if(g.from==r.from&&g.to==r.to)return{changes:h,range:c||g.map(h)};let m=g.to-d,b=m-u.length;if(g.to-g.from!=p||i.state.sliceDoc(b,m)!=u||f&&g.to>=f.from&&g.from<=f.to)return{range:g};let w=s.changes({from:b,to:m,insert:t.insert}),y=g.to-r.to;return{changes:w,range:c?C.range(Math.max(0,c.anchor+y),Math.max(0,c.head+y)):g.map(w)}})}else l={changes:h,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return i.composing&&(a+=".compose",i.inputState.compositionFirstChange&&(a+=".start",i.inputState.compositionFirstChange=!1)),i.dispatch(l,{scrollIntoView:!0,userEvent:a}),!0}else if(n&&!n.main.eq(r)){let s=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(s=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:s,userEvent:o}),!0}else return!1}function Dk(i,e,t,n){let r=Math.min(i.length,e.length),s=0;for(;s<r&&i.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&i.length==e.length)return null;let o=i.length,l=e.length;for(;o>0&&l>0&&i.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(n=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}if(o<s&&i.length<e.length){let a=t<=s&&t>=o?s-t:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=t<=s&&t>=l?s-t:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function Pk(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:r,focusOffset:s}=i.observer.selectionRange;return t&&(e.push(new lu(t,n)),(r!=t||s!=n)&&e.push(new lu(r,s))),e}function Lk(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?C.single(t+e,n+e):null}const Rk={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ol=G.ie&&G.ie_version<=11;class Ik{constructor(e){this.view=e,this.active=!1,this.selectionRange=new T2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(G.ie&&G.ie_version<=11||G.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),ol&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(yo)?n.root.activeElement!=this.dom:!Ps(n.dom,r))return;let s=r.anchorNode&&n.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(G.ie&&G.ie_version<=11||G.android&&G.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Ks(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=G.safari&&e.root.nodeType==11&&A2(this.dom.ownerDocument)==this.dom&&Nk(this.view)||$s(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=Ps(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&O2(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Rk),ol&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ol&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&En(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Ps(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Ok(this.view,e,t,n))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let n=this.view.state,r=a0(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let n=Cu(t,e.previousSibling||e.target.previousSibling,-1),r=Cu(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resize)===null||n===void 0||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Cu(i,e,t){for(;e;){let n=De.get(e);if(n&&n.parent==i)return n;let r=e.parentNode;e=r!=i.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function Nk(i){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(i.contentDOM.addEventListener("beforeinput",t,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=i.docView.domAtPos(i.state.selection.main.anchor);return Ks(l.node,l.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}class J{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||M2(e.parent)||document,this.viewState=new Au(e.state||be.create(e)),this.plugins=this.state.facet(cr).map(t=>new il(t));for(let t of this.plugins)t.update(this);this.observer=new Ik(this),this.inputState=new rk(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new au(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof We?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.observer.delayedAndroidKey,l=null;if(o?(this.observer.clearDelayedAndroidKey(),l=this.observer.readChange(),(l&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(l=null)):this.observer.clear(),s.facet(be.phrases)!=this.state.facet(be.phrases))return this.setState(s);r=Ys.create(this,s,e);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(a&&(a=a.map(h.changes)),h.scrollIntoView){let{main:c}=h.state.selection;a=new Js(c.empty?c:C.cursor(c.head,c.head>c.anchor?-1:1))}for(let c of h.effects)c.is(su)&&(a=c.value)}this.viewState.update(r,a),this.bidiCache=Zs.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(ur)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(fs)!=r.state.facet(fs)&&(this.viewState.mustMeasureContent=!0),(t||n||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let h of this.state.facet(fa))h(r);l&&!a0(this,l)&&o.force&&En(this.contentDOM,o.key,o.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new Au(e),this.plugins=e.facet(cr).map(n=>new il(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView=new au(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(cr),n=e.state.facet(cr);if(t!=n){let r=[];for(let s of n){let o=t.indexOf(s);if(o<0)r.push(new il(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:n,scrollTop:r,clientHeight:s}=this.scrollDOM,o=r>n-s-4?n:r;try{for(let l=0;;l++){this.updateState=1;let a=this.viewport,h=this.viewState.lineBlockAtHeight(o),c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];c&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(m=>{try{return m.read(this)}catch(b){return jt(this.state,b),Tu}}),d=Ys.create(this,this.state,[]),p=!1,g=!1;d.flags|=c,t?t.flags|=c:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d));for(let m=0;m<u.length;m++)if(f[m]!=Tu)try{let b=u[m];b.write&&b.write(f[m],this)}catch(b){jt(this.state,b)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,g=!0;else{let m=this.viewState.lineBlockAt(h.from).top-h.top;(m>1||m<-1)&&(this.scrollDOM.scrollTop+=m,g=!0)}if(p&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!g&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(fa))l(t)}get themeClasses(){return ya+" "+(this.state.facet(_a)?o0:s0)+" "+this.state.facet(fs)}updateAttrs(){let e=Mu(this,Vg,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(yo)?"true":"false",class:"cm-content",style:`${G.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Mu(this,Ug,t);let n=this.observer.ignore(()=>{let r=ca(this.contentDOM,this.contentAttrs,t),s=ca(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let r of n.effects)if(r.is(J.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(ur),Oi.mount(this.root,this.styleModules.concat(Mk).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return rl(this,e,pu(this,e,t,n))}moveByGroup(e,t){return rl(this,e,pu(this,e,t,n=>ik(this,e.head,n)))}moveToLineBoundary(e,t,n=!0){return tk(this,e,t,n)}moveVertically(e,t,n){return rl(this,e,nk(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Jg(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Cn.find(s,e-r.from,-1,t)];return eh(n,o.dir==Ie.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Hg)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Bk)return Gg(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let n=U2(e.text,t);return this.bidiCache.push(new Zs(e.from,e.to,t,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||G.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{wg(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return su.of(new Js(typeof e=="number"?C.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return it.define(()=>({}),{eventHandlers:e})}static theme(e,t){let n=Oi.newName(),r=[fs.of(n),ur.of(wa(`.${n}`,e))];return t&&t.dark&&r.push(_a.of(!0)),r}static baseTheme(e){return Gr.lowest(ur.of(wa("."+ya,e,l0)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&De.get(n)||De.get(e);return((t=r?.rootView)===null||t===void 0?void 0:t.view)||null}}J.styleModule=ur;J.inputHandler=Bg;J.perLineTextDirection=Hg;J.exceptionSink=Ng;J.updateListener=fa;J.editable=yo;J.mouseSelectionStyle=Ig;J.dragMovesSelection=Rg;J.clickAddsSelectionRange=Lg;J.decorations=Lr;J.atomicRanges=jg;J.scrollMargins=zg;J.darkTheme=_a;J.contentAttributes=Ug;J.editorAttributes=Vg;J.lineWrapping=J.contentAttributes.of({class:"cm-lineWrapping"});J.announce=ue.define();const Bk=4096,Tu={};class Zs{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Ie.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&n.push(new Zs(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function Mu(i,e,t){for(let n=i.state.facet(e),r=n.length-1;r>=0;r--){let s=n[r],o=typeof s=="function"?s(i):s;o&&ha(o,t)}return t}const Hk=G.mac?"mac":G.windows?"win":G.linux?"linux":"key";function Fk(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let r,s,o,l;for(let a=0;a<t.length-1;++a){const h=t[a];if(/^(cmd|meta|m)$/i.test(h))l=!0;else if(/^a(lt)?$/i.test(h))r=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),l&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function ds(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const Vk=Gr.default(J.domEventHandlers({keydown(i,e){return Wk(Uk(e.state),i,e,"editor")}})),wo=q.define({enables:Vk}),Ou=new WeakMap;function Uk(i){let e=i.facet(wo),t=Ou.get(e);return t||Ou.set(e,t=zk(e.reduce((n,r)=>n.concat(r),[]))),t}let Si=null;const jk=4e3;function zk(i,e=Hk){let t=Object.create(null),n=Object.create(null),r=(o,l)=>{let a=n[o];if(a==null)n[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,h)=>{var c,u;let f=t[o]||(t[o]=Object.create(null)),d=l.split(/ (?!$)/).map(m=>Fk(m,e));for(let m=1;m<d.length;m++){let b=d.slice(0,m).join(" ");r(b,!0),f[b]||(f[b]={preventDefault:!0,run:[w=>{let y=Si={view:w,prefix:b,scope:o};return setTimeout(()=>{Si==y&&(Si=null)},jk),!0}]})}let p=d.join(" ");r(p,!1);let g=f[p]||(f[p]={preventDefault:!1,run:((u=(c=f._any)===null||c===void 0?void 0:c.run)===null||u===void 0?void 0:u.slice())||[]});a&&g.run.push(a),h&&(g.preventDefault=!0)};for(let o of i){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of l){let c=t[h]||(t[h]=Object.create(null));c._any||(c._any={preventDefault:!1,run:[]});for(let u in c)c[u].run.push(o.any)}let a=o[e]||o.key;if(a)for(let h of l)s(h,a,o.run,o.preventDefault),o.shift&&s(h,"Shift-"+a,o.shift,o.preventDefault)}return t}function Wk(i,e,t,n){let r=S2(e),s=et(r,0),o=Dt(s)==r.length&&r!=" ",l="",a=!1;Si&&Si.view==t&&Si.scope==n&&(l=Si.prefix+" ",(a=Zg.indexOf(e.keyCode)<0)&&(Si=null));let h=new Set,c=p=>{if(p){for(let g of p.run)if(!h.has(g)&&(h.add(g),g(t,e)))return!0;p.preventDefault&&(a=!0)}return!1},u=i[n],f,d;if(u){if(c(u[l+ds(r,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey||s>127)&&(f=Di[e.keyCode])&&f!=r){if(c(u[l+ds(f,e,!0)]))return!0;if(e.shiftKey&&(d=Or[e.keyCode])!=r&&d!=f&&c(u[l+ds(d,e,!1)]))return!0}else if(o&&e.shiftKey&&c(u[l+ds(r,e,!0)]))return!0;if(c(u._any))return!0}return a}const h0=!G.ios,dr=q.define({combine(i){return on(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Gk(i={}){return[dr.of(i),qk,$k,Fg.of(!0)]}class c0{constructor(e,t,n,r,s){this.left=e,this.top=t,this.width=n,this.height=r,this.className=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const qk=it.fromClass(class{constructor(i){this.view=i,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=i.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=i.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),i.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(dr).cursorBlinkRate+"ms"}update(i){let e=i.startState.facet(dr)!=i.state.facet(dr);(e||i.selectionSet||i.geometryChanged||i.viewportChanged)&&this.view.requestMeasure(this.measureReq),i.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:i}=this.view,e=i.facet(dr),t=i.selection.ranges.map(r=>r.empty?[]:Kk(this.view,r)).reduce((r,s)=>r.concat(s)),n=[];for(let r of i.selection.ranges){let s=r==i.selection.main;if(r.empty?!s||h0:e.drawRangeCursor){let o=Xk(this.view,r,s);o&&n.push(o)}}return{rangePieces:t,cursors:n}}drawSel({rangePieces:i,cursors:e}){if(i.length!=this.rangePieces.length||i.some((t,n)=>!t.eq(this.rangePieces[n]))){this.selectionLayer.textContent="";for(let t of i)this.selectionLayer.appendChild(t.draw());this.rangePieces=i}if(e.length!=this.cursors.length||e.some((t,n)=>!t.eq(this.cursors[n]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const n of e)this.cursorLayer.appendChild(n.draw())}else e.forEach((n,r)=>n.adjust(t[r]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),u0={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};h0&&(u0[".cm-line"].caretColor="transparent !important");const $k=Gr.highest(J.theme(u0));function f0(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==Ie.LTR?e.left:e.right-i.scrollDOM.clientWidth)-i.scrollDOM.scrollLeft,top:e.top-i.scrollDOM.scrollTop}}function Du(i,e,t){let n=C.cursor(e);return{from:Math.max(t.from,i.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,i.moveToLineBoundary(n,!0,!0).from),type:Te.Text}}function Pu(i,e){let t=i.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Te.Text))return n}return t}function Kk(i,e){if(e.to<=i.viewport.from||e.from>=i.viewport.to)return[];let t=Math.max(e.from,i.viewport.from),n=Math.min(e.to,i.viewport.to),r=i.textDirection==Ie.LTR,s=i.contentDOM,o=s.getBoundingClientRect(),l=f0(i),a=window.getComputedStyle(s.firstChild),h=o.left+parseInt(a.paddingLeft)+Math.min(0,parseInt(a.textIndent)),c=o.right-parseInt(a.paddingRight),u=Pu(i,t),f=Pu(i,n),d=u.type==Te.Text?u:null,p=f.type==Te.Text?f:null;if(i.lineWrapping&&(d&&(d=Du(i,t,d)),p&&(p=Du(i,n,p))),d&&p&&d.from==p.from)return m(b(e.from,e.to,d));{let y=d?b(e.from,null,d):w(u,!1),k=p?b(null,e.to,p):w(f,!0),A=[];return(d||u).to<(p||f).from-1?A.push(g(h,y.bottom,c,k.top)):y.bottom<k.top&&i.elementAtHeight((y.bottom+k.top)/2).type==Te.Text&&(y.bottom=k.top=(y.bottom+k.top)/2),m(y).concat(A).concat(m(k))}function g(y,k,A,x){return new c0(y-l.left,k-l.top-.01,A-y,x-k+.01,"cm-selectionBackground")}function m({top:y,bottom:k,horizontal:A}){let x=[];for(let R=0;R<A.length;R+=2)x.push(g(A[R],y,A[R+1],k));return x}function b(y,k,A){let x=1e9,R=-1e9,D=[];function F(W,ne,_e,ee,P){let re=i.coordsAtPos(W,W==A.to?-2:2),U=i.coordsAtPos(_e,_e==A.from?2:-2);x=Math.min(re.top,U.top,x),R=Math.max(re.bottom,U.bottom,R),P==Ie.LTR?D.push(r&&ne?h:re.left,r&&ee?c:U.right):D.push(!r&&ee?h:U.left,!r&&ne?c:re.right)}let L=y??A.from,T=k??A.to;for(let W of i.visibleRanges)if(W.to>L&&W.from<T)for(let ne=Math.max(W.from,L),_e=Math.min(W.to,T);;){let ee=i.state.doc.lineAt(ne);for(let P of i.bidiSpans(ee)){let re=P.from+ee.from,U=P.to+ee.from;if(re>=_e)break;U>ne&&F(Math.max(re,ne),y==null&&re<=L,Math.min(U,_e),k==null&&U>=T,P.dir)}if(ne=ee.to+1,ne>=_e)break}return D.length==0&&F(L,y==null,T,k==null,i.textDirection),{top:x,bottom:R,horizontal:D}}function w(y,k){let A=o.top+(k?y.top:y.bottom);return{top:A,bottom:A,horizontal:[]}}}function Xk(i,e,t){let n=i.coordsAtPos(e.head,e.assoc||1);if(!n)return null;let r=f0(i);return new c0(n.left-r.left,n.top-r.top,-1,n.bottom-n.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}function Lu(i,e,t,n,r){e.lastIndex=0;for(let s=i.iterRange(t,n),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function Jk(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:r,to:s}of t)r=Math.max(i.state.doc.lineAt(r).from,r-e),s=Math.min(i.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=r?n[n.length-1].to=s:n.push({from:r,to:s});return n}class Yk{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,a,h,c)=>r(c,h,h+l[0].length,l,a);else if(typeof n=="function")this.addMatch=(l,a,h,c)=>{let u=n(l,a,h);u&&c(h,h+l[0].length,u)};else if(n)this.addMatch=(l,a,h,c)=>c(h,h+l[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new Yi,n=t.add.bind(t);for(let{from:r,to:s}of Jk(e,this.maxLength))Lu(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(n=Math.min(l,n),r=Math.max(a,r))}),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let s of e.visibleRanges){let o=Math.max(s.from,n),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),h=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),u=Math.min(s.to,h.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<h.to;l++)if(this.boundary.test(h.text[l-h.from])){u=l;break}}let f=[],d,p=(g,m,b)=>f.push(b.range(g,m));if(a==h)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<u-a.from;)this.addMatch(d,e,d.index+a.from,p);else Lu(e.state.doc,this.regexp,c,u,(g,m)=>this.addMatch(m,e,g,p));t=t.update({filterFrom:c,filterTo:u,filter:(g,m)=>g<c||m>u,add:f})}}return t}}const va=/x/.unicode!=null?"gu":"g",Zk=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,va),Qk={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ll=null;function ex(){var i;if(ll==null&&typeof document<"u"&&document.body){let e=document.body.style;ll=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return ll||!1}const Rs=q.define({combine(i){let e=on(i,{render:null,specialChars:Zk,addSpecialChars:null});return(e.replaceTabs=!ex())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,va)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,va)),e}});function tx(i={}){return[Rs.of(i),ix()]}let Ru=null;function ix(){return Ru||(Ru=it.fromClass(class{constructor(i){this.view=i,this.decorations=he.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(Rs)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new Yk({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:r}=t.state,s=et(e[0],0);if(s==9){let o=r.lineAt(n),l=t.state.tabSize,a=qr(o.text,l,n-o.from);return he.replace({widget:new ox((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=he.replace({widget:new sx(i,s)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(Rs);i.startState.facet(Rs)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const nx="•";function rx(i){return i>=32?nx:i==10?"␤":String.fromCharCode(9216+i)}class sx extends ui{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=rx(this.code),n=e.state.phrase("Control character")+" "+(Qk[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class ox extends ui{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}class lx extends ui{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function ax(i){return it.fromClass(class{constructor(e){this.view=e,this.placeholder=he.set([he.widget({widget:new lx(i),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?he.none:this.placeholder}},{decorations:e=>e.decorations})}const ka=2e3;function hx(i,e,t){let n=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>ka||t.off>ka||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=n;a<=r;a++){let h=i.doc.line(a);h.length<=l&&s.push(C.range(h.from+o,h.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=n;a<=r;a++){let h=i.doc.line(a),c=ta(h.text,o,i.tabSize,!0);if(c<0)s.push(C.cursor(h.to));else{let u=ta(h.text,l,i.tabSize);s.push(C.range(h.from+c,h.from+u))}}}return s}function cx(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function Iu(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),r=t-n.from,s=r>ka?-1:r==n.length?cx(i,e.clientX):qr(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:s,off:r}}function ux(i,e){let t=Iu(i,e),n=i.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(r.changes)}},get(r,s,o){let l=Iu(i,r);if(!l)return n;let a=hx(i.state,t,l);return a.length?o?C.create(a.concat(n.ranges)):C.create(a):n}}:null}function fx(i){let e=t=>t.altKey&&t.button==0;return J.mouseSelectionStyle.of((t,n)=>e(n)?ux(t,n):null)}const dx={Alt:[18,i=>i.altKey],Control:[17,i=>i.ctrlKey],Shift:[16,i=>i.shiftKey],Meta:[91,i=>i.metaKey]},px={style:"cursor: crosshair"};function mx(i={}){let[e,t]=dx[i.key||"Alt"],n=it.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[n,J.contentAttributes.of(r=>{var s;return!((s=r.plugin(n))===null||s===void 0)&&s.isDown?px:null})]}const al="-10000px";class d0{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(n)}update(e){var t;let n=e.state.facet(this.facet),r=n.filter(o=>o);if(n===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(l){for(let h=0;h<this.tooltips.length;h++){let c=this.tooltips[h];c&&c.create==l.create&&(a=h)}if(a<0)s[o]=this.createTooltipView(l);else{let h=s[o]=this.tooltipViews[a];h.update&&h.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=n,this.tooltips=r,this.tooltipViews=s,!0}}function gx(i){let{win:e}=i;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const hl=q.define({combine:i=>{var e,t,n;return{position:G.ios?"absolute":((e=i.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(r=>r.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||gx}}}),p0=it.fromClass(class{constructor(i){this.view=i,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(hl);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new d0(i,sh,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(hl);if(n.position!=this.position){this.position=n.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i){let e=i.create(this.view);if(e.dom.classList.add("cm-tooltip"),i.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=al,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var i,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(i=t.destroy)===null||i===void 0||i.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=this.view.dom.getBoundingClientRect();return{editor:i,parent:this.parent?this.container.getBoundingClientRect():i,pos:this.manager.tooltips.map((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(hl).tooltipSpace(this.view)}}writeMeasure(i){let{editor:e,space:t}=i,n=[];for(let r=0;r<this.manager.tooltips.length;r++){let s=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:l}=o,a=i.pos[r],h=i.size[r];if(!a||a.bottom<=Math.max(e.top,t.top)||a.top>=Math.min(e.bottom,t.bottom)||a.right<Math.max(e.left,t.left)-.1||a.left>Math.min(e.right,t.right)+.1){l.style.top=al;continue}let c=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,u=c?7:0,f=h.right-h.left,d=h.bottom-h.top,p=o.offset||_x,g=this.view.textDirection==Ie.LTR,m=h.width>t.right-t.left?g?t.left:t.right-h.width:g?Math.min(a.left-(c?14:0)+p.x,t.right-f):Math.max(t.left,a.left-f+(c?14:0)-p.x),b=!!s.above;!s.strictSide&&(b?a.top-(h.bottom-h.top)-p.y<t.top:a.bottom+(h.bottom-h.top)+p.y>t.bottom)&&b==t.bottom-a.bottom>a.top-t.top&&(b=!b);let w=b?a.top-d-u-p.y:a.bottom+u+p.y,y=m+f;if(o.overlap!==!0)for(let k of n)k.left<y&&k.right>m&&k.top<w+d&&k.bottom>w&&(w=b?k.top-d-2-u:k.bottom+u+2);this.position=="absolute"?(l.style.top=w-i.parent.top+"px",l.style.left=m-i.parent.left+"px"):(l.style.top=w+"px",l.style.left=m+"px"),c&&(c.style.left=`${a.left+(g?p.x:-p.x)-(m+14-7)}px`),o.overlap!==!0&&n.push({left:m,top:w,right:y,bottom:w+d}),l.classList.toggle("cm-tooltip-above",b),l.classList.toggle("cm-tooltip-below",!b),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=al}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),bx=J.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),_x={x:0,y:0},sh=q.define({enables:[p0,bx]}),Qs=q.define();class oh{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new d0(e,Qs,t=>this.createHostedView(t))}static create(e){return new oh(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const yx=sh.compute([Qs],i=>{let e=i.facet(Qs).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:oh.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class wx{constructor(e,t,n,r,s){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let n=this.view.coordsAtPos(t);if(n==null||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),s=r&&r.dir==Ie.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-s:s);if(o?.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>jt(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!vx(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,s=(t=n?.end)!==null&&t!==void 0?t:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!kx(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function vx(i){for(let e=i;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function kx(i,e,t,n,r,s){let o=document.createRange(),l=i.domAtPos(e),a=i.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let h=o.getClientRects();o.detach();for(let c=0;c<h.length;c++){let u=h[c];if(Math.max(u.top-r,r-u.bottom,u.left-n,n-u.right)<=s)return!0}return!1}function xx(i,e={}){let t=ue.define(),n=wt.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,Je.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(Ax)&&(r=null);return r},provide:r=>Qs.from(r)});return[n,it.define(r=>new wx(r,i,n,t,e.hoverTime||300)),yx]}function Sx(i,e){let t=i.plugin(p0);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const Ax=ue.define(),Nu=q.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Ex(i,e){let t=i.plugin(m0),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const m0=it.fromClass(class{constructor(i){this.input=i.state.facet(xa),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(Nu);this.top=new ps(i,!0,e.topContainer),this.bottom=new ps(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(Nu);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ps(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ps(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(xa);if(t!=this.input){let n=t.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of n){let h=this.specs.indexOf(a),c;h<0?(c=a(i.view),l.push(c)):(c=this.panels[h],c.update&&c.update(i)),r.push(c),(c.top?s:o).push(c)}this.specs=n,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>J.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class ps{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Bu(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Bu(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Bu(i){let e=i.nextSibling;return i.remove(),e}const xa=q.define({enables:m0});class Li extends Ji{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Li.prototype.elementClass="";Li.prototype.toDOM=void 0;Li.prototype.mapMode=Je.TrackBefore;Li.prototype.startSide=Li.prototype.endSide=-1;Li.prototype.point=!0;const cl=q.define(),Cx={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Se.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},yr=q.define();function Tx(i){return[g0(),yr.of(Object.assign(Object.assign({},Cx),i))]}const Hu=q.define({combine:i=>i.some(e=>e)});function g0(i){return[Mx]}const Mx=it.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=i.state.facet(yr).map(e=>new Vu(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(Hu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Hu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=Se.iter(this.view.state.facet(cl),this.view.viewport.from),n=[],r=this.gutters.map(s=>new Ox(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==Te.Text){o=l;break}}else o=s.type==Te.Text?s:void 0;if(o){n.length&&(n=[]),b0(t,n,s.from);for(let l of r)l.line(this.view,o,n)}}for(let s of r)s.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(yr),t=i.state.facet(yr),n=i.docChanged||i.heightChanged||i.viewportChanged||!Se.eq(i.startState.facet(cl),i.state.facet(cl),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(i)&&(n=!0);else{n=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new Vu(this.view,s)):(this.gutters[o].update(i),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>J.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Ie.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function Fu(i){return Array.isArray(i)?i:[i]}function b0(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class Ox{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=Se.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),b0(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new _0(e,t.height,l,r);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Vu{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,r=>{let s=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()});this.markers=Fu(t.markers(e)),t.initialSpacer&&(this.spacer=new _0(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Fu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let n=e.view.viewport;return!Se.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _0{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),Dx(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,h=!1;if(a){let c=a.elementClass;c&&(n+=" "+c);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,h=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!a)break;a.toDOM&&(h?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),h&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function Dx(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const Px=q.define(),_n=q.define({combine(i){return on(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let s=n[r],o=t[r];n[r]=s?(l,a,h)=>s(l,a,h)||o(l,a,h):o}return n}})}});class ul extends Li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function fl(i,e){return i.state.facet(_n).formatNumber(e,i.state)}const Lx=yr.compute([_n],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Px)},lineMarker(e,t,n){return n.some(r=>r.toDOM)?null:new ul(fl(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(_n)!=e.state.facet(_n),initialSpacer(e){return new ul(fl(e,Uu(e.state.doc.lines)))},updateSpacer(e,t){let n=fl(t.view,Uu(t.view.state.doc.lines));return n==e.number?e:new ul(n)},domEventHandlers:i.facet(_n).domEventHandlers}));function Rx(i={}){return[_n.of(i),g0(),Lx]}function Uu(i){let e=9;for(;e<i;)e=e*10+9;return e}const Ix=1024;let Nx=0;class Lt{constructor(e,t){this.from=e,this.to=t}}class fe{constructor(e={}){this.id=Nx++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=dt.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}fe.closedBy=new fe({deserialize:i=>i.split(" ")});fe.openedBy=new fe({deserialize:i=>i.split(" ")});fe.group=new fe({deserialize:i=>i.split(" ")});fe.contextHash=new fe({perNode:!0});fe.lookAhead=new fe({perNode:!0});fe.mounted=new fe({perNode:!0});class Bx{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}}const Hx=Object.create(null);class dt{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Hx,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new dt(e.name||"",t,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(fe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(fe.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?n.name:r[s]];if(o)return o}}}}dt.none=new dt("",Object.create(null),0,8);class lh{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let s of e){let o=s(n);o&&(r||(r=Object.assign({},n.props)),r[o[0].id]=o[1])}t.push(r?new dt(n.name,r,n.id,n.flags):n)}return new lh(t)}}const ms=new WeakMap,ju=new WeakMap;var Ne;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Ne||(Ne={}));class Me{constructor(e,t,n,r,s){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(fe.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Rr(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ms.get(this)||this.topNode,s=new Rr(r);return s.moveTo(e,t),ms.set(this,s._tree),s}get topNode(){return new Nt(this,0,0,null)}resolve(e,t=0){let n=Bn(ms.get(this)||this.topNode,e,t,!1);return ms.set(this,n),n}resolveInner(e,t=0){let n=Bn(ju.get(this)||this.topNode,e,t,!0);return ju.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|Ne.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=r&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ch(dt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new Me(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new Me(dt.none,t,n,r)))}static build(e){return Vx(e)}}Me.empty=new Me(dt.none,[],[],0);class ah{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ah(this.buffer,this.index)}}class ln{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return dt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,n,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(y0(s,r,o[a+1],o[a+2])&&(l=a,n>0));a=o[a+3]);return l}slice(e,t,n){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=r[l++],s[a++]=r[l++]-n;let h=s[a++]=r[l++]-n;s[a++]=r[l++]-e,o=Math.max(o,h)}return new ln(s,o,this.set)}}function y0(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function w0(i,e){let t=i.childBefore(e);for(;t;){let n=t.lastChild;if(!n||n.to!=t.to)break;n.type.isError&&n.from==n.to?(i=t,t=n.prevSibling):t=n}return i}function Bn(i,e,t,n){for(var r;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let o=!n&&i instanceof Nt&&i.index<0?null:i.parent;if(!o)return i;i=o}let s=n?0:Ne.IgnoreOverlays;if(n)for(let o=i,l=o.parent;l;o=l,l=o.parent)o instanceof Nt&&o.index<0&&((r=l.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(i=l);for(;;){let o=i.enter(e,t,s);if(!o)return i;i=o}}class Nt{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,h=t>0?l.length:-1;e!=h;e+=t){let c=l[e],u=a[e]+o.from;if(y0(r,n,u,u+c.length)){if(c instanceof ln){if(s&Ne.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,n-u,r);if(f>-1)return new oi(new Fx(o,c,e,u),null,f)}else if(s&Ne.IncludeAnonymous||!c.type.isAnonymous||hh(c)){let f;if(!(s&Ne.IgnoreMounts)&&c.props&&(f=c.prop(fe.mounted))&&!f.overlay)return new Nt(f.tree,u,e,o);let d=new Nt(c,u,e,o);return s&Ne.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?c.children.length-1:0,t,n,r)}}}if(s&Ne.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Ne.IgnoreOverlays)&&(r=this._tree.prop(fe.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new Nt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Rr(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Bn(this,e,t,!1)}resolveInner(e,t=0){return Bn(this,e,t,!0)}enterUnfinishedNodesBefore(e){return w0(this,e)}getChild(e,t=null,n=null){let r=eo(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return eo(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return to(this,e)}}function eo(i,e,t,n){let r=i.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return s}for(;;){if(n!=null&&r.type.is(n))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return n==null?s:[]}}function to(i,e,t=e.length-1){for(let n=i.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class Fx{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class oi{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return s<0?null:new oi(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Ne.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new oi(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new oi(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new oi(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Rr(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,s=n.buffer[this.index+3];if(s>r){let o=n.buffer[this.index+1];e.push(n.slice(r,s,o)),t.push(0)}return new Me(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Bn(this,e,t,!1)}resolveInner(e,t=0){return Bn(this,e,t,!0)}enterUnfinishedNodesBefore(e){return w0(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=eo(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return eo(this,e,t,n)}get node(){return this}matchContext(e){return to(this,e)}}class Rr{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Nt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Nt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Ne.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ne.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ne.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let s=t+e,o=e<0?-1:n._tree.children.length;s!=o;s+=e){let l=n._tree.children[s];if(this.mode&Ne.IncludeAnonymous||l instanceof ln||!l.type.isAnonymous||hh(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=s+1;break e}r=this.stack[--s]}for(let r=n;r<this.stack.length;r++)t=new oi(this.buffer,t,this.stack[r]);return this.bufferNode=new oi(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return to(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return to(this.node,e,r);let o=n[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function hh(i){return i.children.some(e=>e instanceof ln||!e.type.isAnonymous||hh(e))}function Vx(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=Ix,reused:s=[],minRepeatType:o=n.types.length}=i,l=Array.isArray(t)?new ah(t,t.length):t,a=n.types,h=0,c=0;function u(k,A,x,R,D){let{id:F,start:L,end:T,size:W}=l,ne=c;for(;W<0;)if(l.next(),W==-1){let U=s[F];x.push(U),R.push(L-k);return}else if(W==-3){h=F;return}else if(W==-4){c=F;return}else throw new RangeError(`Unrecognized record size: ${W}`);let _e=a[F],ee,P,re=L-k;if(T-L<=r&&(P=g(l.pos-A,D))){let U=new Uint16Array(P.size-P.skip),M=l.pos-P.size,Z=U.length;for(;l.pos>M;)Z=m(P.start,U,Z);ee=new ln(U,T-P.start,n),re=P.start-k}else{let U=l.pos-W;l.next();let M=[],Z=[],j=F>=o?F:-1,Ce=0,ae=T;for(;l.pos>U;)j>=0&&l.id==j&&l.size>=0?(l.end<=ae-r&&(d(M,Z,L,Ce,l.end,ae,j,ne),Ce=M.length,ae=l.end),l.next()):u(L,U,M,Z,j);if(j>=0&&Ce>0&&Ce<M.length&&d(M,Z,L,Ce,L,ae,j,ne),M.reverse(),Z.reverse(),j>-1&&Ce>0){let ot=f(_e);ee=ch(_e,M,Z,0,M.length,0,T-L,ot,ot)}else ee=p(_e,M,Z,T-L,ne-T)}x.push(ee),R.push(re)}function f(k){return(A,x,R)=>{let D=0,F=A.length-1,L,T;if(F>=0&&(L=A[F])instanceof Me){if(!F&&L.type==k&&L.length==R)return L;(T=L.prop(fe.lookAhead))&&(D=x[F]+L.length+T)}return p(k,A,x,R,D)}}function d(k,A,x,R,D,F,L,T){let W=[],ne=[];for(;k.length>R;)W.push(k.pop()),ne.push(A.pop()+x-D);k.push(p(n.types[L],W,ne,F-D,T-F)),A.push(D-x)}function p(k,A,x,R,D=0,F){if(h){let L=[fe.contextHash,h];F=F?[L].concat(F):[L]}if(D>25){let L=[fe.lookAhead,D];F=F?[L].concat(F):[L]}return new Me(k,A,x,R,F)}function g(k,A){let x=l.fork(),R=0,D=0,F=0,L=x.end-r,T={size:0,start:0,skip:0};e:for(let W=x.pos-k;x.pos>W;){let ne=x.size;if(x.id==A&&ne>=0){T.size=R,T.start=D,T.skip=F,F+=4,R+=4,x.next();continue}let _e=x.pos-ne;if(ne<0||_e<W||x.start<L)break;let ee=x.id>=o?4:0,P=x.start;for(x.next();x.pos>_e;){if(x.size<0)if(x.size==-3)ee+=4;else break e;else x.id>=o&&(ee+=4);x.next()}D=P,R+=ne,F+=ee}return(A<0||R==k)&&(T.size=R,T.start=D,T.skip=F),T.size>4?T:void 0}function m(k,A,x){let{id:R,start:D,end:F,size:L}=l;if(l.next(),L>=0&&R<o){let T=x;if(L>4){let W=l.pos-(L-4);for(;l.pos>W;)x=m(k,A,x)}A[--x]=T,A[--x]=F-k,A[--x]=D-k,A[--x]=R}else L==-3?h=R:L==-4&&(c=R);return x}let b=[],w=[];for(;l.pos>0;)u(i.start||0,i.bufferStart||0,b,w,-1);let y=(e=i.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new Me(a[i.topID],b.reverse(),w.reverse(),y)}const zu=new WeakMap;function Is(i,e){if(!i.isAnonymous||e instanceof ln||e.type!=i)return 1;let t=zu.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof Me)){t=1;break}t+=Is(i,n)}zu.set(e,t)}return t}function ch(i,e,t,n,r,s,o,l,a){let h=0;for(let p=n;p<r;p++)h+=Is(i,e[p]);let c=Math.ceil(h*1.5/8),u=[],f=[];function d(p,g,m,b,w){for(let y=m;y<b;){let k=y,A=g[y],x=Is(i,p[y]);for(y++;y<b;y++){let R=Is(i,p[y]);if(x+R>=c)break;x+=R}if(y==k+1){if(x>c){let R=p[k];d(R.children,R.positions,0,R.children.length,g[k]+w);continue}u.push(p[k])}else{let R=g[y-1]+p[y-1].length-A;u.push(ch(i,p,g,k,y,A,R,null,a))}f.push(A+w-s)}}return d(e,t,n,r,0),(l||a)(u,f,o)}class FM{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof oi?this.setBuffer(e.context.buffer,e.index,t):e instanceof Nt&&this.map.set(e.tree,t)}get(e){return e instanceof oi?this.getBuffer(e.context.buffer,e.index):e instanceof Nt?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class bi{constructor(e,t,n,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new bi(0,e.length,e,0,!1,n)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,h=0;;l++){let c=l<t.length?t[l]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let f=o;if(a>=f.from||u<=f.to||h){let d=Math.max(f.from,a)-h,p=Math.min(f.to,u)-h;f=d>=p?null:new bi(d,p,f.tree,f.offset+h,l>0,!!c)}if(f&&r.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,h=c.toA-c.toB}return r}}class v0{startParse(e,t,n){return typeof e=="string"&&(e=new Ux(e)),n=n?n.length?n.map(r=>new Lt(r.from,r.to)):[new Lt(0,0)]:[new Lt(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let s=r.advance();if(s)return s}}}class Ux{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function VM(i){return(e,t,n,r)=>new zx(e,i,t,n,r)}class Wu{constructor(e,t,n,r,s){this.parser=e,this.parse=t,this.overlay=n,this.target=r,this.ranges=s}}class jx{constructor(e,t,n,r,s,o,l){this.parser=e,this.predicate=t,this.mounts=n,this.index=r,this.start=s,this.target=o,this.prev=l,this.depth=0,this.ranges=[]}}const Sa=new fe({perNode:!0});class zx{constructor(e,t,n,r,s){this.nest=t,this.input=n,this.fragments=r,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let n=this.baseParse.advance();if(!n)return null;if(this.baseParse=null,this.baseTree=n,this.startInner(),this.stoppedAt!=null)for(let r of this.inner)r.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let n=this.baseTree;return this.stoppedAt!=null&&(n=new Me(n.type,n.children,n.positions,n.length,n.propValues.concat([[Sa,this.stoppedAt]]))),n}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[fe.mounted.id]=new Bx(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].ranges[0].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new qx(this.fragments),t=null,n=null,r=new Rr(new Nt(this.baseTree,this.ranges[0].from,0,null),Ne.IncludeAnonymous|Ne.IgnoreMounts);e:for(let s,o;this.stoppedAt==null||r.from<this.stoppedAt;){let l=!0,a;if(e.hasNode(r)){if(t){let h=t.mounts.find(c=>c.frag.from<=r.from&&c.frag.to>=r.to&&c.mount.overlay);if(h)for(let c of h.mount.overlay){let u=c.from+h.pos,f=c.to+h.pos;u>=r.from&&f<=r.to&&!t.ranges.some(d=>d.from<f&&d.to>u)&&t.ranges.push({from:u,to:f})}}l=!1}else if(n&&(o=Wx(n.ranges,r.from,r.to)))l=o!=2;else if(!r.type.isAnonymous&&r.from<r.to&&(s=this.nest(r,this.input))){r.tree||Gx(r);let h=e.findMounts(r.from,s.parser);if(typeof s.overlay=="function")t=new jx(s.parser,s.overlay,h,this.inner.length,r.from,r.tree,t);else{let c=$u(this.ranges,s.overlay||[new Lt(r.from,r.to)]);c.length&&this.inner.push(new Wu(s.parser,s.parser.startParse(this.input,Ku(h,c),c),s.overlay?s.overlay.map(u=>new Lt(u.from-r.from,u.to-r.from)):null,r.tree,c)),s.overlay?c.length&&(n={ranges:c,depth:0,prev:n}):l=!1}}else t&&(a=t.predicate(r))&&(a===!0&&(a=new Lt(r.from,r.to)),a.from<a.to&&t.ranges.push(a));if(l&&r.firstChild())t&&t.depth++,n&&n.depth++;else for(;!r.nextSibling();){if(!r.parent())break e;if(t&&!--t.depth){let h=$u(this.ranges,t.ranges);h.length&&this.inner.splice(t.index,0,new Wu(t.parser,t.parser.startParse(this.input,Ku(t.mounts,h),h),t.ranges.map(c=>new Lt(c.from-t.start,c.to-t.start)),t.target,h)),t=t.prev}n&&!--n.depth&&(n=n.prev)}}}}function Wx(i,e,t){for(let n of i){if(n.from>=t)break;if(n.to>e)return n.from<=e&&n.to>=t?2:1}return 0}function Gu(i,e,t,n,r,s){if(e<t){let o=i.buffer[e+1];n.push(i.slice(e,t,o)),r.push(o-s)}}function Gx(i){let{node:e}=i,t=0;do i.parent(),t++;while(!i.tree);let n=0,r=i.tree,s=0;for(;s=r.positions[n]+i.from,!(s<=e.from&&s+r.children[n].length>=e.to);n++);let o=r.children[n],l=o.buffer;function a(h,c,u,f,d){let p=h;for(;l[p+2]+s<=e.from;)p=l[p+3];let g=[],m=[];Gu(o,h,p,g,m,f);let b=l[p+1],w=l[p+2],y=b+s==e.from&&w+s==e.to&&l[p]==e.type.id;return g.push(y?e.toTree():a(p+4,l[p+3],o.set.types[l[p]],b,w-b)),m.push(b-f),Gu(o,l[p+3],c,g,m,f),new Me(u,g,m,d)}r.children[n]=a(0,l.length,dt.none,0,o.length);for(let h=0;h<=t;h++)i.childAfter(e.from)}class qu{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Ne.IncludeAnonymous|Ne.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;for(;!this.done&&t.from<n;)t.to>=e&&t.enter(n,1,Ne.IgnoreOverlays|Ne.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Me)t=t.children[0];else break}return!1}}class qx{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=(t=n.tree.prop(Sa))!==null&&t!==void 0?t:n.to,this.inner=new qu(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Sa))!==null&&e!==void 0?e:t.to,this.inner=new qu(t.tree,-t.offset)}}findMounts(e,t){var n;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(n=s.tree)===null||n===void 0?void 0:n.prop(fe.mounted);if(o&&o.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=s.to)break;a.tree==this.curFrag.tree&&r.push({frag:a,pos:s.from-a.offset,mount:o})}}}return r}}function $u(i,e){let t=null,n=e;for(let r=1,s=0;r<i.length;r++){let o=i[r-1].to,l=i[r].from;for(;s<n.length;s++){let a=n[s];if(a.from>=l)break;a.to<=o||(t||(n=t=e.slice()),a.from<o?(t[s]=new Lt(a.from,o),a.to>l&&t.splice(s+1,0,new Lt(l,a.to))):a.to>l?t[s--]=new Lt(l,a.to):t.splice(s--,1))}}return n}function $x(i,e,t,n){let r=0,s=0,o=!1,l=!1,a=-1e9,h=[];for(;;){let c=r==i.length?1e9:o?i[r].to:i[r].from,u=s==e.length?1e9:l?e[s].to:e[s].from;if(o!=l){let f=Math.max(a,t),d=Math.min(c,u,n);f<d&&h.push(new Lt(f,d))}if(a=Math.min(c,u),a==1e9)break;c==a&&(o?(o=!1,r++):o=!0),u==a&&(l?(l=!1,s++):l=!0)}return h}function Ku(i,e){let t=[];for(let{pos:n,mount:r,frag:s}of i){let o=n+(r.overlay?r.overlay[0].from:0),l=o+r.tree.length,a=Math.max(s.from,o),h=Math.min(s.to,l);if(r.overlay){let c=r.overlay.map(f=>new Lt(f.from+n,f.to+n)),u=$x(e,c,a,h);for(let f=0,d=a;;f++){let p=f==u.length,g=p?h:u[f].from;if(g>d&&t.push(new bi(d,g,r.tree,-o,s.from>=d||s.openStart,s.to<=g||s.openEnd)),p)break;d=u[f].to}}else t.push(new bi(a,h,r.tree,-o,s.from>=o||s.openStart,s.to<=l||s.openEnd))}return t}let Kx=0;class ii{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=Kx++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new ii([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new io;return t=>t.modified.indexOf(e)>-1?t:io.get(t.base||t,t.modified.concat(e).sort((n,r)=>n.id-r.id))}}let Xx=0;class io{constructor(){this.instances=[],this.id=Xx++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(l=>l.base==e&&Jx(t,l.modified));if(n)return n;let r=[],s=new ii(r,e,t);for(let l of t)l.instances.push(s);let o=Yx(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(io.get(l,a));return s}}function Jx(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function Yx(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,r=e.length;n<r;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function Zx(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let r of t.split(" "))if(r){let s=[],o=2,l=r;for(let u=0;;){if(l=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let d=r[u++];if(u==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(u)}let a=s.length-1,h=s[a];if(!h)throw new RangeError("Invalid path: "+r);let c=new no(n,o,a>0?s.slice(0,a):null);e[h]=c.sort(e[h])}}return k0.add(e)}const k0=new fe;class no{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}no.empty=new no([],2,null);function x0(i,e){let t=Object.create(null);for(let s of i)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:n,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let h=t[a.id];if(h){o=o?o+" "+h:h;break}}return o},scope:n}}function Qx(i,e){let t=null;for(let n of i){let r=n.style(e);r&&(t=t?t+" "+r:r)}return t}function eS(i,e,t,n=0,r=i.length){let s=new tS(n,Array.isArray(e)?e:[e],t);s.highlightRange(i.cursor(),n,r,"",s.highlighters),s.flush(r)}class tS{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,s){let{type:o,from:l,to:a}=e;if(l>=n||a<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let h=r,c=iS(e)||no.empty,u=Qx(s,c.tags);if(u&&(h&&(h+=" "),h+=u,c.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(e.from,h),c.opaque)return;let f=e.tree&&e.tree.prop(fe.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),p=this.highlighters.filter(m=>!m.scope||m.scope(f.tree.type)),g=e.firstChild();for(let m=0,b=l;;m++){let w=m<f.overlay.length?f.overlay[m]:null,y=w?w.from+l:a,k=Math.max(t,b),A=Math.min(n,y);if(k<A&&g)for(;e.from<A&&(this.highlightRange(e,k,A,r,s),this.startSpan(Math.min(A,e.to),h),!(e.to>=y||!e.nextSibling())););if(!w||y>n)break;b=w.to+l,b>t&&(this.highlightRange(d.cursor(),Math.max(t,w.from+l),Math.min(n,b),r,p),this.startSpan(b,h))}g&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,s),this.startSpan(Math.min(n,e.to),h)}while(e.nextSibling());e.parent()}}}function iS(i){let e=i.type.prop(k0);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const H=ii.define,gs=H(),ki=H(),Xu=H(ki),Ju=H(ki),xi=H(),bs=H(xi),dl=H(xi),Qt=H(),Vi=H(Qt),Yt=H(),Zt=H(),Aa=H(),ir=H(Aa),_s=H(),_={comment:gs,lineComment:H(gs),blockComment:H(gs),docComment:H(gs),name:ki,variableName:H(ki),typeName:Xu,tagName:H(Xu),propertyName:Ju,attributeName:H(Ju),className:H(ki),labelName:H(ki),namespace:H(ki),macroName:H(ki),literal:xi,string:bs,docString:H(bs),character:H(bs),attributeValue:H(bs),number:dl,integer:H(dl),float:H(dl),bool:H(xi),regexp:H(xi),escape:H(xi),color:H(xi),url:H(xi),keyword:Yt,self:H(Yt),null:H(Yt),atom:H(Yt),unit:H(Yt),modifier:H(Yt),operatorKeyword:H(Yt),controlKeyword:H(Yt),definitionKeyword:H(Yt),moduleKeyword:H(Yt),operator:Zt,derefOperator:H(Zt),arithmeticOperator:H(Zt),logicOperator:H(Zt),bitwiseOperator:H(Zt),compareOperator:H(Zt),updateOperator:H(Zt),definitionOperator:H(Zt),typeOperator:H(Zt),controlOperator:H(Zt),punctuation:Aa,separator:H(Aa),bracket:ir,angleBracket:H(ir),squareBracket:H(ir),paren:H(ir),brace:H(ir),content:Qt,heading:Vi,heading1:H(Vi),heading2:H(Vi),heading3:H(Vi),heading4:H(Vi),heading5:H(Vi),heading6:H(Vi),contentSeparator:H(Qt),list:H(Qt),quote:H(Qt),emphasis:H(Qt),strong:H(Qt),link:H(Qt),monospace:H(Qt),strikethrough:H(Qt),inserted:H(),deleted:H(),changed:H(),invalid:H(),meta:_s,documentMeta:H(_s),annotation:H(_s),processingInstruction:H(_s),definition:ii.defineModifier(),constant:ii.defineModifier(),function:ii.defineModifier(),standard:ii.defineModifier(),local:ii.defineModifier(),special:ii.defineModifier()};x0([{tag:_.link,class:"tok-link"},{tag:_.heading,class:"tok-heading"},{tag:_.emphasis,class:"tok-emphasis"},{tag:_.strong,class:"tok-strong"},{tag:_.keyword,class:"tok-keyword"},{tag:_.atom,class:"tok-atom"},{tag:_.bool,class:"tok-bool"},{tag:_.url,class:"tok-url"},{tag:_.labelName,class:"tok-labelName"},{tag:_.inserted,class:"tok-inserted"},{tag:_.deleted,class:"tok-deleted"},{tag:_.literal,class:"tok-literal"},{tag:_.string,class:"tok-string"},{tag:_.number,class:"tok-number"},{tag:[_.regexp,_.escape,_.special(_.string)],class:"tok-string2"},{tag:_.variableName,class:"tok-variableName"},{tag:_.local(_.variableName),class:"tok-variableName tok-local"},{tag:_.definition(_.variableName),class:"tok-variableName tok-definition"},{tag:_.special(_.variableName),class:"tok-variableName2"},{tag:_.definition(_.propertyName),class:"tok-propertyName tok-definition"},{tag:_.typeName,class:"tok-typeName"},{tag:_.namespace,class:"tok-namespace"},{tag:_.className,class:"tok-className"},{tag:_.macroName,class:"tok-macroName"},{tag:_.propertyName,class:"tok-propertyName"},{tag:_.operator,class:"tok-operator"},{tag:_.comment,class:"tok-comment"},{tag:_.meta,class:"tok-meta"},{tag:_.invalid,class:"tok-invalid"},{tag:_.punctuation,class:"tok-punctuation"}]);var pl;const Gi=new fe;function S0(i){return q.define({combine:i?e=>e.concat(i):void 0})}const nS=new fe;class Rt{constructor(e,t,n=[],r=""){this.data=e,this.name=r,be.prototype.hasOwnProperty("tree")||Object.defineProperty(be.prototype,"tree",{get(){return Ye(this)}}),this.parser=t,this.extension=[Ri.of(this),be.languageData.of((s,o,l)=>{let a=Yu(s,o,l),h=a.type.prop(Gi);if(!h)return[];let c=s.facet(h),u=a.type.prop(nS);if(u){let f=a.resolve(o-a.from,l);for(let d of u)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(n)}isActiveAt(e,t,n=-1){return Yu(e,t,n).type.prop(Gi)==this.data}findRegions(e){let t=e.facet(Ri);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(s,o)=>{if(s.prop(Gi)==this.data){n.push({from:o,to:o+s.length});return}let l=s.prop(fe.mounted);if(l){if(l.tree.prop(Gi)==this.data){if(l.overlay)for(let a of l.overlay)n.push({from:a.from+o,to:a.to+o});else n.push({from:o,to:o+s.length});return}else if(l.overlay){let a=n.length;if(r(l.tree,l.overlay[0].from+o),n.length>a)return}}for(let a=0;a<s.children.length;a++){let h=s.children[a];h instanceof Me&&r(h,s.positions[a]+o)}};return r(Ye(e),0),n}get allowsNesting(){return!0}}Rt.setState=ue.define();function Yu(i,e,t){let n=i.facet(Ri),r=Ye(i).topNode;if(!n||n.allowsNesting)for(let s=r;s;s=s.enter(e,t,Ne.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Ea extends Rt{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=S0(e.languageData);return new Ea(t,e.parser.configure({props:[Gi.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Ea(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ye(i){let e=i.field(Rt.state,!1);return e?e.tree:Me.empty}class rS{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let nr=null;class Hn{constructor(e,t,n=[],r,s,o,l,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Hn(e,t,[],Me.empty,0,n,[],null)}startParse(){return this.parser.startParse(new rS(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Me.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(bi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(bi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=nr;nr=this;try{return e()}finally{nr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Zu(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((h,c,u,f)=>a.push({fromA:h,toA:c,fromB:u,toB:f})),n=bi.applyChanges(n,a),r=Me.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let h of this.skipped){let c=e.mapPos(h.from,1),u=e.mapPos(h.to,-1);c<u&&l.push({from:c,to:u})}}}return new Hn(this.parser,t,n,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:s}=this.skipped[n];r<e.to&&s>e.from&&(this.fragments=Zu(this.fragments,r,s),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends v0{createParse(t,n,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=nr;if(a){for(let h of r)a.tempSkipped.push(h);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Me(dt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return nr}}function Zu(i,e,t){return bi.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class Fn{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Fn(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Hn.create(e.facet(Ri).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Fn(n)}}Rt.state=wt.define({create:Fn.init,update(i,e){for(let t of e.effects)if(t.is(Rt.setState))return t.value;return e.startState.facet(Ri)!=e.state.facet(Ri)?Fn.init(e.state):i.apply(e)}});let A0=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(A0=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const ml=typeof navigator<"u"&&(!((pl=navigator.scheduling)===null||pl===void 0)&&pl.isInputPending)?()=>navigator.scheduling.isInputPending():null,sS=it.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Rt.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Rt.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=A0(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,s=n.field(Rt.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ml?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&n.doc.length>r+1e3,a=s.context.work(()=>ml&&ml()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Rt.setState.of(new Fn(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>jt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ri=q.define({combine(i){return i.length?i[0]:null},enables:i=>[Rt.state,sS,J.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]});class jM{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class E0{constructor(e,t,n,r,s,o=void 0){this.name=e,this.alias=t,this.extensions=n,this.filename=r,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:n}=e;if(!t){if(!n)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(n)}return new E0(e.name,(e.alias||[]).concat(e.name).map(r=>r.toLowerCase()),e.extensions||[],e.filename,t,n)}static matchFilename(e,t){for(let r of e)if(r.filename&&r.filename.test(t))return r;let n=/\.([^.]+)$/.exec(t);if(n){for(let r of e)if(r.extensions.indexOf(n[1])>-1)return r}return null}static matchLanguageName(e,t,n=!0){t=t.toLowerCase();for(let r of e)if(r.alias.some(s=>s==t))return r;if(n)for(let r of e)for(let s of r.alias){let o=t.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(t[o-1])&&!/\w/.test(t[o+s.length])))return r}return null}}const C0=q.define(),vo=q.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Qi(i){let e=i.facet(vo);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function Ir(i,e){let t="",n=i.tabSize,r=i.facet(vo)[0];if(r=="	"){for(;e>=n;)t+="	",e-=n;r=" "}for(let s=0;s<e;s++)t+=r;return t}function uh(i,e){i instanceof be&&(i=new ko(i));for(let n of i.state.facet(C0)){let r=n(i,e);if(r!==void 0)return r}let t=Ye(i.state);return t?lS(i,t,e):null}class ko{constructor(e,t={}){this.state=e,this.options=t,this.unit=Qi(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=n.from&&r<=n.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,t=e.length){return qr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const oS=new fe;function lS(i,e,t){return T0(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,i)}function aS(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function hS(i){let e=i.type.prop(oS);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(fe.closedBy))){let r=i.lastChild,s=r&&n.indexOf(r.name)>-1;return o=>M0(o,!0,1,void 0,s&&!aS(o)?r.from:void 0)}return i.parent==null?cS:null}function T0(i,e,t){for(;i;i=i.parent){let n=hS(i);if(n)return n(fh.create(t,e,i))}return null}function cS(){return 0}class fh extends ko{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new fh(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(uS(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?T0(e,this.pos,this.base):0}}function uS(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function fS(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let r=i.options.simulateBreak,s=i.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==n)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function zM({closing:i,align:e=!0,units:t=1}){return n=>M0(n,e,t,i)}function M0(i,e,t,n,r){let s=i.textAfter,o=s.match(/^\s*/)[0].length,l=n&&s.slice(o,o+n.length)==n||r==i.pos+o,a=e?fS(i):null;return a?l?i.column(a.from):i.column(a.to):i.baseIndent+(l?0:i.unit*t)}const WM=i=>i.baseIndent;function GM({except:i,units:e=1}={}){return t=>{let n=i&&i.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const dS=200;function pS(){return be.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,r=t.lineAt(n);if(n>r.from+dS)return i;let s=t.sliceString(r.from,n);if(!e.some(h=>h.test(s)))return i;let{state:o}=i,l=-1,a=[];for(let{head:h}of o.selection.ranges){let c=o.doc.lineAt(h);if(c.from==l)continue;l=c.from;let u=uh(o,c.from);if(u==null)continue;let f=/^\s*/.exec(c.text)[0],d=Ir(o,u);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[i,{changes:a,sequential:!0}]:i})}const mS=q.define(),gS=new fe;function qM(i){let e=i.firstChild,t=i.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?i.to:t.from}:null}function bS(i,e,t){let n=Ye(i);if(n.length<t)return null;let r=n.resolveInner(t,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(gS);if(l&&(o.to<n.length-50||n.length==i.doc.length||!_S(o))){let a=l(o,i);a&&a.from<=t&&a.from>=e&&a.to>t&&(s=a)}}return s}function _S(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function ro(i,e,t){for(let n of i.facet(mS)){let r=n(i,e,t);if(r)return r}return bS(i,e,t)}function O0(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const xo=ue.define({map:O0}),Kr=ue.define({map:O0});function D0(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const en=wt.define({create(){return he.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)t.is(xo)&&!yS(i,t.value.from,t.value.to)?i=i.update({add:[Qu.range(t.value.from,t.value.to)]}):t.is(Kr)&&(i=i.update({filter:(n,r)=>t.value.from!=n||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;i.between(n,n,(r,s)=>{r<n&&s>n&&(t=!0)}),t&&(i=i.update({filterFrom:n,filterTo:n,filter:(r,s)=>s<=n||r>=n}))}return i},provide:i=>J.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,r)=>{t.push(n,r)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],r=i[t++];if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(Qu.range(n,r))}return he.set(e,!0)}});function so(i,e,t){var n;let r=null;return(n=i.field(en,!1))===null||n===void 0||n.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function yS(i,e,t){let n=!1;return i.between(e,e,(r,s)=>{r==e&&s==t&&(n=!0)}),n}function P0(i,e){return i.field(en,!1)?e:e.concat(ue.appendConfig.of(R0()))}const wS=i=>{for(let e of D0(i)){let t=ro(i.state,e.from,e.to);if(t)return i.dispatch({effects:P0(i.state,[xo.of(t),L0(i,t)])}),!0}return!1},vS=i=>{if(!i.state.field(en,!1))return!1;let e=[];for(let t of D0(i)){let n=so(i.state,t.from,t.to);n&&e.push(Kr.of(n),L0(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function L0(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,r=i.state.doc.lineAt(e.to).number;return J.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${r}.`)}const kS=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let r=i.lineBlockAt(n),s=ro(e,r.from,r.to);s&&t.push(xo.of(s)),n=(s?i.lineBlockAt(s.to):r).to+1}return t.length&&i.dispatch({effects:P0(i.state,t)}),!!t.length},xS=i=>{let e=i.state.field(en,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,r)=>{t.push(Kr.of({from:n,to:r}))}),i.dispatch({effects:t}),!0},SS=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:wS},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:vS},{key:"Ctrl-Alt-[",run:kS},{key:"Ctrl-Alt-]",run:xS}],AS={placeholderDOM:null,placeholderText:"…"},ES=q.define({combine(i){return on(i,AS)}});function R0(i){return[en,MS]}const Qu=he.replace({widget:new class extends ui{toDOM(i){let{state:e}=i,t=e.facet(ES),n=s=>{let o=i.lineBlockAt(i.posAtDOM(s.target)),l=so(i.state,o.from,o.to);l&&i.dispatch({effects:Kr.of(l)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(i,n);let r=document.createElement("span");return r.textContent=t.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=n,r}}}),CS={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class gl extends Li{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function TS(i={}){let e=Object.assign(Object.assign({},CS),i),t=new gl(e,!0),n=new gl(e,!1),r=it.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ri)!=o.state.facet(Ri)||o.startState.field(en,!1)!=o.state.field(en,!1)||Ye(o.startState)!=Ye(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Yi;for(let a of o.viewportLineBlocks){let h=so(o.state,a.from,a.to)?n:ro(o.state,a.from,a.to)?t:null;h&&l.add(a.from,a.from,h)}return l.finish()}}),{domEventHandlers:s}=e;return[r,Tx({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||Se.empty},initialSpacer(){return new gl(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let h=so(o.state,l.from,l.to);if(h)return o.dispatch({effects:Kr.of(h)}),!0;let c=ro(o.state,l.from,l.to);return c?(o.dispatch({effects:xo.of(c)}),!0):!1}})}),R0()]}const MS=J.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Gn{constructor(e,t){this.specs=e;let n;function r(l){let a=Oi.newName();return(n||(n=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Rt?l=>l.prop(Gi)==o.data:o?l=>l==o:void 0,this.style=x0(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=n?new Oi(n):null,this.themeType=t.themeType}static define(e,t){return new Gn(e,t||{})}}const Ca=q.define(),I0=q.define({combine(i){return i.length?[i[0]]:null}});function bl(i){let e=i.facet(Ca);return e.length?e:i.facet(I0)}function dh(i,e){let t=[DS],n;return i instanceof Gn&&(i.module&&t.push(J.styleModule.of(i.module)),n=i.themeType),e?.fallback?t.push(I0.of(i)):n?t.push(Ca.computeN([J.darkTheme],r=>r.facet(J.darkTheme)==(n=="dark")?[i]:[])):t.push(Ca.of(i)),t}class OS{constructor(e){this.markCache=Object.create(null),this.tree=Ye(e.state),this.decorations=this.buildDeco(e,bl(e.state))}update(e){let t=Ye(e.state),n=bl(e.state),r=n!=bl(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return he.none;let n=new Yi;for(let{from:r,to:s}of e.visibleRanges)eS(this.tree,t,(o,l,a)=>{n.add(o,l,this.markCache[a]||(this.markCache[a]=he.mark({class:a})))},r,s);return n.finish()}}const DS=Gr.high(it.fromClass(OS,{decorations:i=>i.decorations})),PS=Gn.define([{tag:_.meta,color:"#404740"},{tag:_.link,textDecoration:"underline"},{tag:_.heading,textDecoration:"underline",fontWeight:"bold"},{tag:_.emphasis,fontStyle:"italic"},{tag:_.strong,fontWeight:"bold"},{tag:_.strikethrough,textDecoration:"line-through"},{tag:_.keyword,color:"#708"},{tag:[_.atom,_.bool,_.url,_.contentSeparator,_.labelName],color:"#219"},{tag:[_.literal,_.inserted],color:"#164"},{tag:[_.string,_.deleted],color:"#a11"},{tag:[_.regexp,_.escape,_.special(_.string)],color:"#e40"},{tag:_.definition(_.variableName),color:"#00f"},{tag:_.local(_.variableName),color:"#30a"},{tag:[_.typeName,_.namespace],color:"#085"},{tag:_.className,color:"#167"},{tag:[_.special(_.variableName),_.macroName],color:"#256"},{tag:_.definition(_.propertyName),color:"#00c"},{tag:_.comment,color:"#940"},{tag:_.invalid,color:"#f00"}]),LS=1e4,RS="()[]{}",IS=new fe;function Ta(i,e,t){let n=i.prop(e<0?fe.openedBy:fe.closedBy);if(n)return n;if(i.name.length==1){let r=t.indexOf(i.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function Ma(i){let e=i.type.prop(IS);return e?e(i.node):i}function yn(i,e,t,n={}){let r=n.maxScanDistance||LS,s=n.brackets||RS,o=Ye(i),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let h=Ta(a.type,t,s);if(h&&a.from<a.to){let c=Ma(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return NS(i,e,t,a,c,h,s)}}return BS(i,e,t,o,l.type,r,s)}function NS(i,e,t,n,r,s,o){let l=n.parent,a={from:r.from,to:r.to},h=0,c=l?.cursor();if(c&&(t<0?c.childBefore(n.from):c.childAfter(n.to)))do if(t<0?c.to<=n.from:c.from>=n.to){if(h==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let u=Ma(c);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(Ta(c.type,t,o))h++;else if(Ta(c.type,-t,o)){if(h==0){let u=Ma(c);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}h--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function BS(i,e,t,n,r,s,o){let l=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let h={from:t<0?e-1:e,to:t>0?e+1:e},c=i.doc.iterRange(e,t>0?i.doc.length:0),u=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;t<0&&(f+=d.length);let p=e+f*t;for(let g=t>0?0:d.length-1,m=t>0?d.length:-1;g!=m;g+=t){let b=o.indexOf(d[g]);if(!(b<0||n.resolveInner(p+g,1).type!=r))if(b%2==0==t>0)u++;else{if(u==1)return{start:h,end:{from:p+g,to:p+g+1},matched:b>>1==a>>1};u--}}t>0&&(f+=d.length)}return c.done?{start:h,matched:!1}:null}function ef(i,e,t,n=0,r=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let s=r;for(let o=n;o<e;o++)i.charCodeAt(o)==9?s+=t-s%t:s++;return s}class N0{constructor(e,t,n,r){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ef(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:ef(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let r=o=>n?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function HS(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||FS,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||mh}}function FS(i){if(typeof i!="object")return i;let e={};for(let t in i){let n=i[t];e[t]=n instanceof Array?n.slice():n}return e}const tf=new WeakMap;class ei extends Rt{constructor(e){let t=S0(e.languageData),n=HS(e),r,s=new class extends v0{createParse(o,l,a){return new US(r,o,l,a)}};super(t,s,[C0.of((o,l)=>this.getIndent(o,l))],e.name),this.topNode=WS(t),r=this,this.streamParser=n,this.stateAfter=new fe({perNode:!0}),this.tokenTable=e.tokenTable?new V0(n.tokenTable):zS}static define(e){return new ei(e)}getIndent(e,t){let n=Ye(e.state),r=n.resolve(t);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=tf.get(e.state),s!=null&&s<t-1e4&&(s=void 0));let l=ph(this,n,0,r.from,s??t),a,h;if(l?(h=l.state,a=l.pos+1):(h=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let u=e.state.doc.lineAt(a),f=Math.min(t,u.to);if(u.length){let d=o?o(u.from):-1,p=new N0(u.text,e.state.tabSize,e.unit,d<0?void 0:d);for(;p.pos<f-u.from;)H0(this.streamParser.token,p,h)}else this.streamParser.blankLine(h,e.unit);if(f==t)break;a=u.to+1}let c=e.lineAt(t);return o&&s==null&&tf.set(e.state,c.from),this.streamParser.indent(h,/^\s*(.*)/.exec(c.text)[1],e)}get allowsNesting(){return!1}}function ph(i,e,t,n,r){let s=t>=n&&t+e.length<=r&&e.prop(i.stateAfter);if(s)return{state:i.streamParser.copyState(s),pos:t+e.length};for(let o=e.children.length-1;o>=0;o--){let l=e.children[o],a=t+e.positions[o],h=l instanceof Me&&a<r&&ph(i,l,a,n,r);if(h)return h}return null}function B0(i,e,t,n,r){if(r&&t<=0&&n>=e.length)return e;!r&&e.type==i.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],l=e.children[s],a;if(o<n&&l instanceof Me){if(!(a=B0(i,l,t-o,n-o,r)))break;return r?new Me(e.type,e.children.slice(0,s).concat(a),e.positions.slice(0,s+1),o+a.length):a}}return null}function VS(i,e,t,n){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),l=s<=t&&o>t&&ph(i,r.tree,0-r.offset,t,o),a;if(l&&(a=B0(i,r.tree,t+r.offset,l.pos+r.offset,!1)))return{state:l.state,tree:a}}return{state:i.streamParser.startState(n?Qi(n):4),tree:Me.empty}}class US{constructor(e,t,n,r){this.lang=e,this.input=t,this.fragments=n,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Hn.get(),o=r[0].from,{state:l,tree:a}=VS(e,n,o,s?.state);this.state=l,this.parsedPos=this.chunkStart=o+a.length;for(let h=0;h<a.children.length;h++)this.chunks.push(a.children[h]),this.chunkPos.push(a.positions[h]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Qi(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Hn.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=n||(t=t.slice(0,s-(n-t.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,l=this.lineAfter(o);t+=l,n=o+l.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+t;if(n>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;t+=o-r}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,r,s){if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(n,s,-1),n+=s,r+=this.chunk.length-o}return this.chunk.push(e,t,n,r),s}parseLine(e){let{line:t,end:n}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new N0(t,e?e.state.tabSize:4,e?Qi(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let l=H0(s.token,o,this.state);if(l&&(r=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Me.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:jS,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Me(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Me(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function H0(i,e,t){e.start=e.pos;for(let n=0;n<10;n++){let r=i(e,t);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const mh=Object.create(null),Nr=[dt.none],jS=new lh(Nr),nf=[],F0=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])F0[i]=U0(mh,e);class V0{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),F0)}resolve(e){return e?this.table[e]||(this.table[e]=U0(this.extra,e)):0}}const zS=new V0(mh);function _l(i,e){nf.indexOf(i)>-1||(nf.push(i),console.warn(e))}function U0(i,e){let t=null;for(let s of e.split(".")){let o=i[s]||_[s];o?typeof o=="function"?t?t=o(t):_l(s,`Modifier ${s} used at start of tag`):t?_l(s,`Tag ${s} used as modifier`):t=o:_l(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),r=dt.define({id:Nr.length,name:n,props:[Zx({[n]:t})]});return Nr.push(r),r.id}function WS(i){let e=dt.define({id:Nr.length,name:"Document",props:[Gi.add(()=>i)]});return Nr.push(e),e}const GS=i=>{let e=bh(i.state);return e.line?qS(i):e.block?KS(i):!1};function gh(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=i(e,t);return r?(n(t.update(r)),!0):!1}}const qS=gh(YS,0),$S=gh(j0,0),KS=gh((i,e)=>j0(i,e,JS(e)),0);function bh(i,e=i.selection.main.head){let t=i.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const rr=50;function XS(i,{open:e,close:t},n,r){let s=i.sliceDoc(n-rr,n),o=i.sliceDoc(r,r+rr),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,h=s.length-l;if(s.slice(h-e.length,h)==e&&o.slice(a,a+t.length)==t)return{open:{pos:n-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,u;r-n<=2*rr?c=u=i.sliceDoc(n,r):(c=i.sliceDoc(n,n+rr),u=i.sliceDoc(r-rr,r));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-t.length;return c.slice(f,f+e.length)==e&&u.slice(p,p+t.length)==t?{open:{pos:n+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function JS(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),r=t.to<=n.to?n:i.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=r.to:e.push({from:n.from,to:r.to})}return e}function j0(i,e,t=e.selection.ranges){let n=t.map(s=>bh(e,s.from).block);if(!n.every(s=>s))return null;let r=t.map((s,o)=>XS(e,n[o],s.from,s.to));if(i!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:n[o].open+" "},{from:s.to,insert:" "+n[o].close}]))};if(i!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=n[o],{open:h,close:c}=l;s.push({from:h.pos-a.open.length,to:h.pos+h.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function YS(i,e,t=e.selection.ranges){let n=[],r=-1;for(let{from:s,to:o}of t){let l=n.length,a=1e9;for(let h=s;h<=o;){let c=e.doc.lineAt(h);if(c.from>r&&(s==o||o>c.from)){r=c.from;let u=bh(e,h).line;if(!u)continue;let f=/^\s*/.exec(c.text)[0].length,d=f==c.length,p=c.text.slice(f,f+u.length)==u?f:-1;f<c.text.length&&f<a&&(a=f),n.push({line:c,comment:p,token:u,indent:f,empty:d,single:!1})}h=c.to+1}if(a<1e9)for(let h=l;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=a);n.length==l+1&&(n[l].single=!0)}if(i!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:h,empty:c,single:u}of n)(u||!c)&&s.push({from:l.from+h,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(i!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of n)if(l>=0){let h=o.from+l,c=h+a.length;o.text[c-o.from]==" "&&c++,s.push({from:h,to:c})}return{changes:s}}return null}const Oa=sn.define(),ZS=sn.define(),QS=q.define(),z0=q.define({combine(i){return on(i,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function eA(i){let e=0;return i.iterChangedRanges((t,n)=>e=n),e}const W0=wt.define({create(){return li.empty},update(i,e){let t=e.state.facet(z0),n=e.annotation(Oa);if(n){let a=e.docChanged?C.single(eA(e.changes)):void 0,h=bt.fromTransaction(e,a),c=n.side,u=c==0?i.undone:i.done;return h?u=oo(u,u.length,t.minDepth,h):u=$0(u,e.startState.selection),new li(c==0?n.rest:u,c==0?u:n.rest)}let r=e.annotation(ZS);if((r=="full"||r=="before")&&(i=i.isolate()),e.annotation(We.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let s=bt.fromTransaction(e),o=e.annotation(We.time),l=e.annotation(We.userEvent);return s?i=i.addChanges(s,o,l,t.newGroupDelay,t.minDepth):e.selection&&(i=i.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(r=="full"||r=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new li(i.done.map(bt.fromJSON),i.undone.map(bt.fromJSON))}});function tA(i={}){return[W0,z0.of(i),J.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?G0:e.inputType=="historyRedo"?Da:null;return n?(e.preventDefault(),n(t)):!1}})]}function So(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let r=t.field(W0,!1);if(!r)return!1;let s=r.pop(i,t,e);return s?(n(s),!0):!1}}const G0=So(0,!1),Da=So(1,!1),iA=So(0,!0),nA=So(1,!0);class bt{constructor(e,t,n,r,s){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new bt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new bt(e.changes&&ze.fromJSON(e.changes),[],e.mapped&&ai.fromJSON(e.mapped),e.startSelection&&C.fromJSON(e.startSelection),e.selectionsAfter.map(C.fromJSON))}static fromTransaction(e,t){let n=It;for(let r of e.startState.facet(QS)){let s=r(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new bt(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,It)}static selection(e){return new bt(void 0,It,void 0,void 0,e)}}function oo(i,e,t,n){let r=e+1>t+20?e-t-1:0,s=i.slice(r,e);return s.push(n),s}function rA(i,e){let t=[],n=!1;return i.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<t.length;){let h=t[a++],c=t[a++];l>=h&&o<=c&&(n=!0)}}),n}function sA(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function q0(i,e){return i.length?e.length?i.concat(e):i:e}const It=[],oA=200;function $0(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-oA));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),oo(i,i.length-1,1e9,t.setSelAfter(n)))}else return[bt.selection([e])]}function lA(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function yl(i,e){if(!i.length)return i;let t=i.length,n=It;for(;t;){let r=aA(i[t-1],e,n);if(r.changes&&!r.changes.empty||r.effects.length){let s=i.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,n=r.selectionsAfter}return n.length?[bt.selection(n)]:It}function aA(i,e,t){let n=q0(i.selectionsAfter.length?i.selectionsAfter.map(l=>l.map(e)):It,t);if(!i.changes)return bt.selection(n);let r=i.changes.map(e),s=e.mapDesc(i.changes,!0),o=i.mapped?i.mapped.composeDesc(s):s;return new bt(r,ue.mapEffects(i.effects,e),o,i.startSelection.map(s),n)}const hA=/^(input\.type|delete)($|\.)/;class li{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new li(this.done,this.undone):this}addChanges(e,t,n,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!n||hA.test(n))&&(!l.selectionsAfter.length&&t-this.prevTime<r&&rA(l.changes,e.changes)||n=="input.type.compose")?o=oo(o,o.length-1,s,new bt(e.changes.compose(l.changes),q0(e.effects,l.effects),l.mapped,l.startSelection,It)):o=oo(o,o.length,s,e),new li(o,It,t,n)}addSelection(e,t,n,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:It;return s.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&sA(s[s.length-1],e)?this:new li($0(this.done,e),this.undone,t,n)}addMapping(e){return new li(yl(this.done,e),yl(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(n&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Oa.of({side:e,rest:lA(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?It:r.slice(0,r.length-1);return s.mapped&&(o=yl(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Oa.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}li.empty=new li(It,It);const cA=[{key:"Mod-z",run:G0,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Da,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Da,preventDefault:!0},{key:"Mod-u",run:iA,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:nA,preventDefault:!0}];function qn(i,e){return C.create(i.ranges.map(e),i.mainIndex)}function fi(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Kt({state:i,dispatch:e},t){let n=qn(i.selection,t);return n.eq(i.selection)?!1:(e(fi(i,n)),!0)}function Ao(i,e){return C.cursor(e?i.to:i.from)}function K0(i,e){return Kt(i,t=>t.empty?i.moveByChar(t,e):Ao(t,e))}function st(i){return i.textDirectionAt(i.state.selection.main.head)==Ie.LTR}const X0=i=>K0(i,!st(i)),J0=i=>K0(i,st(i));function Y0(i,e){return Kt(i,t=>t.empty?i.moveByGroup(t,e):Ao(t,e))}const uA=i=>Y0(i,!st(i)),fA=i=>Y0(i,st(i));function dA(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Eo(i,e,t){let n=Ye(i).resolveInner(e.head),r=t?fe.closedBy:fe.openedBy;for(let a=e.head;;){let h=t?n.childAfter(a):n.childBefore(a);if(!h)break;dA(i,h,r)?n=h:a=t?h.to:h.from}let s=n.type.prop(r),o,l;return s&&(o=t?yn(i,n.from,1):yn(i,n.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?n.to:n.from,C.cursor(l,t?-1:1)}const pA=i=>Kt(i,e=>Eo(i.state,e,!st(i))),mA=i=>Kt(i,e=>Eo(i.state,e,st(i)));function Z0(i,e){return Kt(i,t=>{if(!t.empty)return Ao(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const Q0=i=>Z0(i,!1),eb=i=>Z0(i,!0);function tb(i){return Math.max(i.defaultLineHeight,Math.min(i.dom.clientHeight,innerHeight)-5)}function ib(i,e){let{state:t}=i,n=qn(t.selection,l=>l.empty?i.moveVertically(l,e,tb(i)):Ao(l,e));if(n.eq(t.selection))return!1;let r=i.coordsAtPos(t.selection.main.head),s=i.scrollDOM.getBoundingClientRect(),o;return r&&r.top>s.top&&r.bottom<s.bottom&&r.top-s.top<=i.scrollDOM.scrollHeight-i.scrollDOM.scrollTop-i.scrollDOM.clientHeight&&(o=J.scrollIntoView(n.main.head,{y:"start",yMargin:r.top-s.top})),i.dispatch(fi(t,n),{effects:o}),!0}const rf=i=>ib(i,!1),Pa=i=>ib(i,!0);function Ni(i,e,t){let n=i.lineBlockAt(e.head),r=i.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?n.to:n.from)&&(r=i.moveToLineBoundary(e,t,!1)),!t&&r.head==n.from&&n.length){let s=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(r=C.cursor(n.from+s))}return r}const gA=i=>Kt(i,e=>Ni(i,e,!0)),bA=i=>Kt(i,e=>Ni(i,e,!1)),_A=i=>Kt(i,e=>Ni(i,e,!st(i))),yA=i=>Kt(i,e=>Ni(i,e,st(i))),wA=i=>Kt(i,e=>C.cursor(i.lineBlockAt(e.head).from,1)),vA=i=>Kt(i,e=>C.cursor(i.lineBlockAt(e.head).to,-1));function kA(i,e,t){let n=!1,r=qn(i.selection,s=>{let o=yn(i,s.head,-1)||yn(i,s.head,1)||s.head>0&&yn(i,s.head-1,1)||s.head<i.doc.length&&yn(i,s.head+1,-1);if(!o||!o.end)return s;n=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return C.cursor(l)});return n?(e(fi(i,r)),!0):!1}const xA=({state:i,dispatch:e})=>kA(i,e);function Ht(i,e){let t=qn(i.state.selection,n=>{let r=e(n);return C.range(n.anchor,r.head,r.goalColumn)});return t.eq(i.state.selection)?!1:(i.dispatch(fi(i.state,t)),!0)}function nb(i,e){return Ht(i,t=>i.moveByChar(t,e))}const rb=i=>nb(i,!st(i)),sb=i=>nb(i,st(i));function ob(i,e){return Ht(i,t=>i.moveByGroup(t,e))}const SA=i=>ob(i,!st(i)),AA=i=>ob(i,st(i)),EA=i=>Ht(i,e=>Eo(i.state,e,!st(i))),CA=i=>Ht(i,e=>Eo(i.state,e,st(i)));function lb(i,e){return Ht(i,t=>i.moveVertically(t,e))}const ab=i=>lb(i,!1),hb=i=>lb(i,!0);function cb(i,e){return Ht(i,t=>i.moveVertically(t,e,tb(i)))}const sf=i=>cb(i,!1),of=i=>cb(i,!0),TA=i=>Ht(i,e=>Ni(i,e,!0)),MA=i=>Ht(i,e=>Ni(i,e,!1)),OA=i=>Ht(i,e=>Ni(i,e,!st(i))),DA=i=>Ht(i,e=>Ni(i,e,st(i))),PA=i=>Ht(i,e=>C.cursor(i.lineBlockAt(e.head).from)),LA=i=>Ht(i,e=>C.cursor(i.lineBlockAt(e.head).to)),lf=({state:i,dispatch:e})=>(e(fi(i,{anchor:0})),!0),af=({state:i,dispatch:e})=>(e(fi(i,{anchor:i.doc.length})),!0),hf=({state:i,dispatch:e})=>(e(fi(i,{anchor:i.selection.main.anchor,head:0})),!0),cf=({state:i,dispatch:e})=>(e(fi(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),RA=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),IA=({state:i,dispatch:e})=>{let t=To(i).map(({from:n,to:r})=>C.range(n,Math.min(r+1,i.doc.length)));return e(i.update({selection:C.create(t),userEvent:"select"})),!0},NA=({state:i,dispatch:e})=>{let t=qn(i.selection,n=>{var r;let s=Ye(i).resolveInner(n.head,1);for(;!(s.from<n.from&&s.to>=n.to||s.to>n.to&&s.from<=n.from||!(!((r=s.parent)===null||r===void 0)&&r.parent));)s=s.parent;return C.range(s.to,s.from)});return e(fi(i,t)),!0},BA=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=C.create([t.main]):t.main.empty||(n=C.create([C.cursor(t.main.head)])),n?(e(fi(i,n)),!0):!1};function Co(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,r=n.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(t="delete.backward",a=ys(i,a,!1)):a>o&&(t="delete.forward",a=ys(i,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=ys(i,o,!1),l=ys(i,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:C.cursor(o)}});return r.changes.empty?!1:(i.dispatch(n.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?J.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function ys(i,e,t){if(i instanceof J)for(let n of i.state.facet(J.atomicRanges).map(r=>r(i)))n.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const ub=(i,e)=>Co(i,t=>{let{state:n}=i,r=n.doc.lineAt(t),s,o;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,t-r.from))){if(s[s.length-1]=="	")return t-1;let l=qr(s,n.tabSize),a=l%Qi(n)||Qi(n);for(let h=0;h<a&&s[s.length-1-h]==" ";h++)t--;o=t}else o=At(r.text,t-r.from,e,e)+r.from,o==t&&r.number!=(e?n.doc.lines:1)&&(o+=e?1:-1);return o}),La=i=>ub(i,!1),fb=i=>ub(i,!0),db=(i,e)=>Co(i,t=>{let n=t,{state:r}=i,s=r.doc.lineAt(n),o=r.charCategorizer(n);for(let l=null;;){if(n==(e?s.to:s.from)){n==t&&s.number!=(e?r.doc.lines:1)&&(n+=e?1:-1);break}let a=At(s.text,n-s.from,e)+s.from,h=s.text.slice(Math.min(n,a)-s.from,Math.max(n,a)-s.from),c=o(h);if(l!=null&&c!=l)break;(h!=" "||n!=t)&&(l=c),n=a}return n}),pb=i=>db(i,!1),HA=i=>db(i,!0),mb=i=>Co(i,e=>{let t=i.lineBlockAt(e).to;return e<t?t:Math.min(i.state.doc.length,e+1)}),FA=i=>Co(i,e=>{let t=i.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),VA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:ve.of(["",""])},range:C.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},UA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let r=n.from,s=i.doc.lineAt(r),o=r==s.from?r-1:At(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:At(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:i.doc.slice(r,l).append(i.doc.slice(o,r))},range:C.cursor(l)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function To(i){let e=[],t=-1;for(let n of i.selection.ranges){let r=i.doc.lineAt(n.from),s=i.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=i.doc.lineAt(n.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(n)}else e.push({from:r.from,to:s.to,ranges:[n]});t=s.number+1}return e}function gb(i,e,t){if(i.readOnly)return!1;let n=[],r=[];for(let s of To(i)){if(t?s.to==i.doc.length:s.from==0)continue;let o=i.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){n.push({from:s.to,to:o.to},{from:s.from,insert:o.text+i.lineBreak});for(let a of s.ranges)r.push(C.range(Math.min(i.doc.length,a.anchor+l),Math.min(i.doc.length,a.head+l)))}else{n.push({from:o.from,to:s.from},{from:s.to,insert:i.lineBreak+o.text});for(let a of s.ranges)r.push(C.range(a.anchor-l,a.head-l))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:C.create(r,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const jA=({state:i,dispatch:e})=>gb(i,e,!1),zA=({state:i,dispatch:e})=>gb(i,e,!0);function bb(i,e,t){if(i.readOnly)return!1;let n=[];for(let r of To(i))t?n.push({from:r.from,insert:i.doc.slice(r.from,r.to)+i.lineBreak}):n.push({from:r.to,insert:i.lineBreak+i.doc.slice(r.from,r.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const WA=({state:i,dispatch:e})=>bb(i,e,!1),GA=({state:i,dispatch:e})=>bb(i,e,!0),qA=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(To(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),n=qn(e.selection,r=>i.moveVertically(r,!0)).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $A(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ye(i).resolveInner(e),n=t.childBefore(e),r=t.childAfter(e),s;return n&&r&&n.to<=e&&r.from>=e&&(s=n.type.prop(fe.closedBy))&&s.indexOf(r.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(r.from).from?{from:n.to,to:r.from}:null}const KA=_b(!1),XA=_b(!0);function _b(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!i&&s==o&&$A(e,s);i&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let h=new ko(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=uh(h,s);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",Ir(e,c)];return a&&u.push(Ir(e,h.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ve.of(u)},range:C.cursor(s+1+u[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function _h(i,e){let t=-1;return i.changeByRange(n=>{let r=[];for(let o=n.from;o<=n.to;){let l=i.doc.lineAt(o);l.number>t&&(n.empty||n.to>l.from)&&(e(l,r,n),t=l.number),o=l.to+1}let s=i.changes(r);return{changes:r,range:C.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const JA=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new ko(i,{overrideIndentation:s=>{let o=t[s];return o??-1}}),r=_h(i,(s,o,l)=>{let a=uh(n,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let h=/^\s*/.exec(s.text)[0],c=Ir(i,a);(h!=c||l.from<s.from+h.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+h.length,insert:c}))});return r.changes.empty||e(i.update(r,{userEvent:"indent"})),!0},yb=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(_h(i,(t,n)=>{n.push({from:t.from,insert:i.facet(vo)})}),{userEvent:"input.indent"})),!0),wb=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(_h(i,(t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=qr(r,i.tabSize),o=0,l=Ir(i,Math.max(0,s-Qi(i)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),YA=[{key:"Ctrl-b",run:X0,shift:rb,preventDefault:!0},{key:"Ctrl-f",run:J0,shift:sb},{key:"Ctrl-p",run:Q0,shift:ab},{key:"Ctrl-n",run:eb,shift:hb},{key:"Ctrl-a",run:wA,shift:PA},{key:"Ctrl-e",run:vA,shift:LA},{key:"Ctrl-d",run:fb},{key:"Ctrl-h",run:La},{key:"Ctrl-k",run:mb},{key:"Ctrl-Alt-h",run:pb},{key:"Ctrl-o",run:VA},{key:"Ctrl-t",run:UA},{key:"Ctrl-v",run:Pa}],ZA=[{key:"ArrowLeft",run:X0,shift:rb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:uA,shift:SA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_A,shift:OA,preventDefault:!0},{key:"ArrowRight",run:J0,shift:sb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:fA,shift:AA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:yA,shift:DA,preventDefault:!0},{key:"ArrowUp",run:Q0,shift:ab,preventDefault:!0},{mac:"Cmd-ArrowUp",run:lf,shift:hf},{mac:"Ctrl-ArrowUp",run:rf,shift:sf},{key:"ArrowDown",run:eb,shift:hb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:af,shift:cf},{mac:"Ctrl-ArrowDown",run:Pa,shift:of},{key:"PageUp",run:rf,shift:sf},{key:"PageDown",run:Pa,shift:of},{key:"Home",run:bA,shift:MA,preventDefault:!0},{key:"Mod-Home",run:lf,shift:hf},{key:"End",run:gA,shift:TA,preventDefault:!0},{key:"Mod-End",run:af,shift:cf},{key:"Enter",run:KA},{key:"Mod-a",run:RA},{key:"Backspace",run:La,shift:La},{key:"Delete",run:fb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pb},{key:"Mod-Delete",mac:"Alt-Delete",run:HA},{mac:"Mod-Backspace",run:FA},{mac:"Mod-Delete",run:mb}].concat(YA.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),QA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:pA,shift:EA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:mA,shift:CA},{key:"Alt-ArrowUp",run:jA},{key:"Shift-Alt-ArrowUp",run:WA},{key:"Alt-ArrowDown",run:zA},{key:"Shift-Alt-ArrowDown",run:GA},{key:"Escape",run:BA},{key:"Mod-Enter",run:XA},{key:"Alt-l",mac:"Ctrl-l",run:IA},{key:"Mod-i",run:NA,preventDefault:!0},{key:"Mod-[",run:wb},{key:"Mod-]",run:yb},{key:"Mod-Alt-\\",run:JA},{key:"Shift-Mod-k",run:qA},{key:"Shift-Mod-\\",run:xA},{key:"Mod-/",run:GS},{key:"Alt-A",run:$S}].concat(ZA),eE={key:"Tab",run:yb,shift:wb},tE="#2E3235",ti="#DDDDDD",wr="#B9D2FF",ws="#b0b0b0",iE="#e0e0e0",vb="#808080",wl="#000000",nE="#A54543",kb="#fc6d24",Ui="#fda331",vl="#8abeb7",uf="#b5bd68",sr="#6fb3d2",or="#cc99cc",rE="#6987AF",ff=kb,df="#292d30",vs=wr+"30",sE=tE,kl=ti,oE="#202325",pf=ti,lE=J.theme({"&":{color:ti,backgroundColor:sE},".cm-content":{caretColor:pf},".cm-cursor, .cm-dropCursor":{borderLeftColor:pf},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:oE},".cm-panels":{backgroundColor:df,color:ws},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:wr,outline:`1px solid ${ws}`,color:wl},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:iE,color:wl},".cm-activeLine":{backgroundColor:vs},".cm-selectionMatch":{backgroundColor:vs},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${ws}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:wr,color:wl},".cm-gutters":{borderRight:"1px solid #ffffff10",color:vb,backgroundColor:df},".cm-activeLineGutter":{backgroundColor:vs},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:wr},".cm-tooltip":{border:"none",backgroundColor:kl},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:kl,borderBottomColor:kl},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:vs,color:ws}}},{dark:!0}),aE=Gn.define([{tag:_.keyword,color:Ui},{tag:[_.name,_.deleted,_.character,_.propertyName,_.macroName],color:uf},{tag:[_.variableName],color:sr},{tag:[_.function(_.variableName)],color:Ui},{tag:[_.labelName],color:kb},{tag:[_.color,_.constant(_.name),_.standard(_.name)],color:Ui},{tag:[_.definition(_.name),_.separator],color:or},{tag:[_.brace],color:or},{tag:[_.annotation],color:ff},{tag:[_.number,_.changed,_.annotation,_.modifier,_.self,_.namespace],color:Ui},{tag:[_.typeName,_.className],color:sr},{tag:[_.operator,_.operatorKeyword],color:or},{tag:[_.tagName],color:Ui},{tag:[_.squareBracket],color:or},{tag:[_.angleBracket],color:or},{tag:[_.attributeName],color:sr},{tag:[_.regexp],color:Ui},{tag:[_.quote],color:ti},{tag:[_.string],color:uf},{tag:_.link,color:rE,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[_.url,_.escape,_.special(_.string)],color:vl},{tag:[_.meta],color:nE},{tag:[_.comment],color:vb,fontStyle:"italic"},{tag:_.monospace,color:ti},{tag:_.strong,fontWeight:"bold",color:Ui},{tag:_.emphasis,fontStyle:"italic",color:sr},{tag:_.strikethrough,textDecoration:"line-through"},{tag:_.heading,fontWeight:"bold",color:ti},{tag:_.special(_.heading1),fontWeight:"bold",color:ti},{tag:_.heading1,fontWeight:"bold",color:ti},{tag:[_.heading2,_.heading3,_.heading4],fontWeight:"bold",color:ti},{tag:[_.heading5,_.heading6],color:ti},{tag:[_.atom,_.bool,_.special(_.variableName)],color:vl},{tag:[_.processingInstruction,_.inserted],color:vl},{tag:[_.contentSeparator],color:sr},{tag:_.invalid,color:wr,borderBottom:`1px dotted ${ff}`}]),hE=[lE,dh(aE)],mf="#2e3440",yh="#3b4252",gf="#434c5e",ks="#4c566a",bf="#e5e9f0",Ra="#eceff4",xl="#8fbcbb",_f="#88c0d0",cE="#81a1c1",Ut="#5e81ac",uE="#bf616a",mn="#d08770",Sl="#ebcb8b",yf="#a3be8c",fE="#b48ead",wf="#d30102",wh=Ra,Al=wh,dE="#ffffff",El=yh,pE=wh,vf=yh,mE=J.theme({"&":{color:mf,backgroundColor:dE},".cm-content":{caretColor:vf},".cm-cursor, .cm-dropCursor":{borderLeftColor:vf},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:pE},".cm-panels":{backgroundColor:wh,color:ks},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${ks}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:bf},".cm-activeLine":{backgroundColor:Al},".cm-selectionMatch":{backgroundColor:bf},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${ks}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ra},".cm-gutters":{backgroundColor:Ra,color:mf,border:"none"},".cm-activeLineGutter":{backgroundColor:Al},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:El},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:El,borderBottomColor:El},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Al,color:ks}}},{dark:!1}),gE=Gn.define([{tag:_.keyword,color:Ut},{tag:[_.name,_.deleted,_.character,_.propertyName,_.macroName],color:mn},{tag:[_.variableName],color:mn},{tag:[_.function(_.variableName)],color:Ut},{tag:[_.labelName],color:cE},{tag:[_.color,_.constant(_.name),_.standard(_.name)],color:Ut},{tag:[_.definition(_.name),_.separator],color:yf},{tag:[_.brace],color:xl},{tag:[_.annotation],color:wf},{tag:[_.number,_.changed,_.annotation,_.modifier,_.self,_.namespace],color:_f},{tag:[_.typeName,_.className],color:Sl},{tag:[_.operator,_.operatorKeyword],color:yf},{tag:[_.tagName],color:fE},{tag:[_.squareBracket],color:uE},{tag:[_.angleBracket],color:mn},{tag:[_.attributeName],color:Sl},{tag:[_.regexp],color:Ut},{tag:[_.quote],color:yh},{tag:[_.string],color:mn},{tag:_.link,color:xl,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[_.url,_.escape,_.special(_.string)],color:mn},{tag:[_.meta],color:_f},{tag:[_.comment],color:gf,fontStyle:"italic"},{tag:_.strong,fontWeight:"bold",color:Ut},{tag:_.emphasis,fontStyle:"italic",color:Ut},{tag:_.strikethrough,textDecoration:"line-through"},{tag:_.heading,fontWeight:"bold",color:Ut},{tag:_.special(_.heading1),fontWeight:"bold",color:Ut},{tag:_.heading1,fontWeight:"bold",color:Ut},{tag:[_.heading2,_.heading3,_.heading4],fontWeight:"bold",color:Ut},{tag:[_.heading5,_.heading6],color:Ut},{tag:[_.atom,_.bool,_.special(_.variableName)],color:mn},{tag:[_.processingInstruction,_.inserted],color:xl},{tag:[_.contentSeparator],color:Sl},{tag:_.invalid,color:gf,borderBottom:`1px dotted ${wf}`}]),bE=[mE,dh(gE)];function kf(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function _E(i){let e=Object.create(null),t=Object.create(null);for(let{label:r}of i){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let n=kf(e)+kf(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function yE(i){let e=i.map(r=>typeof r=="string"?{label:r}:r),[t,n]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:_E(e);return r=>{let s=r.matchBefore(n);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}function $M(i,e){return t=>{for(let n=Ye(t.state).resolveInner(t.pos,-1);n;n=n.parent)if(i.indexOf(n.name)>-1)return null;return e(t)}}class xf{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function Ia(i){return i.selection.main.head}function wE(i,e,t,n){return Object.assign(Object.assign({},i.changeByRange(r=>{if(r==i.selection.main)return{changes:{from:t,to:n,insert:e},range:C.cursor(t+e.length)};let s=n-t;return!r.empty||s&&i.sliceDoc(r.from-s,r.from)!=i.sliceDoc(t,n)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:C.cursor(r.from-s+e.length)}})),{userEvent:"input.complete"})}function xb(i,e){const t=e.completion.apply||e.completion.label;let n=e.source;typeof t=="string"?i.dispatch(wE(i.state,t,n.from,n.to)):t(i,e.completion,n.from,n.to)}const Sf=new WeakMap;function vE(i){if(!Array.isArray(i))return i;let e=Sf.get(i);return e||Sf.set(i,e=yE(i)),e}class kE{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=et(e,t),r=Dt(n);this.chars.push(n);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(et(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:s,byWord:o}=this;if(t.length==1){let w=et(e,0);return w==t[0]?[0,0,Dt(w)]:w==n[0]?[-200,0,Dt(w)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let a=t.length,h=0;if(l<0){for(let w=0,y=Math.min(e.length,200);w<y&&h<a;){let k=et(e,w);(k==t[h]||k==n[h])&&(r[h++]=w),w+=Dt(k)}if(h<a)return null}let c=0,u=0,f=!1,d=0,p=-1,g=-1,m=/[a-z]/.test(e),b=!0;for(let w=0,y=Math.min(e.length,200),k=0;w<y&&u<a;){let A=et(e,w);l<0&&(c<a&&A==t[c]&&(s[c++]=w),d<a&&(A==t[d]||A==n[d]?(d==0&&(p=w),g=w+1,d++):d=0));let x,R=A<255?A>=48&&A<=57||A>=97&&A<=122?2:A>=65&&A<=90?1:0:(x=rg(A))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!w||R==1&&m||k==0&&R!=0)&&(t[u]==A||n[u]==A&&(f=!0)?o[u++]=w:o.length&&(b=!1)),k=R,w+=Dt(A)}return u==a&&o[0]==0&&b?this.result(-100+(f?-200:0),o,e):d==a&&p==0?[-200-e.length,0,g]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-900-e.length,p,g]:u==a?this.result(-100+(f?-200:0)+-700+(b?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,n){let r=[e-n.length],s=1;for(let o of t){let l=o+(this.astral?Dt(et(n,o)):1);s>1&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return r}}const tn=q.define({combine(i){return on(i,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>xE(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})}});function xE(i,e){return i?e?i+" "+e:i:e}function SE(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,r){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<r.length;){let h=r[a++],c=r[a++];h>l&&s.appendChild(document.createTextNode(o.slice(l,h)));let u=s.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(h,c))),u.className="cm-completionMatchedText",l=c}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function Af(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class AE{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this};let n=e.state.field(t),{options:r,selected:s}=n.open,o=e.state.facet(tn);this.optionContent=SE(o),this.optionClass=o.optionClass,this.range=Af(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let a=l.target,h;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(h=/-(\d+)$/.exec(a.id))&&+h[1]<r.length){xb(e,r[+h[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Af(t.options.length,t.selected,this.view.state.facet(tn).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(n);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>jt(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&CE(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.ownerDocument.defaultView||window,n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=e.getBoundingClientRect();if(s.top>Math.min(t.innerHeight,n.bottom)-10||s.bottom<Math.max(0,n.top)+10)return null;let o=this.view.textDirection==Ie.RTL,l=o,a=!1,h,c="",u="",f=n.left,d=t.innerWidth-n.right;if(l&&f<Math.min(r.width,d)?l=!1:!l&&d<Math.min(r.width,f)&&(l=!0),r.width<=(l?f:d))c=Math.max(0,Math.min(s.top,t.innerHeight-r.height))-n.top+"px",h=Math.min(400,l?f:d)+"px";else{a=!0,h=Math.min(400,(o?n.right:t.innerWidth-n.left)-30)+"px";let p=t.innerHeight-n.bottom;p>=r.height||p>n.top?c=s.bottom-n.top+"px":u=n.bottom-s.top+"px"}return{top:c,bottom:u,maxWidth:h,class:a?o?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=n.from;s<n.to;s++){let{completion:o,match:l}=e[s];const a=r.appendChild(document.createElement("li"));a.id=t+"-"+s,a.setAttribute("role","option");let h=this.optionClass(o);h&&(a.className=h);for(let c of this.optionContent){let u=c(o,this.view.state,l);u&&a.appendChild(u)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function EE(i){return e=>new AE(e,i)}function CE(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<t.top?i.scrollTop-=t.top-n.top:n.bottom>t.bottom&&(i.scrollTop+=n.bottom-t.bottom)}function Ef(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function TE(i,e){let t=[],n=0;for(let l of i)if(l.hasResult())if(l.result.filter===!1){let a=l.result.getMatch;for(let h of l.result.options){let c=[1e9-n++];if(a)for(let u of a(h))c.push(u);t.push(new xf(h,l,c))}}else{let a=new kE(e.sliceDoc(l.from,l.to)),h;for(let c of l.result.options)(h=a.match(c.label))&&(c.boost!=null&&(h[0]+=c.boost),t.push(new xf(c,l,h)))}let r=[],s=null,o=e.facet(tn).compareCompletions;for(let l of t.sort((a,h)=>h.match[0]-a.match[0]||o(a.completion,h.completion)))!s||s.label!=l.completion.label||s.detail!=l.completion.detail||s.type!=null&&l.completion.type!=null&&s.type!=l.completion.type||s.apply!=l.completion.apply?r.push(l):Ef(l.completion)>Ef(s)&&(r[r.length-1]=l),s=l.completion;return r}class vr{constructor(e,t,n,r,s){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vr(this.options,Cf(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,s){let o=TE(e,t);if(!o.length)return null;let l=t.facet(tn).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==a){l=h;break}}return new vr(o,Cf(n,l),{pos:e.reduce((a,h)=>h.hasResult()?Math.min(a,h.from):a,1e8),create:EE(Xr),above:s.aboveCursor},r?r.timestamp:Date.now(),l)}map(e){return new vr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class lo{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new lo(DE,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(tn),s=(n.override||t.languageDataAt("autocomplete",Ia(t)).map(vE)).map(l=>(this.active.find(h=>h.source==l)||new gi(l,this.active.some(h=>h.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!ME(s,this.active)?vr.build(s,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new gi(l.source,0):l));for(let l of e.effects)l.is(Eb)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new lo(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:OE}}function ME(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult;)t++;for(;n<e.length&&!e[n].hasResult;)n++;let r=t==i.length,s=n==e.length;if(r||s)return r==s;if(i[t++].result!=e[n++].result)return!1}}const OE={"aria-autocomplete":"list"};function Cf(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const DE=[];function PE(i){return i.isUserEvent("input.type")?"input":i.isUserEvent("delete.backward")?"delete":null}class gi{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=PE(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new gi(r.source,0));for(let s of e.effects)if(s.is(Sb))r=new gi(r.source,1,s.value?Ia(e.state):-1);else if(s.is(Ab))r=new gi(r.source,0);else if(s.is(LE))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,n){return t=="delete"||!n.activateOnTyping?this.map(e.changes):new gi(this.source,1)}handleChange(e){return e.changes.touchesRange(Ia(e.startState))?new gi(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new gi(this.source,this.state,e.mapPos(this.explicitPos))}}const Sb=ue.define(),Ab=ue.define(),LE=ue.define({map(i,e){return i.map(t=>t.map(e))}}),Eb=ue.define(),Xr=wt.define({create(){return lo.start()},update(i,e){return i.update(e)},provide:i=>[sh.from(i,e=>e.tooltip),J.contentAttributes.from(i,e=>e.attrs)]});function xs(i,e="option"){return t=>{let n=t.state.field(Xr,!1);if(!n||!n.open||Date.now()-n.open.timestamp<t.state.facet(tn).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Sx(t,n.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,l=n.open.selected>-1?n.open.selected+r*(i?1:-1):i?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Eb.of(l)}),!0}}const RE=i=>{let e=i.state.field(Xr,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<i.state.facet(tn).interactionDelay?!1:(xb(i,e.open.options[e.open.selected]),!0)},IE=i=>i.state.field(Xr,!1)?(i.dispatch({effects:Sb.of(!0)}),!0):!1,NE=i=>{let e=i.state.field(Xr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:Ab.of(null)}),!0)},BE=J.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class HE{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class vh{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Je.TrackDel),n=e.mapPos(this.to,1,Je.TrackDel);return t==null||n==null?null:new vh(this.field,t,n)}}class kh{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(n.length){let h=o,c=/^\t*/.exec(a)[0].length;for(let u=0;u<c;u++)h+=e.facet(vo);r.push(t+h.length-c),a=h+a.slice(c)}n.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new vh(a.field,r[a.line]+a.from,r[a.line]+a.to));return{text:n,ranges:l}}static parse(e){let t=[],n=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",h=-1;for(let c=0;c<t.length;c++)(l!=null?t[c].seq==l:a&&t[c].name==a)&&(h=c);if(h<0){let c=0;for(;c<t.length&&(l==null||t[c].seq!=null&&t[c].seq<l);)c++;t.splice(c,0,{seq:l,name:a}),h=c;for(let u of r)u.field>=h&&u.field++}r.push(new HE(h,n.length,s.index,s.index+a.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}for(let l;l=/([$#])\\{/.exec(o);){o=o.slice(0,l.index)+l[1]+"{"+o.slice(l.index+l[0].length);for(let a of r)a.line==n.length&&a.from>l.index&&(a.from--,a.to--)}n.push(o)}return new kh(n,r)}}let FE=he.widget({widget:new class extends ui{toDOM(){let i=document.createElement("span");return i.className="cm-snippetFieldPosition",i}ignoreEvent(){return!1}}}),VE=he.mark({class:"cm-snippetField"});class $n{constructor(e,t){this.ranges=e,this.active=t,this.deco=he.set(e.map(n=>(n.from==n.to?FE:VE).range(n.from,n.to)))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new $n(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(n=>n.field==this.active&&n.from<=t.from&&n.to>=t.to))}}const Jr=ue.define({map(i,e){return i&&i.map(e)}}),UE=ue.define(),Br=wt.define({create(){return null},update(i,e){for(let t of e.effects){if(t.is(Jr))return t.value;if(t.is(UE)&&i)return new $n(i.ranges,t.value)}return i&&e.docChanged&&(i=i.map(e.changes)),i&&e.selection&&!i.selectionInsideField(e.selection)&&(i=null),i},provide:i=>J.decorations.from(i,e=>e?e.deco:he.none)});function xh(i,e){return C.create(i.filter(t=>t.field==e).map(t=>C.range(t.from,t.to)))}function jE(i){let e=kh.parse(i);return(t,n,r,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,r),a={changes:{from:r,to:s,insert:ve.of(o)},scrollIntoView:!0};if(l.length&&(a.selection=xh(l,0)),l.length>1){let h=new $n(l,0),c=a.effects=[Jr.of(h)];t.state.field(Br,!1)===void 0&&c.push(ue.appendConfig.of([Br,$E,KE,BE]))}t.dispatch(t.state.update(a))}}function Cb(i){return({state:e,dispatch:t})=>{let n=e.field(Br,!1);if(!n||i<0&&n.active==0)return!1;let r=n.active+i,s=i>0&&!n.ranges.some(o=>o.field==r+i);return t(e.update({selection:xh(n.ranges,r),effects:Jr.of(s?null:new $n(n.ranges,r))})),!0}}const zE=({state:i,dispatch:e})=>i.field(Br,!1)?(e(i.update({effects:Jr.of(null)})),!0):!1,WE=Cb(1),GE=Cb(-1),qE=[{key:"Tab",run:WE,shift:GE},{key:"Escape",run:zE}],Tf=q.define({combine(i){return i.length?i[0]:qE}}),$E=Gr.highest(wo.compute([Tf],i=>i.facet(Tf)));function KM(i,e){return Object.assign(Object.assign({},e),{apply:jE(i)})}const KE=J.domEventHandlers({mousedown(i,e){let t=e.state.field(Br,!1),n;if(!t||(n=e.posAtCoords({x:i.clientX,y:i.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=n&&s.to>=n);return!r||r.field==t.active?!1:(e.dispatch({selection:xh(t.ranges,r.field),effects:Jr.of(t.ranges.some(s=>s.field>r.field)?new $n(t.ranges,r.field):null)}),!0)}}),Hr={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},qi=ue.define({map(i,e){let t=e.mapPos(i,-1,Je.TrackAfter);return t??void 0}}),Sh=ue.define({map(i,e){return e.mapPos(i)}}),Ah=new class extends Ji{};Ah.startSide=1;Ah.endSide=-1;const Tb=wt.define({create(){return Se.empty},update(i,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,n=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(n,-1)&&(i=Se.empty)}i=i.map(e.changes);for(let t of e.effects)t.is(qi)?i=i.update({add:[Ah.range(t.value,t.value+1)]}):t.is(Sh)&&(i=i.update({filter:n=>n!=t.value}));return i}});function XE(){return[YE,Tb]}const Cl="()[]{}<>";function Mb(i){for(let e=0;e<Cl.length;e+=2)if(Cl.charCodeAt(e)==i)return Cl.charAt(e+1);return rg(i<128?i:i+1)}function Ob(i,e){return i.languageDataAt("closeBrackets",e)[0]||Hr}const JE=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),YE=J.inputHandler.of((i,e,t,n)=>{if((JE?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let r=i.state.selection.main;if(n.length>2||n.length==2&&Dt(et(n,0))==1||e!=r.from||t!=r.to)return!1;let s=eC(i.state,n);return s?(i.dispatch(s),!0):!1}),ZE=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=Ob(i,i.selection.main.head).brackets||Hr.brackets,r=null,s=i.changeByRange(o=>{if(o.empty){let l=tC(i.doc,o.head);for(let a of n)if(a==l&&Mo(i.doc,o.head)==Mb(et(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:C.cursor(o.head-a.length)}}return{range:r=o}});return r||e(i.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},QE=[{key:"Backspace",run:ZE}];function eC(i,e){let t=Ob(i,i.selection.main.head),n=t.brackets||Hr.brackets;for(let r of n){let s=Mb(et(r,0));if(e==r)return s==r?rC(i,r,n.indexOf(r+r+r)>-1,t):iC(i,r,s,t.before||Hr.before);if(e==s&&Db(i,i.selection.main.from))return nC(i,r,s)}return null}function Db(i,e){let t=!1;return i.field(Tb).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Mo(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Dt(et(t,0)))}function tC(i,e){let t=i.sliceString(e-2,e);return Dt(et(t,0))==t.length?t:t.slice(1)}function iC(i,e,t,n){let r=null,s=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:qi.of(o.to+e.length),range:C.range(o.anchor+e.length,o.head+e.length)};let l=Mo(i.doc,o.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:qi.of(o.head+e.length),range:C.cursor(o.head+e.length)}:{range:r=o}});return r?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function nC(i,e,t){let n=null,r=i.selection.ranges.map(s=>s.empty&&Mo(i.doc,s.head)==t?C.cursor(s.head+t.length):n=s);return n?null:i.update({selection:C.create(r,i.selection.mainIndex),scrollIntoView:!0,effects:i.selection.ranges.map(({from:s})=>Sh.of(s))})}function rC(i,e,t,n){let r=n.stringPrefixes||Hr.stringPrefixes,s=null,o=i.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:qi.of(l.to+e.length),range:C.range(l.anchor+e.length,l.head+e.length)};let a=l.head,h=Mo(i.doc,a),c;if(h==e){if(Mf(i,a))return{changes:{insert:e+e,from:a},effects:qi.of(a+e.length),range:C.cursor(a+e.length)};if(Db(i,a)){let u=t&&i.sliceDoc(a,a+e.length*3)==e+e+e;return{range:C.cursor(a+e.length*(u?3:1)),effects:Sh.of(a)}}}else{if(t&&i.sliceDoc(a-2*e.length,a)==e+e&&(c=Of(i,a-2*e.length,r))>-1&&Mf(i,c))return{changes:{insert:e+e+e+e,from:a},effects:qi.of(a+e.length),range:C.cursor(a+e.length)};if(i.charCategorizer(a)(h)!=Pt.Word&&Of(i,a,r)>-1&&!sC(i,a,e,r))return{changes:{insert:e+e,from:a},effects:qi.of(a+e.length),range:C.cursor(a+e.length)}}return{range:s=l}});return s?null:i.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Mf(i,e){let t=Ye(i).resolveInner(e+1);return t.parent&&t.from==e}function sC(i,e,t,n){let r=Ye(i).resolveInner(e,-1),s=n.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=i.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&n.indexOf(l.slice(0,a))>-1){let c=r.firstChild;for(;c&&c.from==r.from&&c.to-c.from>t.length+a;){if(i.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let h=r.to==e&&r.parent;if(!h)break;r=h}return!1}function Of(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=Pt.Word)return e;for(let r of t){let s=e-r.length;if(i.sliceDoc(s,e)==r&&n(i.sliceDoc(s-1,s))!=Pt.Word)return s}return-1}const oC=[{key:"Ctrl-Space",run:IE},{key:"Escape",run:NE},{key:"ArrowDown",run:xs(!0)},{key:"ArrowUp",run:xs(!1)},{key:"PageDown",run:xs(!0,"page")},{key:"PageUp",run:xs(!1,"page")},{key:"Enter",run:RE}];function ri(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];typeof r=="string"?i.setAttribute(n,r):r!=null&&(i[n]=r)}e++}for(;e<arguments.length;e++)Pb(i,arguments[e]);return i}function Pb(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Pb(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}class lC{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class zi{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,s=n.facet(wn).markerFilter;s&&(r=s(r));let o=he.set(r.map(l=>l.from==l.to||l.from==l.to-1&&n.doc.lineAt(l.from).to==l.from?he.widget({widget:new bC(l),diagnostic:l}).range(l.from):he.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new zi(o,t,Vn(o))}}function Vn(i,e=null,t=0){let n=null;return i.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return n=new lC(r,s,o.diagnostic),!1}),n}function aC(i,e){return!!(i.effects.some(t=>t.is(Eh))||i.changes.touchesRange(e.pos))}function Lb(i,e){return i.field(Et,!1)?e:e.concat(ue.appendConfig.of([Et,J.decorations.compute([Et],t=>{let{selected:n,panel:r}=t.field(Et);return!n||!r||n.from==n.to?he.none:he.set([cC.range(n.from,n.to)])}),xx(uC,{hideOn:aC}),yC]))}function hC(i,e){return{effects:Lb(i,[Eh.of(e)])}}const Eh=ue.define(),Ch=ue.define(),Rb=ue.define(),Et=wt.define({create(){return new zi(he.none,null,null)},update(i,e){if(e.docChanged){let t=i.diagnostics.map(e.changes),n=null;if(i.selected){let r=e.changes.mapPos(i.selected.from,1);n=Vn(t,i.selected.diagnostic,r)||Vn(t,null,r)}i=new zi(t,i.panel,n)}for(let t of e.effects)t.is(Eh)?i=zi.init(t.value,i.panel,e.state):t.is(Ch)?i=new zi(i.diagnostics,t.value?Oo.open:null,i.selected):t.is(Rb)&&(i=new zi(i.diagnostics,i.panel,t.value));return i},provide:i=>[xa.from(i,e=>e.panel),J.decorations.from(i,e=>e.diagnostics)]}),cC=he.mark({class:"cm-lintRange cm-lintRange-active"});function uC(i,e,t){let{diagnostics:n}=i.state.field(Et),r=[],s=2e8,o=0;n.between(e-(t<0?1:0),e+(t>0?1:0),(a,h,{spec:c})=>{e>=a&&e<=h&&(a==h||(e>a||t>0)&&(e<h||t<0))&&(r.push(c.diagnostic),s=Math.min(a,s),o=Math.max(h,o))});let l=i.state.facet(wn).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:i.state.doc.lineAt(s).to<o,create(){return{dom:fC(i,r)}}}:null}function fC(i,e){return ri("ul",{class:"cm-tooltip-lint"},e.map(t=>Nb(i,t,!1)))}const dC=i=>{let e=i.state.field(Et,!1);(!e||!e.panel)&&i.dispatch({effects:Lb(i.state,[Ch.of(!0)])});let t=Ex(i,Oo.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Df=i=>{let e=i.state.field(Et,!1);return!e||!e.panel?!1:(i.dispatch({effects:Ch.of(!1)}),!0)},pC=i=>{let e=i.state.field(Et,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},mC=[{key:"Mod-Shift-m",run:dC},{key:"F8",run:pC}],gC=it.fromClass(class{constructor(i){this.view=i,this.timeout=-1,this.set=!0;let{delay:e}=i.state.facet(wn);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let i=Date.now();if(i<this.lintTime-10)setTimeout(this.run,this.lintTime-i);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(wn);Promise.all(t.map(n=>Promise.resolve(n(this.view)))).then(n=>{let r=n.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(hC(this.view.state,r))},n=>{jt(this.view.state,n)})}}update(i){let e=i.state.facet(wn);(i.docChanged||e!=i.startState.facet(wn))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),wn=q.define({combine(i){return Object.assign({sources:i.map(e=>e.source)},on(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:gC});function Ib(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let r=t[n];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Nb(i,e,t){var n;let r=t?Ib(e.actions):[];return ri("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ri("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,o)=>{let l=u=>{u.preventDefault();let f=Vn(i.state.field(Et).diagnostics,e);f&&s.apply(i,f.from,f.to)},{name:a}=s,h=r[o]?a.indexOf(r[o]):-1,c=h<0?a:[a.slice(0,h),ri("u",a.slice(h,h+1)),a.slice(h+1)];return ri("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${a}${h<0?"":` (access key "${r[o]})"`}.`},c)}),e.source&&ri("div",{class:"cm-diagnosticSource"},e.source))}class bC extends ui{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return ri("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Pf{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Nb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Oo{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)Df(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Ib(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=Vn(this.view.state.field(Et).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},n=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=ri("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=ri("div",{class:"cm-panel-lint"},this.list,ri("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Df(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Et).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Et),n=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let h=-1,c;for(let u=n;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){h=u;break}h<0?(c=new Pf(this.view,a.diagnostic),this.items.splice(n,0,c),r=!0):(c=this.items[h],h>n&&(this.items.splice(n,h-n),r=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),s=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),n++});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Pf(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Et),n=Vn(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Rb.of(n)})}static open(e){return new Oo(e)}}function _C(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function Tl(i){return _C(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const yC=J.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Tl("#d11")},".cm-lintRange-warning":{backgroundImage:Tl("orange")},".cm-lintRange-info":{backgroundImage:Tl("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),wC=[Rx(),tx(),tA(),TS(),Gk(),be.allowMultipleSelections.of(!0),pS(),dh(PS,{fallback:!0}),XE(),fx(),mx(),wo.of([...QE,...QA,...cA,...SS,...oC,...mC])],vC=["standardSQL","msSQL","mySQL","mariaDB","sqlite","cassandra","plSQL","hive","pgSQL","gql","gpSQL","sparkSQL","esper"],Lf={python:()=>Fe(()=>import("./assets/index-DFHA_eNK.js"),__vite__mapDeps([17,18]),import.meta.url).then(i=>i.python()),c:()=>Fe(()=>import("./assets/clike-CFERkOWz.js"),[],import.meta.url).then(i=>ei.define(i.c)),cpp:()=>Fe(()=>import("./assets/clike-CFERkOWz.js"),[],import.meta.url).then(i=>ei.define(i.cpp)),markdown:async()=>{const[i,e]=await Promise.all([Fe(()=>import("./assets/index-CpeeA8tS.js"),__vite__mapDeps([19,20,18,21,22]),import.meta.url),Fe(()=>import("./assets/frontmatter-BJqO9h-r.js"),__vite__mapDeps([23,24]),import.meta.url)]);return i.markdown({extensions:[e.frontmatter]})},json:()=>Fe(()=>import("./assets/index-Bp8_uElI.js"),__vite__mapDeps([25,18]),import.meta.url).then(i=>i.json()),html:()=>Fe(()=>import("./assets/index-Bum787c0.js"),__vite__mapDeps([20,18,21,22]),import.meta.url).then(i=>i.html()),css:()=>Fe(()=>import("./assets/index-BEurY6Ug.js"),__vite__mapDeps([21,18]),import.meta.url).then(i=>i.css()),javascript:()=>Fe(()=>import("./assets/index-tbyR1uKq.js"),__vite__mapDeps([22,18]),import.meta.url).then(i=>i.javascript()),typescript:()=>Fe(()=>import("./assets/index-tbyR1uKq.js"),__vite__mapDeps([22,18]),import.meta.url).then(i=>i.javascript({typescript:!0})),yaml:()=>Fe(()=>import("./assets/yaml-DsCXHVTH.js"),[],import.meta.url).then(i=>ei.define(i.yaml)),dockerfile:()=>Fe(()=>import("./assets/dockerfile-C8FRPiPq.js"),[],import.meta.url).then(i=>ei.define(i.dockerFile)),shell:()=>Fe(()=>import("./assets/shell-bahM2fKw.js"),[],import.meta.url).then(i=>ei.define(i.shell)),r:()=>Fe(()=>import("./assets/r-DUYO_cvP.js"),[],import.meta.url).then(i=>ei.define(i.r)),sql:()=>Fe(()=>import("./assets/sql-C4g8LzGK.js"),[],import.meta.url).then(i=>ei.define(i.standardSQL)),...Object.fromEntries(vC.map(i=>["sql-"+i,()=>Fe(()=>import("./assets/sql-C4g8LzGK.js"),[],import.meta.url).then(e=>ei.define(e[i]))]))},kC={py:"python",md:"markdown",js:"javascript",ts:"typescript",sh:"shell"};async function xC(i){const e=Lf[i]||Lf[kC[i]]||void 0;if(e)return e()}function SC(i){let e,t,n;return{c(){e=X("div"),t=X("div"),S(t,"class",n="codemirror-wrapper "+i[0]+" svelte-1sc8eck"),S(e,"class","wrap svelte-1sc8eck")},m(r,s){B(r,e,s),z(e,t),i[12](t)},p(r,[s]){s&1&&n!==(n="codemirror-wrapper "+r[0]+" svelte-1sc8eck")&&S(t,"class",n)},i:Ee,o:Ee,d(r){r&&N(e),i[12](null)}}}function AC(i){let e=i.dom.querySelectorAll(".cm-gutterElement");if(e.length===0)return null;for(var t=0;t<e.length;t++){let n=e[t],r=getComputedStyle(n)?.height??"0px";if(r!="0px")return r}return null}function EC(i,e,t){let{class_names:n=""}=e,{value:r=""}=e,{dark_mode:s}=e,{basic:o=!0}=e,{language:l}=e,{lines:a=5}=e,{extensions:h=[]}=e,{use_tab:c=!0}=e,{readonly:u=!1}=e,{placeholder:f=void 0}=e;const d=uo();let p,g,m;async function b(P){const re=await xC(P);t(11,p=re)}function w(P){m&&P!==m.state.doc.toString()&&m.dispatch({changes:{from:0,to:m.state.doc.length,insert:P}})}function y(){m&&m.requestMeasure({read:R})}function k(){const P=new J({parent:g,state:T(r)});return P.dom.addEventListener("focus",A,!0),P.dom.addEventListener("blur",x,!0),P}function A(){d("focus")}function x(){d("blur")}function R(P){let re=P.dom.querySelectorAll(".cm-gutter"),U=a+1,M=AC(P);if(!M)return null;for(var Z=0;Z<re.length;Z++){let j=re[Z];j.style.minHeight=`calc(${M} * ${U})`}return null}function D(P){if(P.docChanged){const U=P.state.doc.toString();t(2,r=U),d("change",U)}m.requestMeasure({read:R})}function F(){return[...W(o,c,f,u,p),L,...ne(),...h]}const L=J.theme({"&":{fontSize:"var(--text-sm)",backgroundColor:"var(--border-color-secondary)"},".cm-content":{paddingTop:"5px",paddingBottom:"5px",color:"var(--body-text-color)",fontFamily:"var(--font-mono)",minHeight:"100%"},".cm-gutters":{marginRight:"1px",borderRight:"1px solid var(--border-color-primary)",backgroundColor:"var(--block-background-fill);",color:"var(--body-text-color-subdued)"},".cm-focused":{outline:"none"},".cm-scroller":{height:"auto"},".cm-cursor":{borderLeftColor:"var(--body-text-color)"}});function T(P){return be.create({doc:P??void 0,extensions:F()})}function W(P,re,U,M,Z){const j=[J.editable.of(!M),be.readOnly.of(M),J.contentAttributes.of({"aria-label":"Code input container"})];return P&&j.push(wC),re&&j.push(wo.of([eE])),U&&j.push(ax(U)),Z&&j.push(Z),j.push(J.updateListener.of(D)),j}function ne(){const P=[];return s?P.push(hE):P.push(bE),P}function _e(){m?.dispatch({effects:ue.reconfigure.of(F())})}Ar(()=>(m=k(),()=>m?.destroy()));function ee(P){_t[P?"unshift":"push"](()=>{g=P,t(1,g)})}return i.$$set=P=>{"class_names"in P&&t(0,n=P.class_names),"value"in P&&t(2,r=P.value),"dark_mode"in P&&t(3,s=P.dark_mode),"basic"in P&&t(4,o=P.basic),"language"in P&&t(5,l=P.language),"lines"in P&&t(6,a=P.lines),"extensions"in P&&t(7,h=P.extensions),"use_tab"in P&&t(8,c=P.use_tab),"readonly"in P&&t(9,u=P.readonly),"placeholder"in P&&t(10,f=P.placeholder)},i.$$.update=()=>{i.$$.dirty&32&&b(l),i.$$.dirty&2560&&_e(),i.$$.dirty&4&&w(r)},y(),[n,g,r,s,o,l,a,h,c,u,f,p,ee]}class CC extends $t{constructor(e){super(),qt(this,e,EC,SC,yt,{class_names:0,value:2,dark_mode:3,basic:4,language:5,lines:6,extensions:7,use_tab:8,readonly:9,placeholder:10})}get class_names(){return this.$$.ctx[0]}set class_names(e){this.$$set({class_names:e}),E()}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),E()}get dark_mode(){return this.$$.ctx[3]}set dark_mode(e){this.$$set({dark_mode:e}),E()}get basic(){return this.$$.ctx[4]}set basic(e){this.$$set({basic:e}),E()}get language(){return this.$$.ctx[5]}set language(e){this.$$set({language:e}),E()}get lines(){return this.$$.ctx[6]}set lines(e){this.$$set({lines:e}),E()}get extensions(){return this.$$.ctx[7]}set extensions(e){this.$$set({extensions:e}),E()}get use_tab(){return this.$$.ctx[8]}set use_tab(e){this.$$set({use_tab:e}),E()}get readonly(){return this.$$.ctx[9]}set readonly(e){this.$$set({readonly:e}),E()}get placeholder(){return this.$$.ctx[10]}set placeholder(e){this.$$set({placeholder:e}),E()}}const TC="data:image/svg+xml,%3c!--%20Lightning%20https://iconscout.com/icons/lightning%20by%20IconLauk%20https://iconscout.com/contributors/icon-lauk%20on%20IconScout%20https://iconscout.com'%20--%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20enable-background='new%200%200%2032%2032'%20viewBox='0%200%2032%2032'%20id='lightning'%3e%3cpath%20fill='%23ff7c00'%20d='M26.9,10.5C26.7,10.2,26.4,10,26,10h-9V2c0-0.4-0.3-0.8-0.7-1c-0.4-0.1-0.9,0-1.1,0.4l-10,14c-0.2,0.3-0.3,0.7-0.1,1%20C5.3,16.8,5.6,17,6,17h8.8L13,29.9c-0.1,0.5,0.2,0.9,0.6,1.1c0.1,0,0.2,0.1,0.3,0.1c0.3,0,0.7-0.2,0.8-0.5l12-19%20C27,11.2,27,10.8,26.9,10.5z'/%3e%3c/svg%3e";function MC(i){let e,t,n,r,s,o,l,a,h;return{c(){e=X("div"),t=X("div"),n=X("button"),n.innerHTML=`Run
							<div class="shortcut svelte-jl2f0n">⌘+↵</div>`,r=Ae(),s=X("div"),o=Ae(),l=X("div"),l.innerHTML=`<img src="${TC}" alt="lightning icon" class="lightning-logo svelte-jl2f0n"/>
					Interactive`,S(n,"class","button svelte-jl2f0n"),S(t,"class","run svelte-jl2f0n"),S(e,"class","buttons svelte-jl2f0n"),te(s,"flex-grow","1"),S(l,"class","loading-section svelte-jl2f0n")},m(c,u){B(c,e,u),z(e,t),z(t,n),B(c,r,u),B(c,s,u),B(c,o,u),B(c,l,u),a||(h=Ns(n,"click",i[12]),a=!0)},p:Ee,d(c){c&&(N(e),N(r),N(s),N(o),N(l)),a=!1,h()}}}function OC(i){let e,t,n,r,s,o;return{c(){e=X("div"),t=Ae(),n=X("div"),r=X("div"),s=Ae(),o=ce(i[3]),te(e,"display","flex"),S(r,"class","loading-dot svelte-jl2f0n"),S(n,"class","loading-section svelte-jl2f0n")},m(l,a){B(l,e,a),B(l,t,a),B(l,n,a),z(n,r),z(n,s),z(n,o)},p(l,a){a&8&&Ue(o,l[3])},d(l){l&&(N(e),N(t),N(n))}}}function DC(i){let e,t,n;function r(o){i[13](o)}let s={language:"python",lines:10,readonly:!i[1],dark_mode:i[4]==="dark"};return i[0]!==void 0&&(s.value=i[0]),e=new CC({props:s}),_t.push(()=>gr(e,"value",r)),{c(){pt(e.$$.fragment)},m(o,l){nt(e,o,l),n=!0},p(o,l){const a={};l&2&&(a.readonly=!o[1]),l&16&&(a.dark_mode=o[4]==="dark"),!t&&l&1&&(t=!0,a.value=o[0],mr(()=>t=!1)),e.$set(a)},i(o){n||(Q(e.$$.fragment,o),n=!0)},o(o){ie(e.$$.fragment,o),n=!1},d(o){rt(e,o)}}}function Rf(i){let e,t;const n=i[11].default,r=Fr(n,i,i[16],null);return{c(){e=X("div"),r&&r.c(),S(e,"class","preview svelte-jl2f0n")},m(s,o){B(s,e,o),r&&r.m(e,null),t=!0},p(s,o){r&&r.p&&(!t||o&65536)&&Ur(r,n,s,s[16],t?Vr(n,s[16],o,null):jr(s[16]),null)},i(s){t||(Q(r,s),t=!0)},o(s){ie(r,s),t=!1},d(s){s&&N(e),r&&r.d(s)}}}function PC(i){let e,t,n,r,s,o,l,a,h,c,u;function f(m,b){return m[1]?MC:OC}let d=f(i),p=d(i);h=new Hw({props:{variant:"solid",padding:!1,$$slots:{default:[DC]},$$scope:{ctx:i}}});let g=i[1]&&Rf(i);return{c(){e=X("div"),t=X("div"),n=X("div"),r=X("div"),r.textContent="app.py",s=Ae(),p.c(),o=Ae(),l=X("div"),a=X("div"),pt(h.$$.fragment),c=Ae(),g&&g.c(),S(r,"class","code-header svelte-jl2f0n"),S(n,"class","loading-panel svelte-jl2f0n"),S(a,"class","code-editor svelte-jl2f0n"),Y(a,"code-editor-border",i[1]),S(l,"class","child-container svelte-jl2f0n"),Y(l,"horizontal",i[2]==="horizontal"),Y(l,"vertical",i[2]==="vertical"),S(t,"class","wrapper svelte-jl2f0n"),S(e,"class","parent-container svelte-jl2f0n")},m(m,b){B(m,e,b),z(e,t),z(t,n),z(n,r),z(n,s),p.m(n,null),z(t,o),z(t,l),z(l,a),nt(h,a,null),i[14](a),z(l,c),g&&g.m(l,null),i[15](e),u=!0},p(m,[b]){d===(d=f(m))&&p?p.p(m,b):(p.d(1),p=d(m),p&&(p.c(),p.m(n,null)));const w={};b&65555&&(w.$$scope={dirty:b,ctx:m}),h.$set(w),(!u||b&2)&&Y(a,"code-editor-border",m[1]),m[1]?g?(g.p(m,b),b&2&&Q(g,1)):(g=Rf(m),g.c(),Q(g,1),g.m(l,null)):g&&(zt(),ie(g,1,1,()=>{g=null}),Wt()),(!u||b&4)&&Y(l,"horizontal",m[2]==="horizontal"),(!u||b&4)&&Y(l,"vertical",m[2]==="vertical")},i(m){u||(Q(h.$$.fragment,m),Q(g),u=!0)},o(m){ie(h.$$.fragment,m),ie(g),u=!1},d(m){m&&N(e),p.d(),rt(h),i[14](null),g&&g.d(),i[15](null)}}}function LC(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_embed:s}=e,{theme_mode:o="system"}=e,{worker_proxy:l=void 0}=e,{code:a}=e,{layout:h=null}=e;const c=uo();let u="",{loaded:f=!1}=e;l?.addEventListener("progress-update",D=>{t(3,u=D.detail+"...")}),l?.addEventListener("initialization-completed",D=>{t(1,f=!0)});function d(D){D.key=="Enter"&&(D.metaKey||D.ctrlKey)&&(c("code",{code:a}),D.preventDefault())}function p(D){const F=window.__gradio_mode__==="website";let L;if(F)L="light";else{const W=new URL(window.location.toString()).searchParams.get("__theme");L=o||W||"system"}return L==="dark"||L==="light"?m(D,L):L=g(D),L}function g(D){const F=L();window?.matchMedia("(prefers-color-scheme: dark)")?.addEventListener("change",L);function L(){let T=window?.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light";return m(D,T),T}return F}function m(D,F){const L=s?D.parentElement:document.body;F==="dark"?L.classList.add("dark"):L.classList.remove("dark")}let b="light",w,y;Ar(()=>(t(4,b=p(w)),y.addEventListener("keydown",d,!0),()=>{y.removeEventListener("keydown",d,!0)}));const k=()=>{c("code",{code:a})};function A(D){a=D,t(0,a)}function x(D){_t[D?"unshift":"push"](()=>{y=D,t(6,y)})}function R(D){_t[D?"unshift":"push"](()=>{w=D,t(5,w)})}return i.$$set=D=>{"is_embed"in D&&t(8,s=D.is_embed),"theme_mode"in D&&t(9,o=D.theme_mode),"worker_proxy"in D&&t(10,l=D.worker_proxy),"code"in D&&t(0,a=D.code),"layout"in D&&t(2,h=D.layout),"loaded"in D&&t(1,f=D.loaded),"$$scope"in D&&t(16,r=D.$$scope)},i.$$.update=()=>{i.$$.dirty&8,i.$$.dirty&2,i.$$.dirty&1},[a,f,h,u,b,w,y,c,s,o,l,n,k,A,x,R,r]}class RC extends $t{constructor(e){super(),qt(this,e,LC,PC,yt,{is_embed:8,theme_mode:9,worker_proxy:10,code:0,layout:2,loaded:1})}get is_embed(){return this.$$.ctx[8]}set is_embed(e){this.$$set({is_embed:e}),E()}get theme_mode(){return this.$$.ctx[9]}set theme_mode(e){this.$$set({theme_mode:e}),E()}get worker_proxy(){return this.$$.ctx[10]}set worker_proxy(e){this.$$set({worker_proxy:e}),E()}get code(){return this.$$.ctx[0]}set code(e){this.$$set({code:e}),E()}get layout(){return this.$$.ctx[2]}set layout(e){this.$$set({layout:e}),E()}get loaded(){return this.$$.ctx[1]}set loaded(e){this.$$set({loaded:e}),E()}}function If(i){let e,t,n=i[1].message&&Nf(i),r=i[1].stack&&Bf(i);return{c(){n&&n.c(),e=Ae(),r&&r.c(),t=Ct()},m(s,o){n&&n.m(s,o),B(s,e,o),r&&r.m(s,o),B(s,t,o)},p(s,o){s[1].message?n?n.p(s,o):(n=Nf(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[1].stack?r?r.p(s,o):(r=Bf(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){s&&(N(e),N(t)),n&&n.d(s),r&&r.d(s)}}}function Nf(i){let e,t=i[1].message+"",n;return{c(){e=X("p"),n=ce(t),S(e,"class","error-name svelte-1g4oy29")},m(r,s){B(r,e,s),z(e,n)},p(r,s){s&2&&t!==(t=r[1].message+"")&&Ue(n,t)},d(r){r&&N(e)}}}function Bf(i){let e,t,n=i[1].stack+"",r;return{c(){e=X("pre"),t=X("code"),r=ce(n),S(e,"class","error-stack svelte-1g4oy29")},m(s,o){B(s,e,o),z(e,t),z(t,r)},p(s,o){o&2&&n!==(n=s[1].stack+"")&&Ue(r,n)},d(s){s&&N(e)}}}function IC(i){let e,t=i[1]&&If(i);return{c(){e=X("div"),t&&t.c(),S(e,"class","error svelte-1g4oy29"),S(e,"slot","error")},m(n,r){B(n,e,r),t&&t.m(e,null)},p(n,r){n[1]?t?t.p(n,r):(t=If(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(n){n&&N(e),t&&t.d()}}}function NC(i){let e,t;return e=new qm({props:{i18n:i[2],absolute:!i[0],status:"error",timer:!1,queue_position:null,queue_size:null,translucent:!0,autoscroll:!1,$$slots:{error:[IC]},$$scope:{ctx:i}}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.i18n=n[2]),r&1&&(s.absolute=!n[0]),r&10&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function BC(i,e,t){let n;Tn(i,Xa,o=>t(2,n=o)),Gm();let{is_embed:r}=e,{error:s=void 0}=e;return i.$$set=o=>{"is_embed"in o&&t(0,r=o.is_embed),"error"in o&&t(1,s=o.error)},[r,s,n]}class Bb extends $t{constructor(e){super(),qt(this,e,BC,NC,yt,{is_embed:0,error:1})}get is_embed(){return this.$$.ctx[0]}set is_embed(e){this.$$set({is_embed:e}),E()}get error(){return this.$$.ctx[1]}set error(e){this.$$set({error:e}),E()}}const Hb="lite.local";function Th(i){return i.host===window.location.host||i.host==="localhost:7860"||i.host==="127.0.0.1:7860"||i.host===Hb}var HC=Object.defineProperty,FC=(i,e,t)=>e in i?HC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,le=(i,e,t)=>(FC(i,typeof e!="symbol"?e+"":e,t),t),Fb=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},lr=(i,e,t)=>(Fb(i,e,"read from private field"),t?t.call(i):e.get(i)),VC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},UC=(i,e,t,n)=>(Fb(i,e,"write to private field"),e.set(i,t),t),vi,Ml=new Intl.Collator(0,{numeric:1}).compare;function Vb(i,e,t){return i=i.split("."),e=e.split("."),Ml(i[0],e[0])||Ml(i[1],e[1])||(e[2]=e.slice(2).join("."),t=/[.-]/.test(i[2]=i.slice(2).join(".")),t==/[.-]/.test(e[2])?Ml(i[2],e[2]):t?-1:1)}const jC="host",Hf="upload",zC="login",WC="config",GC="info",qC="runtime",$C="sleeptime",KC="https://gradio-space-api-fetcher-v2.hf.space/api",Ub="This application is currently busy. Please try again. ",Xi="Connection errored out. ",vn="Could not resolve app config. ",XC="Could not get space status. ",JC="Could not get API info. ",Mh="Space metadata could not be loaded. ",YC="Invalid URL. A full URL path is required.",ZC="Not authorized to access this space. ",jb="Invalid credentials. Could not login. ",QC="Login credentials are required to access this space.",eT="File system access is only available in Node.js environments",zb="Root URL not found in client config",tT="Error uploading file";function Wb(i,e,t){return e.startsWith("http://")||e.startsWith("https://")?t?i:e:i+e}async function Ff(i,e,t){try{return(await(await fetch(`https://huggingface.co/api/spaces/${i}/jwt`,{headers:{Authorization:`Bearer ${e}`,...t?{Cookie:t}:{}}})).json()).token||!1}catch{return!1}}function iT(i){let e={};return i.forEach(({api_name:t,id:n})=>{t&&(e[t]=n)}),e}async function nT(i){var e;const t=this.options.hf_token?{Authorization:`Bearer ${this.options.hf_token}`}:{};if(t["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&location.origin!=="http://localhost:9876"&&!window.gradio_config.dev_mode){const n=window.gradio_config.root,r=window.gradio_config;let s=Wb(i,r.root,!1);return r.root=s,{...r,path:n}}else if(i){const n=$b(i,WC),r=await this.fetch(n,{headers:t,credentials:"include"});if(r?.status===401&&!this.options.auth)throw new Error(QC);if(r?.status===401&&this.options.auth)throw new Error(jb);if(r?.status===200){let s=await r.json();return s.path=s.path??"",s.root=i,(e=s.dependencies)==null||e.forEach((o,l)=>{o.id===void 0&&(o.id=l)}),s}else if(r?.status===401)throw new Error(ZC);throw new Error(vn)}throw new Error(vn)}async function rT(){const{http_protocol:i,host:e}=await Do(this.app_reference,this.options.hf_token);try{if(this.options.auth){const t=await Gb(i,e,this.options.auth,this.fetch,this.options.hf_token);t&&this.set_cookies(t)}}catch(t){throw Error(t.message)}}async function Gb(i,e,t,n,r){const s=new FormData;s.append("username",t?.[0]),s.append("password",t?.[1]);let o={};r&&(o.Authorization=`Bearer ${r}`);const l=await n(`${i}//${e}/${zC}`,{headers:o,method:"POST",body:s,credentials:"include"});if(l.status===200)return l.headers.get("set-cookie");throw l.status===401?new Error(jb):new Error(Mh)}function Ol(i){if(i.startsWith("http")){const{protocol:e,host:t,pathname:n}=new URL(i);return t.endsWith("hf.space")?{ws_protocol:"wss",host:t,http_protocol:e}:{ws_protocol:e==="https:"?"wss":"ws",http_protocol:e,host:t+(n!=="/"?n:"")}}else if(i.startsWith("file:"))return{ws_protocol:"ws",http_protocol:"http:",host:"lite.local"};return{ws_protocol:"wss",http_protocol:"https:",host:i}}const qb=i=>{let e=[];return i.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach(n=>{const[r,s]=n.split(";")[0].split("=");r&&s&&e.push(`${r.trim()}=${s.trim()}`)}),e},Oh=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,sT=/.*hf\.space\/{0,1}$/;async function Do(i,e){const t={};e&&(t.Authorization=`Bearer ${e}`);const n=i.trim().replace(/\/$/,"");if(Oh.test(n))try{const s=(await(await fetch(`https://huggingface.co/api/spaces/${n}/${jC}`,{headers:t})).json()).host;return{space_id:i,...Ol(s)}}catch{throw new Error(Mh)}if(sT.test(n)){const{ws_protocol:r,http_protocol:s,host:o}=Ol(n);return{space_id:o.replace(".hf.space",""),ws_protocol:r,http_protocol:s,host:o}}return{space_id:!1,...Ol(n)}}const $b=(...i)=>{try{return i.reduce((e,t)=>(e=e.replace(/\/+$/,""),t=t.replace(/^\/+/,""),new URL(t,e+"/").toString()))}catch{throw new Error(YC)}};function oT(i,e,t){const n={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(i).forEach(r=>{(r==="named_endpoints"||r==="unnamed_endpoints")&&(n[r]={},Object.entries(i[r]).forEach(([s,{parameters:o,returns:l}])=>{var a,h,c,u;const f=((a=e.dependencies.find(g=>g.api_name===s||g.api_name===s.replace("/","")))==null?void 0:a.id)||t[s.replace("/","")]||-1,d=f!==-1?(h=e.dependencies.find(g=>g.id==f))==null?void 0:h.types:{generator:!1,cancel:!1};if(f!==-1&&((u=(c=e.dependencies.find(g=>g.id==f))==null?void 0:c.inputs)==null?void 0:u.length)!==o.length){const g=e.dependencies.find(m=>m.id==f).inputs.map(m=>{var b;return(b=e.components.find(w=>w.id===m))==null?void 0:b.type});try{g.forEach((m,b)=>{if(m==="state"){const w={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};o.splice(b,0,w)}})}catch(m){console.error(m)}}const p=(g,m,b,w)=>({...g,description:aT(g?.type,b),type:lT(g?.type,m,b,w)||""});n[r][s]={parameters:o.map(g=>p(g,g?.component,g?.serializer,"parameter")),returns:l.map(g=>p(g,g?.component,g?.serializer,"return")),type:d}}))}),n}function lT(i,e,t,n){switch(i?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}if(t==="JSONSerializable"||t==="StringSerializable")return"any";if(t==="ListStringSerializable")return"string[]";if(e==="Image")return n==="parameter"?"Blob | File | Buffer":"string";if(t==="FileSerializable")return i?.type==="array"?n==="parameter"?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":n==="parameter"?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}";if(t==="GallerySerializable")return n==="parameter"?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]"}function aT(i,e){return e==="GallerySerializable"?"array of [file, label] tuples":e==="ListStringSerializable"?"array of strings":e==="FileSerializable"?"array of files or single file":i?.description}function Dl(i,e){switch(i.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:Ub,stage:"error",code:i.code,success:i.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:i.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:e||"pending",code:i.code,size:i.queue_size,position:i.rank,eta:i.rank_eta,success:i.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:i.code,progress_data:i.progress_data,success:i.success}};case"log":return{type:"log",data:i};case"process_generating":return{type:"generating",status:{queue:!0,message:i.success?null:i.output.error,stage:i.success?"generating":"error",code:i.code,progress_data:i.progress_data,eta:i.average_duration},data:i.success?i.output:null};case"process_completed":return"error"in i.output?{type:"update",status:{queue:!0,message:i.output.error,visible:i.output.visible,duration:i.output.duration,stage:"error",code:i.code,success:i.success}}:{type:"complete",status:{queue:!0,message:i.success?void 0:i.output.error,stage:i.success?"complete":"error",code:i.code,progress_data:i.progress_data,changed_state_ids:i.success?i.output.changed_state_ids:void 0},data:i.success?i.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:i.code,size:i.rank,position:0,success:i.success,eta:i.eta}}}return{type:"none",status:{stage:"error",queue:!0}}}const hT=(i=[],e)=>{const t=e?e.parameters:[];if(Array.isArray(i))return i.length>t.length&&console.warn("Too many arguments provided for the endpoint."),i;const n=[],r=Object.keys(i);return t.forEach((s,o)=>{if(i.hasOwnProperty(s.parameter_name))n[o]=i[s.parameter_name];else if(s.parameter_has_default)n[o]=s.parameter_default;else throw new Error(`No value provided for required parameter: ${s.parameter_name}`)}),r.forEach(s=>{if(!t.some(o=>o.parameter_name===s))throw new Error(`Parameter \`${s}\` is not a valid keyword argument. Please refer to the API for usage.`)}),n.forEach((s,o)=>{if(s===void 0&&!t[o].parameter_has_default)throw new Error(`No value provided for required parameter: ${t[o].parameter_name}`)}),n};async function cT(){if(this.api_info)return this.api_info;const{hf_token:i}=this.options,{config:e}=this,t={"Content-Type":"application/json"};if(i&&(t.Authorization=`Bearer ${i}`),!!e)try{let n,r;if(typeof window<"u"&&window.gradio_api_info)r=window.gradio_api_info;else{if(Vb(e?.version||"2.0.0","3.30")<0)n=await this.fetch(KC,{method:"POST",body:JSON.stringify({serialize:!1,config:JSON.stringify(e)}),headers:t,credentials:"include"});else{const s=$b(e.root,GC);n=await this.fetch(s,{headers:t,credentials:"include"})}if(!n.ok)throw new Error(Xi);r=await n.json()}return"api"in r&&(r=r.api),r.named_endpoints["/predict"]&&!r.unnamed_endpoints[0]&&(r.unnamed_endpoints[0]=r.named_endpoints["/predict"]),oT(r,e,this.api_map)}catch(n){""+n.message}}async function uT(i,e,t){var n;const r={};(n=this==null?void 0:this.options)!=null&&n.hf_token&&(r.Authorization=`Bearer ${this.options.hf_token}`);const s=1e3,o=[];let l;for(let a=0;a<e.length;a+=s){const h=e.slice(a,a+s),c=new FormData;h.forEach(f=>{c.append("files",f)});try{const f=t?`${i}/${Hf}?upload_id=${t}`:`${i}/${Hf}`;l=await this.fetch(f,{method:"POST",body:c,headers:r,credentials:"include"})}catch(f){throw new Error(Xi+f.message)}if(!l.ok){const f=await l.text();return{error:`HTTP ${l.status}: ${f}`}}const u=await l.json();u&&o.push(...u)}return{files:o}}async function fT(i,e,t,n){let r=(Array.isArray(i)?i:[i]).map(o=>o.blob);const s=r.filter(o=>o.size>(n??1/0));if(s.length)throw new Error(`File size exceeds the maximum allowed size of ${n} bytes: ${s.map(o=>o.name).join(", ")}`);return await Promise.all(await this.upload_files(e,r,t).then(async o=>{if(o.error)throw new Error(o.error);return o.files?o.files.map((l,a)=>new Po({...i[a],path:l,url:e+"/file="+l})):[]}))}async function XM(i,e){return i.map(t=>new Po({path:t.name,orig_name:t.name,blob:t,size:t.size,mime_type:t.type,is_stream:e}))}class Po{constructor({path:e,url:t,orig_name:n,size:r,blob:s,is_stream:o,mime_type:l,alt_text:a}){le(this,"path"),le(this,"url"),le(this,"orig_name"),le(this,"size"),le(this,"blob"),le(this,"is_stream"),le(this,"mime_type"),le(this,"alt_text"),le(this,"meta",{_type:"gradio.FileData"}),this.path=e,this.url=t,this.orig_name=n,this.size=r,this.blob=t?void 0:s,this.is_stream=o,this.mime_type=l,this.alt_text=a}}class dT{constructor(e,t){le(this,"type"),le(this,"command"),le(this,"meta"),le(this,"fileData"),this.type="command",this.command=e,this.meta=t}}typeof process<"u"&&process.versions&&process.versions.node;function Vf(i,e,t){for(;t.length>1;){const r=t.shift();if(typeof r=="string"||typeof r=="number")i=i[r];else throw new Error("Invalid key type")}const n=t.shift();if(typeof n=="string"||typeof n=="number")i[n]=e;else throw new Error("Invalid key type")}async function Na(i,e=void 0,t=[],n=!1,r=void 0){if(Array.isArray(i)){let s=[];return await Promise.all(i.map(async(o,l)=>{var a;let h=t.slice();h.push(String(l));const c=await Na(i[l],n?((a=r?.parameters[l])==null?void 0:a.component)||void 0:e,h,!1,r);s=s.concat(c)})),s}else{if(globalThis.Buffer&&i instanceof globalThis.Buffer||i instanceof Blob)return[{path:t,blob:new Blob([i]),type:e}];if(typeof i=="object"&&i!==null){let s=[];for(const o of Object.keys(i)){const l=[...t,o],a=i[o];s=s.concat(await Na(a,void 0,l,!1,r))}return s}}return[]}function pT(i,e){var t,n;let r=(n=(t=e?.dependencies)==null?void 0:t.find(s=>s.id==i))==null?void 0:n.queue;return r!=null?!r:!e.enable_queue}function mT(i,e){return new Promise((t,n)=>{const r=new MessageChannel;r.port1.onmessage=({data:s})=>{r.port1.close(),t(s)},window.parent.postMessage(i,e,[r.port2])})}function ar(i,e,t,n,r=!1){if(n==="input"&&!r)throw new Error("Invalid code path. Cannot skip state inputs for input.");if(n==="output"&&r)return i;let s=[],o=0;const l=n==="input"?e.inputs:e.outputs;for(let a=0;a<l.length;a++){const h=l[a],c=t.find(u=>u.id===h);if(c?.type==="state"){if(r)if(i.length===l.length){const u=i[o];s.push(u),o++}else s.push(null);else{o++;continue}continue}else{const u=i[o];s.push(u),o++}}return s}async function gT(i,e,t){const n=this;await bT(n,e);const r=await Na(e,void 0,[],!0,t);return(await Promise.all(r.map(async({path:o,blob:l,type:a})=>{if(!l)return{path:o,type:a};const h=await n.upload_files(i,[l]),c=h.files&&h.files[0];return{path:o,file_url:c,type:a,name:typeof File<"u"&&l instanceof File?l?.name:void 0}}))).forEach(({path:o,file_url:l,type:a,name:h})=>{if(a==="Gallery")Vf(e,l,o);else if(l){const c=new Po({path:l,orig_name:h});Vf(e,c,o)}}),e}async function bT(i,e){var t,n;if(!(((t=i.config)==null?void 0:t.root)||((n=i.config)==null?void 0:n.root_url)))throw new Error(zb);await Kb(i,e)}async function Kb(i,e,t=[]){for(const n in e)e[n]instanceof dT?await _T(i,e,n):typeof e[n]=="object"&&e[n]!==null&&await Kb(i,e[n],[...t,n])}async function _T(i,e,t){var n,r;let s=e[t];const o=((n=i.config)==null?void 0:n.root)||((r=i.config)==null?void 0:r.root_url);if(!o)throw new Error(zb);try{let l,a;if(typeof process<"u"&&process.versions&&process.versions.node){const f=await Fe(()=>import("./assets/__vite-browser-external-DFe-p4yY.js").then(p=>p._),[],import.meta.url);a=(await Fe(()=>import("./assets/__vite-browser-external-DFe-p4yY.js").then(p=>p._),[],import.meta.url)).resolve(process.cwd(),s.meta.path),l=await f.readFile(a)}else throw new Error(eT);const h=new Blob([l],{type:"application/octet-stream"}),c=await i.upload_files(o,[h]),u=c.files&&c.files[0];if(u){const f=new Po({path:u,orig_name:s.meta.name||""});e[t]=f}}catch(l){console.error(tT,l)}}async function yT(i,e,t){const n={"Content-Type":"application/json"};this.options.hf_token&&(n.Authorization=`Bearer ${this.options.hf_token}`);try{var r=await this.fetch(i,{method:"POST",body:JSON.stringify(e),headers:{...n,...t},credentials:"include"})}catch{return[{error:Xi},500]}let s,o;try{s=await r.json(),o=r.status}catch(l){s={error:`Could not parse server response: ${l}`},o=500}return[s,o]}async function wT(i,e={}){let t=!1,n=!1;if(!this.config)throw new Error("Could not resolve app config");if(typeof i=="number")this.config.dependencies.find(r=>r.id==i);else{const r=i.replace(/^\//,"");this.config.dependencies.find(s=>s.id==this.api_map[r])}return new Promise(async(r,s)=>{const o=this.submit(i,e,null,null,!0);let l;for await(const a of o)a.type==="data"&&(n&&r(l),t=!0,l=a),a.type==="status"&&(a.stage==="error"&&s(a),a.stage==="complete"&&(n=!0,t&&r(l)))})}async function kr(i,e,t){let n=e==="subdomain"?`https://huggingface.co/api/spaces/by-subdomain/${i}`:`https://huggingface.co/api/spaces/${i}`,r,s;try{if(r=await fetch(n),s=r.status,s!==200)throw new Error;r=await r.json()}catch{t({status:"error",load_status:"error",message:XC,detail:"NOT_FOUND"});return}if(!r||s!==200)return;const{runtime:{stage:o},id:l}=r;switch(o){case"STOPPED":case"SLEEPING":t({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:o}),setTimeout(()=>{kr(i,e,t)},1e3);break;case"PAUSED":t({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:o,discussions_enabled:await Uf(l)});break;case"RUNNING":case"RUNNING_BUILDING":t({status:"running",load_status:"complete",message:"Space is running.",detail:o});break;case"BUILDING":t({status:"building",load_status:"pending",message:"Space is building...",detail:o}),setTimeout(()=>{kr(i,e,t)},1e3);break;case"APP_STARTING":t({status:"starting",load_status:"pending",message:"Space is starting...",detail:o}),setTimeout(()=>{kr(i,e,t)},1e3);break;default:t({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:o,discussions_enabled:await Uf(l)});break}}const Xb=async(i,e)=>{let t=0;const n=12,r=5e3;return new Promise(s=>{kr(i,Oh.test(i)?"space_name":"subdomain",o=>{e(o),o.status==="running"||o.status==="error"||o.status==="paused"||o.status==="space_error"?s():(o.status==="sleeping"||o.status==="building")&&(t<n?(t++,setTimeout(()=>{Xb(i,e).then(s)},r)):s())})})},vT=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function Uf(i){try{const e=await fetch(`https://huggingface.co/api/spaces/${i}/discussions`,{method:"HEAD"}),t=e.headers.get("x-error-message");return!(!e.ok||t&&vT.test(t))}catch{return!1}}async function kT(i,e){const t={};e&&(t.Authorization=`Bearer ${e}`);try{const n=await fetch(`https://huggingface.co/api/spaces/${i}/${qC}`,{headers:t});if(n.status!==200)throw new Error("Space hardware could not be obtained.");const{hardware:r}=await n.json();return r.current}catch(n){throw new Error(n.message)}}async function xT(i,e,t){const n={};t&&(n.Authorization=`Bearer ${t}`);const r={seconds:e};try{const s=await fetch(`https://huggingface.co/api/spaces/${i}/${$C}`,{method:"POST",headers:{"Content-Type":"application/json",...n},body:JSON.stringify(r)});if(s.status!==200)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await s.json()}catch(s){throw new Error(s.message)}}const jf=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function ST(i,e){const{hf_token:t,private:n,hardware:r,timeout:s,auth:o}=e;if(r&&!jf.includes(r))throw new Error(`Invalid hardware type provided. Valid types are: ${jf.map(m=>`"${m}"`).join(",")}.`);const{http_protocol:l,host:a}=await Do(i,t);let h=null;if(o){const m=await Gb(l,a,o,fetch);m&&(h=qb(m))}const c={Authorization:`Bearer ${t}`,"Content-Type":"application/json",...h?{Cookie:h.join("; ")}:{}},u=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:c})).json()).name,f=i.split("/")[1],d={repository:`${u}/${f}`};n&&(d.private=!0);let p;try{r||(p=await kT(i,t))}catch(m){throw Error(Mh+m.message)}const g=r||p||"cpu-basic";d.hardware=g;try{const m=await fetch(`https://huggingface.co/api/spaces/${i}/duplicate`,{method:"POST",headers:c,body:JSON.stringify(d)});if(m.status===409)try{return await Ba.connect(`${u}/${f}`,e)}catch(w){throw console.error("Failed to connect Client instance:",w),w}else if(m.status!==200)throw new Error(m.statusText);const b=await m.json();return await xT(`${u}/${f}`,s||300,t),await Ba.connect(AT(b.url),e)}catch(m){throw new Error(m)}}function AT(i){const e=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,t=i.match(e);if(t)return t[1]}class ET extends TransformStream{constructor(e={allowCR:!1}){super({transform:(t,n)=>{for(t=lr(this,vi)+t;;){const r=t.indexOf(`
`),s=e.allowCR?t.indexOf("\r"):-1;if(s!==-1&&s!==t.length-1&&(r===-1||r-1>s)){n.enqueue(t.slice(0,s)),t=t.slice(s+1);continue}if(r===-1)break;const o=t[r-1]==="\r"?r-1:r;n.enqueue(t.slice(0,o)),t=t.slice(r+1)}UC(this,vi,t)},flush:t=>{if(lr(this,vi)==="")return;const n=e.allowCR&&lr(this,vi).endsWith("\r")?lr(this,vi).slice(0,-1):lr(this,vi);t.enqueue(n)}}),VC(this,vi,"")}}vi=new WeakMap;function CT(i){let e=new TextDecoderStream,t=new ET({allowCR:!0});return i.pipeThrough(e).pipeThrough(t)}function TT(i){let t=/[:]\s*/.exec(i),n=t&&t.index;if(n)return[i.substring(0,n),i.substring(n+t[0].length)]}function zf(i,e,t){i.get(e)||i.set(e,t)}async function*MT(i,e){if(!i.body)return;let t=CT(i.body),n,r=t.getReader(),s;for(;;){if(e&&e.aborted)return r.cancel();if(n=await r.read(),n.done)return;if(!n.value){s&&(yield s),s=void 0;continue}let[o,l]=TT(n.value)||[];o&&(o==="data"?(s||(s={}),s[o]=s[o]?s[o]+`
`+l:l):o==="event"?(s||(s={}),s[o]=l):o==="id"?(s||(s={}),s[o]=+l||l):o==="retry"&&(s||(s={}),s[o]=+l||void 0))}}async function OT(i,e){let t=new Request(i,e);zf(t.headers,"Accept","text/event-stream"),zf(t.headers,"Content-Type","application/json");let n=await fetch(t);if(!n.ok)throw n;return MT(n,t.signal)}async function DT(){let{event_callbacks:i,unclosed_events:e,pending_stream_messages:t,stream_status:n,config:r,jwt:s}=this;const o=this;if(!r)throw new Error("Could not resolve app config");n.open=!0;let l=null,a=new URLSearchParams({session_hash:this.session_hash}).toString(),h=new URL(`${r.root}/queue/data?${a}`);if(s&&h.searchParams.set("__sign",s),l=this.stream(h),!l){console.warn("Cannot connect to SSE endpoint: "+h.toString());return}l.onmessage=async function(c){let u=JSON.parse(c.data);if(u.msg==="close_stream"){ao(n,o.abort_controller);return}const f=u.event_id;if(!f)await Promise.all(Object.keys(i).map(d=>i[d](u)));else if(i[f]&&r){u.msg==="process_completed"&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(r.protocol)&&e.delete(f);let d=i[f];typeof window<"u"&&typeof document<"u"?setTimeout(d,0,u):d(u)}else t[f]||(t[f]=[]),t[f].push(u)},l.onerror=async function(){await Promise.all(Object.keys(i).map(c=>i[c]({msg:"unexpected_error",message:Xi})))}}function ao(i,e){i&&(i.open=!1,e?.abort())}function PT(i,e,t){!i[e]?(i[e]=[],t.data.forEach((r,s)=>{i[e][s]=r})):t.data.forEach((r,s)=>{let o=LT(i[e][s],r);i[e][s]=o,t.data[s]=o})}function LT(i,e){return e.forEach(([t,n,r])=>{i=RT(i,n,t,r)}),i}function RT(i,e,t,n){if(e.length===0){if(t==="replace")return n;if(t==="append")return i+n;throw new Error(`Unsupported action: ${t}`)}let r=i;for(let o=0;o<e.length-1;o++)r=r[e[o]];const s=e[e.length-1];switch(t){case"replace":r[s]=n;break;case"append":r[s]+=n;break;case"add":Array.isArray(r)?r.splice(Number(s),0,n):r[s]=n;break;case"delete":Array.isArray(r)?r.splice(Number(s),1):delete r[s];break;default:throw new Error(`Unknown action: ${t}`)}return i}function IT(i,e={}){const t={close:()=>{console.warn("Method not implemented.")},onerror:null,onmessage:null,onopen:null,readyState:0,url:i.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return OT(i,e).then(async n=>{t.readyState=t.OPEN;try{for await(const r of n)t.onmessage&&t.onmessage(r);t.readyState=t.CLOSED}catch(r){t.onerror&&t.onerror(r),t.readyState=t.CLOSED}}).catch(n=>{console.error(n),t.onerror&&t.onerror(n),t.readyState=t.CLOSED}),t}function NT(i,e={},t,n,r){var s;try{let o=function(de){(r||ot[de.type])&&c(de)},l=function(){for(yi=!0;mt.length>0;)mt.shift()({value:void 0,done:!0})},a=function(de){yi||(mt.length>0?mt.shift()(de):wi.push(de))},h=function(de){a(BT(de)),l()},c=function(de){a({value:de,done:!1})},u=function(){return wi.length>0?Promise.resolve(wi.shift()):yi?Promise.resolve({value:void 0,done:!0}):new Promise(de=>mt.push(de))};const{hf_token:f}=this.options,{fetch:d,app_reference:p,config:g,session_hash:m,api_info:b,api_map:w,stream_status:y,pending_stream_messages:k,pending_diff_streams:A,event_callbacks:x,unclosed_events:R,post_data:D,options:F}=this,L=this;if(!b)throw new Error("No API found");if(!g)throw new Error("Could not resolve app config");let{fn_index:T,endpoint_info:W,dependency:ne}=HT(b,i,w,g),_e=hT(e,W),ee,P,re=g.protocol??"ws";const U=typeof i=="number"?"/predict":i;let M,Z=null,j=!1,Ce={},ae=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const ot=((s=F?.events)==null?void 0:s.reduce((de,Be)=>(de[Be]=!0,de),{}))||{};async function $(){const de={stage:"complete",queue:!1,time:new Date};j=de,o({...de,type:"status",endpoint:U,fn_index:T});let Be={},lt={};re==="ws"?(ee&&ee.readyState===0?ee.addEventListener("open",()=>{ee.close()}):ee.close(),Be={fn_index:T,session_hash:m}):(ao(y,L.abort_controller),l(),Be={event_id:Z},lt={event_id:Z,session_hash:m,fn_index:T});try{if(!g)throw new Error("Could not resolve app config");"event_id"in lt&&await d(`${g.root}/cancel`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(lt)}),await d(`${g.root}/reset`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(Be)})}catch{console.warn("The `/reset` endpoint could not be called. Subsequent endpoint results may be unreliable.")}}const Bi=async de=>{await this._resolve_hearbeat(de)};async function di(de){if(!g)return;let Be=de.render_id;g.components=[...g.components.filter(ye=>ye.props.rendered_in!==Be),...de.components],g.dependencies=[...g.dependencies.filter(ye=>ye.rendered_in!==Be),...de.dependencies];const lt=g.components.some(ye=>ye.type==="state"),Ft=g.dependencies.some(ye=>ye.targets.some(vt=>vt[1]==="unload"));g.connect_heartbeat=lt||Ft,await Bi(g),o({type:"render",data:de,endpoint:U,fn_index:T})}this.handle_blob(g.root,_e,W).then(async de=>{var Be;if(M={data:ar(de,ne,g.components,"input",!0)||[],event_data:t,fn_index:T,trigger_id:n},pT(T,g))o({type:"status",endpoint:U,stage:"pending",queue:!1,fn_index:T,time:new Date}),D(`${g.root}/run${U.startsWith("/")?U:`/${U}`}${ae?"?"+ae:""}`,{...M,session_hash:m}).then(([ye,vt])=>{const gt=ye.data;vt==200?(o({type:"data",endpoint:U,fn_index:T,data:ar(gt,ne,g.components,"output",F.with_null_state),time:new Date,event_data:t,trigger_id:n}),ye.render_config&&di(ye.render_config),o({type:"status",endpoint:U,fn_index:T,stage:"complete",eta:ye.average_duration,queue:!1,time:new Date})):o({type:"status",stage:"error",endpoint:U,fn_index:T,message:ye.error,queue:!1,time:new Date})}).catch(ye=>{o({type:"status",stage:"error",message:ye.message,endpoint:U,fn_index:T,queue:!1,time:new Date})});else if(re=="ws"){const{ws_protocol:ye,host:vt}=await Do(p,f);o({type:"status",stage:"pending",queue:!0,endpoint:U,fn_index:T,time:new Date});let gt=new URL(`${ye}://${Wb(vt,g.path,!0)}/queue/join${ae?"?"+ae:""}`);this.jwt&&gt.searchParams.set("__sign",this.jwt),ee=new WebSocket(gt),ee.onclose=I=>{I.wasClean||o({type:"status",stage:"error",broken:!0,message:Xi,queue:!0,endpoint:U,fn_index:T,time:new Date})},ee.onmessage=function(I){const me=JSON.parse(I.data),{type:se,status:ke,data:He}=Dl(me,Ce[T]);if(se==="update"&&ke&&!j)o({type:"status",endpoint:U,fn_index:T,time:new Date,...ke}),ke.stage==="error"&&ee.close();else if(se==="hash"){ee.send(JSON.stringify({fn_index:T,session_hash:m}));return}else se==="data"?ee.send(JSON.stringify({...M,session_hash:m})):se==="complete"?j=ke:se==="log"?o({type:"log",log:He.log,level:He.level,endpoint:U,duration:He.duration,visible:He.visible,fn_index:T}):se==="generating"&&o({type:"status",time:new Date,...ke,stage:ke?.stage,queue:!0,endpoint:U,fn_index:T});He&&(o({type:"data",time:new Date,data:ar(He.data,ne,g.components,"output",F.with_null_state),endpoint:U,fn_index:T,event_data:t,trigger_id:n}),j&&(o({type:"status",time:new Date,...j,stage:ke?.stage,queue:!0,endpoint:U,fn_index:T}),ee.close()))},Vb(g.version||"2.0.0","3.6")<0&&addEventListener("open",()=>ee.send(JSON.stringify({hash:m})))}else if(re=="sse"){o({type:"status",stage:"pending",queue:!0,endpoint:U,fn_index:T,time:new Date});var Ft=new URLSearchParams({fn_index:T.toString(),session_hash:m}).toString();let ye=new URL(`${g.root}/queue/join?${ae?ae+"&":""}${Ft}`);if(this.jwt&&ye.searchParams.set("__sign",this.jwt),P=this.stream(ye),!P)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+ye.toString()));P.onmessage=async function(vt){const gt=JSON.parse(vt.data),{type:I,status:me,data:se}=Dl(gt,Ce[T]);if(I==="update"&&me&&!j)o({type:"status",endpoint:U,fn_index:T,time:new Date,...me}),me.stage==="error"&&(P?.close(),l());else if(I==="data"){Z=gt.event_id;let[ke,He]=await D(`${g.root}/queue/data`,{...M,session_hash:m,event_id:Z});He!==200&&(o({type:"status",stage:"error",message:Xi,queue:!0,endpoint:U,fn_index:T,time:new Date}),P?.close(),l())}else I==="complete"?j=me:I==="log"?o({type:"log",log:se.log,level:se.level,endpoint:U,duration:se.duration,visible:se.visible,fn_index:T}):I==="generating"&&o({type:"status",time:new Date,...me,stage:me?.stage,queue:!0,endpoint:U,fn_index:T});se&&(o({type:"data",time:new Date,data:ar(se.data,ne,g.components,"output",F.with_null_state),endpoint:U,fn_index:T,event_data:t,trigger_id:n}),j&&(o({type:"status",time:new Date,...j,stage:me?.stage,queue:!0,endpoint:U,fn_index:T}),P?.close(),l()))}}else if(re=="sse_v1"||re=="sse_v2"||re=="sse_v2.1"||re=="sse_v3"){o({type:"status",stage:"pending",queue:!0,endpoint:U,fn_index:T,time:new Date});let ye="";typeof window<"u"&&typeof document<"u"&&(ye=(Be=window?.location)==null?void 0:Be.hostname);const gt=ye.includes(".dev.")?`https://moon-${ye.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co",I=typeof window<"u"&&typeof document<"u"&&window.parent!=window,me=ne.zerogpu&&g.space_id;(I&&me?mT("zerogpu-headers",gt):Promise.resolve(null)).then(He=>D(`${g.root}/queue/join?${ae}`,{...M,session_hash:m},He)).then(async([He,Kn])=>{if(Kn===503)o({type:"status",stage:"error",message:Ub,queue:!0,endpoint:U,fn_index:T,time:new Date});else if(Kn!==200)o({type:"status",stage:"error",message:Xi,queue:!0,endpoint:U,fn_index:T,time:new Date});else{Z=He.event_id;let Xn=async function(an){try{const{type:Mt,status:je,data:at}=Dl(an,Ce[T]);if(Mt=="heartbeat")return;if(Mt==="update"&&je&&!j)o({type:"status",endpoint:U,fn_index:T,time:new Date,...je});else if(Mt==="complete")j=je;else if(Mt=="unexpected_error")console.error("Unexpected error",je?.message),o({type:"status",stage:"error",message:je?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:U,fn_index:T,time:new Date});else if(Mt==="log"){o({type:"log",log:at.log,level:at.level,endpoint:U,duration:at.duration,visible:at.visible,fn_index:T});return}else Mt==="generating"&&(o({type:"status",time:new Date,...je,stage:je?.stage,queue:!0,endpoint:U,fn_index:T}),at&&["sse_v2","sse_v2.1","sse_v3"].includes(re)&&PT(A,Z,at));at&&(o({type:"data",time:new Date,data:ar(at.data,ne,g.components,"output",F.with_null_state),endpoint:U,fn_index:T}),at.render_config&&await di(at.render_config),j&&(o({type:"status",time:new Date,...j,stage:je?.stage,queue:!0,endpoint:U,fn_index:T}),l())),(je?.stage==="complete"||je?.stage==="error")&&(x[Z]&&delete x[Z],Z in A&&delete A[Z])}catch(Mt){console.error("Unexpected client exception",Mt),o({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:U,fn_index:T,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(re)&&(ao(y,L.abort_controller),y.open=!1,l())}};Z in k&&(k[Z].forEach(an=>Xn(an)),delete k[Z]),x[Z]=Xn,R.add(Z),y.open||await this.open_stream()}})}});let yi=!1;const wi=[],mt=[],Tt={[Symbol.asyncIterator]:()=>Tt,next:u,throw:async de=>(h(de),u()),return:async()=>(l(),u()),cancel:$};return Tt}catch(o){throw console.error("Submit function encountered an error:",o),o}}function BT(i){return{then:(e,t)=>t(i)}}function HT(i,e,t,n){let r,s,o;if(typeof e=="number")r=e,s=i.unnamed_endpoints[r],o=n.dependencies.find(l=>l.id==e);else{const l=e.replace(/^\//,"");r=t[l],s=i.named_endpoints[e.trim()],o=n.dependencies.find(a=>a.id==t[l])}if(typeof r!="number")throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:r,endpoint_info:s,dependency:o}}class Ba{constructor(e,t={events:["data"]}){le(this,"app_reference"),le(this,"options"),le(this,"config"),le(this,"api_info"),le(this,"api_map",{}),le(this,"session_hash",Math.random().toString(36).substring(2)),le(this,"jwt",!1),le(this,"last_status",{}),le(this,"cookies",null),le(this,"stream_status",{open:!1}),le(this,"pending_stream_messages",{}),le(this,"pending_diff_streams",{}),le(this,"event_callbacks",{}),le(this,"unclosed_events",new Set),le(this,"heartbeat_event",null),le(this,"abort_controller",null),le(this,"stream_instance",null),le(this,"view_api"),le(this,"upload_files"),le(this,"upload"),le(this,"handle_blob"),le(this,"post_data"),le(this,"submit"),le(this,"predict"),le(this,"open_stream"),le(this,"resolve_config"),le(this,"resolve_cookies"),this.app_reference=e,t.events||(t.events=["data"]),this.options=t,this.view_api=cT.bind(this),this.upload_files=uT.bind(this),this.handle_blob=gT.bind(this),this.post_data=yT.bind(this),this.submit=NT.bind(this),this.predict=wT.bind(this),this.open_stream=DT.bind(this),this.resolve_config=nT.bind(this),this.resolve_cookies=rT.bind(this),this.upload=fT.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}fetch(e,t){const n=new Headers(t?.headers||{});return this&&this.cookies&&n.append("Cookie",this.cookies),fetch(e,{...t,headers:n})}stream(e){const t=new Headers;return this&&this.cookies&&t.append("Cookie",this.cookies),this.abort_controller=new AbortController,this.stream_instance=IT(e.toString(),{credentials:"include",headers:t,signal:this.abort_controller.signal}),this.stream_instance}async init(){var e;if((typeof window>"u"||!("WebSocket"in window))&&!global.WebSocket){const t=await Fe(()=>import("./assets/wrapper-CviSselG-DCvi549i.js"),__vite__mapDeps([26,27]),import.meta.url);global.WebSocket=t.WebSocket}try{this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then(({config:t})=>this._resolve_hearbeat(t))}catch(t){throw Error(t)}this.api_info=await this.view_api(),this.api_map=iT(((e=this.config)==null?void 0:e.dependencies)||[])}async _resolve_hearbeat(e){if(e&&(this.config=e,this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.hf_token&&(this.jwt=await Ff(this.config.space_id,this.options.hf_token,this.cookies))),e.space_id&&this.options.hf_token&&(this.jwt=await Ff(e.space_id,this.options.hf_token)),this.config&&this.config.connect_heartbeat){const t=new URL(`${this.config.root}/heartbeat/${this.session_hash}`);this.jwt&&t.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(t))}}static async connect(e,t={events:["data"]}){const n=new this(e,t);return await n.init(),n}close(){ao(this.stream_status,this.abort_controller)}static async duplicate(e,t={events:["data"]}){return ST(e,t)}async _resolve_config(){const{http_protocol:e,host:t,space_id:n}=await Do(this.app_reference,this.options.hf_token),{status_callback:r}=this.options;n&&r&&await Xb(n,r);let s;try{if(s=await this.resolve_config(`${e}//${t}`),!s)throw new Error(vn);return this.config_success(s)}catch(o){if(n&&r)kr(n,Oh.test(n)?"space_name":"subdomain",this.handle_space_success);else throw r&&r({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(o)}}async config_success(e){if(this.config=e,typeof window<"u"&&typeof document<"u"&&window.location.protocol==="https:"&&(this.config.root=this.config.root.replace("http://","https://")),this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(t){console.error(JC+t.message)}return this.prepare_return_obj()}async handle_space_success(e){if(!this)throw new Error(vn);const{status_callback:t}=this.options;if(t&&t(e),e.status==="running")try{if(this.config=await this._resolve_config(),!this.config)throw new Error(vn);return await this.config_success(this.config)}catch(n){throw t&&t({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),n}}async component_server(e,t,n){var r;if(!this.config)throw new Error(vn);const s={},{hf_token:o}=this.options,{session_hash:l}=this;o&&(s.Authorization=`Bearer ${this.options.hf_token}`);let a,h=this.config.components.find(u=>u.id===e);(r=h?.props)!=null&&r.root_url?a=h.props.root_url:a=this.config.root;let c;if("binary"in n){c=new FormData;for(const u in n.data)u!=="binary"&&c.append(u,n.data[u]);c.set("component_id",e.toString()),c.set("fn_name",t),c.set("session_hash",l)}else c=JSON.stringify({data:n,component_id:e,fn_name:t,session_hash:l}),s["Content-Type"]="application/json";o&&(s.Authorization=`Bearer ${o}`);try{const u=await this.fetch(`${a}/component_server/`,{method:"POST",body:c,headers:s,credentials:"include"});if(!u.ok)throw new Error("Could not connect to component server: "+u.statusText);return await u.json()}catch(u){console.warn(u)}}set_cookies(e){this.cookies=qb(e).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}async function FT(i,e,t){console.debug("wasm_proxied_fetch",e,t);const n=new Request(e,t),r=new URL(n.url);if(!Th(r))return console.debug("Fallback to original fetch"),fetch(e,t);const s=n.method;if(s!=="GET"&&s!=="POST"&&s!=="PUT"&&s!=="DELETE")throw new Error(`Unsupported method: ${s}`);const o={};n.headers.forEach((a,h)=>{o[h]=a});const l=await i.httpRequest({path:r.pathname,query_string:r.searchParams.toString(),method:s,headers:o,body:n.body});return new Response(l.body,{status:l.status,headers:new Headers(l.headers)})}function VT(i,e){return Th(e)?new m_(i,e):(console.debug("Fallback to original WebSocket"),new EventSource(e))}const Jb=new URL(""+new URL("assets/theme-BldX_HGU.css",import.meta.url).href,import.meta.url).href,UT="/theme.css";function jT(i){return Ja(Jb,i)}async function zT(i,e,t){const n=new Request(e),r=new URL(n.url);if(!Th(r))return Ja(e,t);const s=await i.httpRequest({method:"GET",path:r.pathname,query_string:"",headers:{}}),o=new TextDecoder().decode(s.body);document.querySelector(`style[data-wasm-path='${e}']`)?.remove(),r.pathname===UT&&(console.debug("Unmount the prebuilt theme.css before mounting the dynamic theme.css"),document.querySelector(`link[href='${Jb}']`)?.remove());const a=document.createElement("style");a.setAttribute("data-wasm-path",e),a.textContent=o,t.appendChild(a)}const WT=""+new URL("assets/gradio-4.43.0-py3-none-any.whl",import.meta.url).href,GT=""+new URL("assets/gradio_client-1.3.0-py3-none-any.whl",import.meta.url).href;function qT(i){let e=i[16],t,n,r=Wf(i);return{c(){r.c(),t=Ct()},m(s,o){r.m(s,o),B(s,t,o),n=!0},p(s,o){o[0]&65536&&yt(e,e=s[16])?(zt(),ie(r,1,1,Ee),Wt(),r=Wf(s),r.c(),Q(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){n||(Q(r),n=!0)},o(s){ie(r),n=!1},d(s){s&&N(t),r.d(s)}}}function $T(i){let e,t,n={worker_proxy:i[13],layout:i[12],code:i[10],is_embed:i[2],$$slots:{default:[ZT]},$$scope:{ctx:i}};return e=new RC({props:n}),i[29](e),{c(){pt(e.$$.fragment)},m(r,s){nt(e,r,s),t=!0},p(r,s){const o={};s[0]&8192&&(o.worker_proxy=r[13]),s[0]&4096&&(o.layout=r[12]),s[0]&1024&&(o.code=r[10]),s[0]&4&&(o.is_embed=r[2]),s[0]&107519|s[1]&2&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(Q(e.$$.fragment,r),t=!0)},o(r){ie(e.$$.fragment,r),t=!1},d(r){i[29](null),rt(e,r)}}}function KT(i){let e,t;return e=new Zm({props:{space:null,src:null,host:Hb,info:i[0],container:i[1],is_embed:i[2],initial_height:i[3],eager:i[4],version:i[5],theme_mode:i[6],autoscroll:i[7],control_page_title:i[8],app_mode:i[9],worker_proxy:i[13],Client:i[17],mount_css:i[18]}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&1&&(s.info=n[0]),r[0]&2&&(s.container=n[1]),r[0]&4&&(s.is_embed=n[2]),r[0]&8&&(s.initial_height=n[3]),r[0]&16&&(s.eager=n[4]),r[0]&32&&(s.version=n[5]),r[0]&64&&(s.theme_mode=n[6]),r[0]&128&&(s.autoscroll=n[7]),r[0]&256&&(s.control_page_title=n[8]),r[0]&512&&(s.app_mode=n[9]),r[0]&8192&&(s.worker_proxy=n[13]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function XT(i){let e,t;return e=new Bb({props:{error:i[15],is_embed:i[2]}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&32768&&(s.error=n[15]),r[0]&4&&(s.is_embed=n[2]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function Wf(i){let e,t,n,r;const s=[XT,KT],o=[];function l(a,h){return a[15]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Ct()},m(a,h){o[e].m(a,h),B(a,n,h),r=!0},p(a,h){let c=e;e=l(a),e===c?o[e].p(a,h):(zt(),ie(o[c],1,1,()=>{o[c]=null}),Wt(),t=o[e],t?t.p(a,h):(t=o[e]=s[e](a),t.c()),Q(t,1),t.m(n.parentNode,n))},i(a){r||(Q(t),r=!0)},o(a){ie(t),r=!1},d(a){a&&N(n),o[e].d(a)}}}function JT(i){let e,t;return e=new Zm({props:{space:null,src:null,host:null,info:i[0],container:i[1],is_embed:i[2],initial_height:i[3],eager:i[4],version:i[5],theme_mode:i[6],autoscroll:i[7],control_page_title:i[8],app_mode:i[9],worker_proxy:i[13],Client:i[17],mount_css:i[18]}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&1&&(s.info=n[0]),r[0]&2&&(s.container=n[1]),r[0]&4&&(s.is_embed=n[2]),r[0]&8&&(s.initial_height=n[3]),r[0]&16&&(s.eager=n[4]),r[0]&32&&(s.version=n[5]),r[0]&64&&(s.theme_mode=n[6]),r[0]&128&&(s.autoscroll=n[7]),r[0]&256&&(s.control_page_title=n[8]),r[0]&512&&(s.app_mode=n[9]),r[0]&8192&&(s.worker_proxy=n[13]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function YT(i){let e,t;return e=new Bb({props:{error:i[15],is_embed:!0}}),{c(){pt(e.$$.fragment)},m(n,r){nt(e,n,r),t=!0},p(n,r){const s={};r[0]&32768&&(s.error=n[15]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){rt(e,n)}}}function Gf(i){let e,t,n,r;const s=[YT,JT],o=[];function l(a,h){return a[15]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Ct()},m(a,h){o[e].m(a,h),B(a,n,h),r=!0},p(a,h){let c=e;e=l(a),e===c?o[e].p(a,h):(zt(),ie(o[c],1,1,()=>{o[c]=null}),Wt(),t=o[e],t?t.p(a,h):(t=o[e]=s[e](a),t.c()),Q(t,1),t.m(n.parentNode,n))},i(a){r||(Q(t),r=!0)},o(a){ie(t),r=!1},d(a){a&&N(n),o[e].d(a)}}}function ZT(i){let e=i[16],t,n,r=Gf(i);return{c(){r.c(),t=Ct()},m(s,o){r.m(s,o),B(s,t,o),n=!0},p(s,o){o[0]&65536&&yt(e,e=s[16])?(zt(),ie(r,1,1,Ee),Wt(),r=Gf(s),r.c(),Q(r,1),r.m(t.parentNode,t)):r.p(s,o)},i(s){n||(Q(r),n=!0)},o(s){ie(r),n=!1},d(s){s&&N(t),r.d(s)}}}function QT(i){let e,t,n,r;const s=[$T,qT],o=[];function l(a,h){return a[11]?0:1}return e=l(i),t=o[e]=s[e](i),{c(){t.c(),n=Ct()},m(a,h){o[e].m(a,h),B(a,n,h),r=!0},p(a,h){let c=e;e=l(a),e===c?o[e].p(a,h):(zt(),ie(o[c],1,1,()=>{o[c]=null}),Wt(),t=o[e],t?t.p(a,h):(t=o[e]=s[e](a),t.c()),Q(t,1),t.m(n.parentNode,n))},i(a){r||(Q(t),r=!0)},o(a){ie(t),r=!1},d(a){a&&N(n),o[e].d(a)}}}function eM(i,e,t){let{info:n}=e,{container:r}=e,{is_embed:s}=e,{initial_height:o}=e,{eager:l}=e,{version:a}=e,{theme_mode:h}=e,{autoscroll:c}=e,{control_page_title:u}=e,{app_mode:f}=e,{files:d}=e,{requirements:p}=e,{code:g}=e,{entrypoint:m}=e,{sharedWorkerMode:b}=e,{playground:w=!1}=e,{layout:y}=e;const k=new f_({gradioWheelUrl:new URL(WT,import.meta.url).href,gradioClientWheelUrl:new URL(GT,import.meta.url).href,files:d??{},requirements:p??[],sharedWorkerMode:b??!1});ja(()=>{k.terminate()});let A=null;const x=M=>async(...Z)=>{try{t(15,A=null);const j=await M(...Z);return L(),j}catch(j){throw t(15,A=j),j}};if(k.runPythonCode=x(k.runPythonCode.bind(k)),k.runPythonFile=x(k.runPythonFile.bind(k)),k.writeFile=x(k.writeFile.bind(k)),k.renameFile=x(k.renameFile.bind(k)),k.unlink=x(k.unlink.bind(k)),k.install=x(k.install.bind(k)),k.addEventListener("initialization-error",M=>{t(15,A=M.detail)}),g!=null)k.runPythonCode(g);else if(m!=null)k.runPythonFile(m);else throw new Error("Either code or entrypoint must be provided.");jT(document.head);class R extends Ba{fetch(Z,j){return FT(k,Z,j)}stream(Z){return VT(k,Z)}}const D=async(M,Z)=>zT(k,M,Z);let F=0;function L(){t(16,F+=1)}let T=null;const W=k.runPythonCode,ne=k.runPythonFile,_e=k.writeFile,ee=k.renameFile,P=k.unlink,re=k.install;function U(M){_t[M?"unshift":"push"](()=>{T=M,t(14,T)})}return i.$$set=M=>{"info"in M&&t(0,n=M.info),"container"in M&&t(1,r=M.container),"is_embed"in M&&t(2,s=M.is_embed),"initial_height"in M&&t(3,o=M.initial_height),"eager"in M&&t(4,l=M.eager),"version"in M&&t(5,a=M.version),"theme_mode"in M&&t(6,h=M.theme_mode),"autoscroll"in M&&t(7,c=M.autoscroll),"control_page_title"in M&&t(8,u=M.control_page_title),"app_mode"in M&&t(9,f=M.app_mode),"files"in M&&t(19,d=M.files),"requirements"in M&&t(20,p=M.requirements),"code"in M&&t(10,g=M.code),"entrypoint"in M&&t(21,m=M.entrypoint),"sharedWorkerMode"in M&&t(22,b=M.sharedWorkerMode),"playground"in M&&t(11,w=M.playground),"layout"in M&&t(12,y=M.layout)},i.$$.update=()=>{i.$$.dirty[0]&24576&&T?.$on("code",M=>{const{code:Z}=M.detail;k.runPythonCode(Z)})},[n,r,s,o,l,a,h,c,u,f,g,w,y,k,T,A,F,R,D,d,p,m,b,W,ne,_e,ee,P,re,U]}class tM extends $t{constructor(e){super(),qt(this,e,eM,QT,yt,{info:0,container:1,is_embed:2,initial_height:3,eager:4,version:5,theme_mode:6,autoscroll:7,control_page_title:8,app_mode:9,files:19,requirements:20,code:10,entrypoint:21,sharedWorkerMode:22,playground:11,layout:12,run_code:23,run_file:24,write:25,rename:26,unlink:27,install:28},null,[-1,-1])}get info(){return this.$$.ctx[0]}set info(e){this.$$set({info:e}),E()}get container(){return this.$$.ctx[1]}set container(e){this.$$set({container:e}),E()}get is_embed(){return this.$$.ctx[2]}set is_embed(e){this.$$set({is_embed:e}),E()}get initial_height(){return this.$$.ctx[3]}set initial_height(e){this.$$set({initial_height:e}),E()}get eager(){return this.$$.ctx[4]}set eager(e){this.$$set({eager:e}),E()}get version(){return this.$$.ctx[5]}set version(e){this.$$set({version:e}),E()}get theme_mode(){return this.$$.ctx[6]}set theme_mode(e){this.$$set({theme_mode:e}),E()}get autoscroll(){return this.$$.ctx[7]}set autoscroll(e){this.$$set({autoscroll:e}),E()}get control_page_title(){return this.$$.ctx[8]}set control_page_title(e){this.$$set({control_page_title:e}),E()}get app_mode(){return this.$$.ctx[9]}set app_mode(e){this.$$set({app_mode:e}),E()}get files(){return this.$$.ctx[19]}set files(e){this.$$set({files:e}),E()}get requirements(){return this.$$.ctx[20]}set requirements(e){this.$$set({requirements:e}),E()}get code(){return this.$$.ctx[10]}set code(e){this.$$set({code:e}),E()}get entrypoint(){return this.$$.ctx[21]}set entrypoint(e){this.$$set({entrypoint:e}),E()}get sharedWorkerMode(){return this.$$.ctx[22]}set sharedWorkerMode(e){this.$$set({sharedWorkerMode:e}),E()}get playground(){return this.$$.ctx[11]}set playground(e){this.$$set({playground:e}),E()}get layout(){return this.$$.ctx[12]}set layout(e){this.$$set({layout:e}),E()}get run_code(){return this.$$.ctx[23]}get run_file(){return this.$$.ctx[24]}get write(){return this.$$.ctx[25]}get rename(){return this.$$.ctx[26]}get unlink(){return this.$$.ctx[27]}get install(){return this.$$.ctx[28]}}function Yb(i){new MutationObserver(()=>{document.body.style.padding="0"}).observe(i.target,{childList:!0});const t=new tM({target:i.target,props:{info:i.info,container:i.container,is_embed:i.isEmbed,initial_height:i.initialHeight??"300px",eager:i.eager,version:"4-43-0",theme_mode:i.themeMode,autoscroll:i.autoScroll,control_page_title:i.controlPageTitle,app_mode:i.appMode,files:i.files,requirements:i.requirements,code:i.code,entrypoint:i.entrypoint,sharedWorkerMode:i.sharedWorkerMode,playground:i.playground,layout:i.layout}});return{run_code:t.run_code,run_file:t.run_file,write:t.write,rename:t.rename,unlink:t.unlink,install:t.install,unmount(){t.$destroy()}}}globalThis.createGradioApp=Yb;b_(Yb);export{Ze as $,Y as A,Hw as B,z as C,Ix as D,Ee as E,Ae as F,zt as G,Wt as H,Ne as I,uo as J,vM as K,kM as L,L_ as M,lh as N,P_ as O,v0 as P,_t as Q,gM as R,ei as S,Me as T,cM as U,Ns as V,nn as W,_i as X,Ct as Y,Mn as Z,xM as _,qM as a,MM as a$,lM as a0,HM as a1,Fa as a2,oM as a3,c_ as a4,k_ as a5,nd as a6,fM as a7,bM as a8,Ar as a9,IS as aA,J as aB,FM as aC,KM as aD,WM as aE,nS as aF,$M as aG,yE as aH,Us as aI,nM as aJ,Qf as aK,te as aL,rM as aM,aM as aN,qo as aO,XM as aP,dM as aQ,zw as aR,wM as aS,mM as aT,Fe as aU,TM as aV,EM as aW,O_ as aX,Un as aY,hM as aZ,RM as a_,qm as aa,B_ as ab,gr as ac,mr as ad,DM as ae,LM as af,Uw as ag,ja as ah,Tn as ai,Xa as aj,Ea as ak,oS as al,zM as am,jM as an,ii as ao,Ye as ap,C as aq,Gr as ar,wo as as,Rt as at,S0 as au,Gi as av,mS as aw,E0 as ax,Hn as ay,GM as az,dt as b,z_ as b0,D_ as b1,PM as b2,Ha as b3,uM as b4,AM as b5,CC as b6,Yf as b7,pM as b8,N_ as b9,yM as ba,_M as bb,co as bc,IM as bd,Ua as be,OM as bf,fc as bg,Va as bh,xr as bi,ho as bj,Fs as bk,Vs as bl,SM as bm,BM as bn,CM as bo,Rw as bp,sM as bq,R1 as br,ac as bs,Ja as bt,Dw as bu,Gm as bv,NM as bw,fe as c,$t as d,yt as e,gS as f,E as g,pt as h,qt as i,Q as j,ie as k,rt as l,nt as m,Fr as n,jr as o,VM as p,Vr as q,ce as r,Zx as s,_ as t,Ur as u,B as v,Ue as w,N as x,X as y,S as z};
//# sourceMappingURL=lite.js.map
