import{d as fe,i as de,e as ae,$ as Te,z as g,v as L,C as T,E as Q,x as R,g as E,y as V,a9 as we,ah as je,aI as Ve,F,aL as ne,V as A,aV as Fe,aW as Ne,X as pe,aJ as me,j as p,G as Y,k as y,H as K,Q as $,ac as x,h as H,m as X,ad as ee,l as I,Y as ye,bd as se,r as _e,A as le,w as ke,a7 as De,aQ as Ue,J as He,aP as Oe,O as G,L as ze,M as Je,af as Qe,ag as We}from"../lite.js";import{B as Ge}from"./BlockLabel-BXhHlgLF.js";import{E as Ye}from"./Empty-DQJy8RTG.js";import{S as Ke}from"./ShareButton-Ciy_LqZ2.js";import{D as Ze}from"./Download-Cztu3L0x.js";import{V as Xe}from"./Video-0Fj5yWD1.js";import{D as $e}from"./DownloadLink-4k_Toddh.js";import{T as xe,P as et,a as tt}from"./Trim-BujTzEpM.js";import{U as Ie}from"./Undo-Bh9m2m4m.js";import{b as nt,t as lt,V as it}from"./Video-DkGpgnF2.js";function ot(l){let e,n;return{c(){e=Te("svg"),n=Te("path"),g(n,"d","M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","100%"),g(e,"height","100%"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","1.5"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round")},m(t,i){L(t,e,i),T(e,n)},p:Q,i:Q,o:Q,d(t){t&&R(e)}}}class rt extends fe{constructor(e){super(),de(this,e,null,ot,ae,{})}}function Se(l,e,n){const t=l.slice();return t[20]=e[n],t[22]=n,t}function st(l){let e,n,t,i,r,o=[],f=new Map,s,_,u,h,m=Ve(l[1]);const a=c=>c[22];for(let c=0;c<m.length;c+=1){let b=Se(l,m,c),D=a(b);f.set(D,o[c]=Le(D,b))}return{c(){e=V("div"),n=V("button"),t=F(),i=V("div"),r=F();for(let c=0;c<o.length;c+=1)o[c].c();s=F(),_=V("button"),g(n,"aria-label","start drag handle for trimming video"),g(n,"class","handle left svelte-10c4beq"),ne(n,"left",l[2]+"%"),g(i,"class","opaque-layer svelte-10c4beq"),ne(i,"left",l[2]+"%"),ne(i,"right",100-l[3]+"%"),g(_,"aria-label","end drag handle for trimming video"),g(_,"class","handle right svelte-10c4beq"),ne(_,"left",l[3]+"%"),g(e,"id","timeline"),g(e,"class","thumbnail-wrapper svelte-10c4beq")},m(c,b){L(c,e,b),T(e,n),T(e,t),T(e,i),T(e,r);for(let D=0;D<o.length;D+=1)o[D]&&o[D].m(e,null);T(e,s),T(e,_),u||(h=[A(n,"mousedown",l[10]),A(n,"blur",l[5]),A(n,"keydown",l[11]),A(_,"mousedown",l[12]),A(_,"blur",l[5]),A(_,"keydown",l[13])],u=!0)},p(c,b){b&4&&ne(n,"left",c[2]+"%"),b&4&&ne(i,"left",c[2]+"%"),b&8&&ne(i,"right",100-c[3]+"%"),b&2&&(m=Ve(c[1]),o=Fe(o,b,a,1,c,m,f,e,Ne,Le,s,Se)),b&8&&ne(_,"left",c[3]+"%")},d(c){c&&R(e);for(let b=0;b<o.length;b+=1)o[b].d();u=!1,pe(h)}}}function at(l){let e;return{c(){e=V("div"),e.innerHTML='<span aria-label="loading timeline" class="loader svelte-10c4beq"></span>',g(e,"class","load-wrap svelte-10c4beq")},m(n,t){L(n,e,t)},p:Q,d(n){n&&R(e)}}}function Le(l,e){let n,t,i;return{key:l,first:null,c(){n=V("img"),me(n.src,t=e[20])||g(n,"src",t),g(n,"alt",i=`frame-${e[22]}`),g(n,"draggable","false"),g(n,"class","svelte-10c4beq"),this.first=n},m(r,o){L(r,n,o)},p(r,o){e=r,o&2&&!me(n.src,t=e[20])&&g(n,"src",t),o&2&&i!==(i=`frame-${e[22]}`)&&g(n,"alt",i)},d(r){r&&R(n)}}}function ut(l){let e;function n(r,o){return r[0]?at:st}let t=n(l),i=t(l);return{c(){e=V("div"),i.c(),g(e,"class","container svelte-10c4beq")},m(r,o){L(r,e,o),i.m(e,null)},p(r,[o]){t===(t=n(r))&&i?i.p(r,o):(i.d(1),i=t(r),i&&(i.c(),i.m(e,null)))},i:Q,o:Q,d(r){r&&R(e),i.d()}}}let ve=10;function ft(l,e,n){let{videoElement:t}=e,{trimmedDuration:i}=e,{dragStart:r}=e,{dragEnd:o}=e,{loadingTimeline:f}=e,s=[],_,u=0,h=100,m=null;const a=d=>{m=d},c=()=>{m=null},b=(d,P)=>{if(m){const w=document.getElementById("timeline");if(!w)return;const q=w.getBoundingClientRect();let j=(d.clientX-q.left)/q.width*100;if(P?j=m==="left"?u+P:h+P:j=(d.clientX-q.left)/q.width*100,j=Math.max(0,Math.min(j,100)),m==="left"){n(2,u=Math.min(j,h));const B=u/100*_;n(6,t.currentTime=B,t),n(8,r=B)}else if(m==="right"){n(3,h=Math.max(j,u));const B=h/100*_;n(6,t.currentTime=B,t),n(9,o=B)}const ie=u/100*_,Z=h/100*_;n(7,i=Z-ie),n(2,u),n(3,h)}},D=d=>{if(m){const P=1/_*100;d.key==="ArrowLeft"?b({clientX:0},-P):d.key==="ArrowRight"&&b({clientX:0},P)}},U=()=>{const d=document.createElement("canvas"),P=d.getContext("2d");if(!P)return;d.width=t.videoWidth,d.height=t.videoHeight,P.drawImage(t,0,0,d.width,d.height);const w=d.toDataURL("image/jpeg",.7);n(1,s=[...s,w])};we(()=>{const d=()=>{_=t.duration;const P=_/ve;let w=0;const q=()=>{U(),w++,w<ve?n(6,t.currentTime+=P,t):t.removeEventListener("seeked",q)};t.addEventListener("seeked",q),n(6,t.currentTime=0,t)};t.readyState>=1?d():t.addEventListener("loadedmetadata",d)}),je(()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",c),window.removeEventListener("keydown",D)}),we(()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",c),window.addEventListener("keydown",D)});const M=()=>a("left"),N=d=>{(d.key==="ArrowLeft"||d.key=="ArrowRight")&&a("left")},z=()=>a("right"),W=d=>{(d.key==="ArrowLeft"||d.key=="ArrowRight")&&a("right")};return l.$$set=d=>{"videoElement"in d&&n(6,t=d.videoElement),"trimmedDuration"in d&&n(7,i=d.trimmedDuration),"dragStart"in d&&n(8,r=d.dragStart),"dragEnd"in d&&n(9,o=d.dragEnd),"loadingTimeline"in d&&n(0,f=d.loadingTimeline)},l.$$.update=()=>{l.$$.dirty&2&&n(0,f=s.length!==ve)},[f,s,u,h,a,c,t,i,r,o,M,N,z,W]}class dt extends fe{constructor(e){super(),de(this,e,ft,ut,ae,{videoElement:6,trimmedDuration:7,dragStart:8,dragEnd:9,loadingTimeline:0})}get videoElement(){return this.$$.ctx[6]}set videoElement(e){this.$$set({videoElement:e}),E()}get trimmedDuration(){return this.$$.ctx[7]}set trimmedDuration(e){this.$$set({trimmedDuration:e}),E()}get dragStart(){return this.$$.ctx[8]}set dragStart(e){this.$$set({dragStart:e}),E()}get dragEnd(){return this.$$.ctx[9]}set dragEnd(e){this.$$set({dragEnd:e}),E()}get loadingTimeline(){return this.$$.ctx[0]}set loadingTimeline(e){this.$$set({loadingTimeline:e}),E()}}function Re(l){let e,n,t,i,r,o,f;function s(a){l[13](a)}function _(a){l[14](a)}function u(a){l[15](a)}function h(a){l[16](a)}let m={videoElement:l[2]};return l[9]!==void 0&&(m.dragStart=l[9]),l[10]!==void 0&&(m.dragEnd=l[10]),l[7]!==void 0&&(m.trimmedDuration=l[7]),l[11]!==void 0&&(m.loadingTimeline=l[11]),n=new dt({props:m}),$.push(()=>x(n,"dragStart",s)),$.push(()=>x(n,"dragEnd",_)),$.push(()=>x(n,"trimmedDuration",u)),$.push(()=>x(n,"loadingTimeline",h)),{c(){e=V("div"),H(n.$$.fragment),g(e,"class","timeline-wrapper svelte-sxyn79")},m(a,c){L(a,e,c),X(n,e,null),f=!0},p(a,c){const b={};c&4&&(b.videoElement=a[2]),!t&&c&512&&(t=!0,b.dragStart=a[9],ee(()=>t=!1)),!i&&c&1024&&(i=!0,b.dragEnd=a[10],ee(()=>i=!1)),!r&&c&128&&(r=!0,b.trimmedDuration=a[7],ee(()=>r=!1)),!o&&c&2048&&(o=!0,b.loadingTimeline=a[11],ee(()=>o=!1)),n.$set(b)},i(a){f||(p(n.$$.fragment,a),f=!0)},o(a){y(n.$$.fragment,a),f=!1},d(a){a&&R(e),I(n)}}}function ct(l){let e;return{c(){e=V("div"),g(e,"class","svelte-sxyn79")},m(n,t){L(n,e,t)},p:Q,d(n){n&&R(e)}}}function _t(l){let e,n=se(l[7])+"",t;return{c(){e=V("time"),t=_e(n),g(e,"aria-label","duration of selected region in seconds"),g(e,"class","svelte-sxyn79"),le(e,"hidden",l[11])},m(i,r){L(i,e,r),T(e,t)},p(i,r){r&128&&n!==(n=se(i[7])+"")&&ke(t,n),r&2048&&le(e,"hidden",i[11])},d(i){i&&R(e)}}}function Me(l){let e,n,t,i,r;return n=new Ie({}),{c(){e=V("button"),H(n.$$.fragment),g(e,"class","action icon svelte-sxyn79"),e.disabled=l[1],g(e,"aria-label","Reset video to initial value")},m(o,f){L(o,e,f),X(n,e,null),t=!0,i||(r=A(e,"click",l[17]),i=!0)},p(o,f){(!t||f&2)&&(e.disabled=o[1])},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){y(n.$$.fragment,o),t=!1},d(o){o&&R(e),I(n),i=!1,r()}}}function Pe(l){let e,n,t,i;const r=[ht,mt],o=[];function f(s,_){return s[0]===""?0:1}return e=f(l),n=o[e]=r[e](l),{c(){n.c(),t=ye()},m(s,_){o[e].m(s,_),L(s,t,_),i=!0},p(s,_){let u=e;e=f(s),e===u?o[e].p(s,_):(Y(),y(o[u],1,1,()=>{o[u]=null}),K(),n=o[e],n?n.p(s,_):(n=o[e]=r[e](s),n.c()),p(n,1),n.m(t.parentNode,t))},i(s){i||(p(n),i=!0)},o(s){y(n),i=!1},d(s){s&&R(t),o[e].d(s)}}}function mt(l){let e,n,t,i,r;return{c(){e=V("button"),e.textContent="Trim",n=F(),t=V("button"),t.textContent="Cancel",g(e,"class","text-button svelte-sxyn79"),le(e,"hidden",l[11]),g(t,"class","text-button svelte-sxyn79"),le(t,"hidden",l[11])},m(o,f){L(o,e,f),L(o,n,f),L(o,t,f),i||(r=[A(e,"click",l[18]),A(t,"click",l[12])],i=!0)},p(o,f){f&2048&&le(e,"hidden",o[11]),f&2048&&le(t,"hidden",o[11])},i:Q,o:Q,d(o){o&&(R(e),R(n),R(t)),i=!1,pe(r)}}}function ht(l){let e,n,t,i,r;return n=new xe({}),{c(){e=V("button"),H(n.$$.fragment),e.disabled=l[1],g(e,"class","action icon svelte-sxyn79"),g(e,"aria-label","Trim video to selection")},m(o,f){L(o,e,f),X(n,e,null),t=!0,i||(r=A(e,"click",l[12]),i=!0)},p(o,f){(!t||f&2)&&(e.disabled=o[1])},i(o){t||(p(n.$$.fragment,o),t=!0)},o(o){y(n.$$.fragment,o),t=!1},d(o){o&&R(e),I(n),i=!1,r()}}}function gt(l){let e,n,t,i,r,o,f,s=l[0]==="edit"&&Re(l);function _(c,b){return c[0]==="edit"&&c[7]!==null?_t:ct}let u=_(l),h=u(l),m=l[3]&&l[0]===""&&Me(l),a=l[4]&&Pe(l);return{c(){e=V("div"),s&&s.c(),n=F(),t=V("div"),h.c(),i=F(),r=V("div"),m&&m.c(),o=F(),a&&a.c(),g(r,"class","settings-wrapper svelte-sxyn79"),g(t,"class","controls svelte-sxyn79"),g(t,"data-testid","waveform-controls"),g(e,"class","container svelte-sxyn79")},m(c,b){L(c,e,b),s&&s.m(e,null),T(e,n),T(e,t),h.m(t,null),T(t,i),T(t,r),m&&m.m(r,null),T(r,o),a&&a.m(r,null),f=!0},p(c,[b]){c[0]==="edit"?s?(s.p(c,b),b&1&&p(s,1)):(s=Re(c),s.c(),p(s,1),s.m(e,n)):s&&(Y(),y(s,1,1,()=>{s=null}),K()),u===(u=_(c))&&h?h.p(c,b):(h.d(1),h=u(c),h&&(h.c(),h.m(t,i))),c[3]&&c[0]===""?m?(m.p(c,b),b&9&&p(m,1)):(m=Me(c),m.c(),p(m,1),m.m(r,o)):m&&(Y(),y(m,1,1,()=>{m=null}),K()),c[4]?a?(a.p(c,b),b&16&&p(a,1)):(a=Pe(c),a.c(),p(a,1),a.m(r,null)):a&&(Y(),y(a,1,1,()=>{a=null}),K())},i(c){f||(p(s),p(m),p(a),f=!0)},o(c){y(s),y(m),y(a),f=!1},d(c){c&&R(e),s&&s.d(),h.d(),m&&m.d(),a&&a.d()}}}function bt(l,e,n){let{videoElement:t}=e,{showRedo:i=!1}=e,{interactive:r=!0}=e,{mode:o=""}=e,{handle_reset_value:f}=e,{handle_trim_video:s}=e,{processingVideo:_=!1}=e,u;we(async()=>{n(8,u=await nt())});let h=null,m=0,a=0,c=!1;const b=()=>{o==="edit"?(n(0,o=""),n(7,h=t.duration)):n(0,o="edit")};function D(d){m=d,n(9,m)}function U(d){a=d,n(10,a)}function M(d){h=d,n(7,h),n(0,o),n(2,t)}function N(d){c=d,n(11,c)}const z=()=>{f(),n(0,o="")},W=()=>{n(0,o=""),n(1,_=!0),lt(u,m,a,t).then(d=>{s(d)}).then(()=>{n(1,_=!1)})};return l.$$set=d=>{"videoElement"in d&&n(2,t=d.videoElement),"showRedo"in d&&n(3,i=d.showRedo),"interactive"in d&&n(4,r=d.interactive),"mode"in d&&n(0,o=d.mode),"handle_reset_value"in d&&n(5,f=d.handle_reset_value),"handle_trim_video"in d&&n(6,s=d.handle_trim_video),"processingVideo"in d&&n(1,_=d.processingVideo)},l.$$.update=()=>{l.$$.dirty&133&&o==="edit"&&h===null&&t&&n(7,h=t.duration)},[o,_,t,i,r,f,s,h,u,m,a,c,b,D,U,M,N,z,W]}class vt extends fe{constructor(e){super(),de(this,e,bt,gt,ae,{videoElement:2,showRedo:3,interactive:4,mode:0,handle_reset_value:5,handle_trim_video:6,processingVideo:1})}get videoElement(){return this.$$.ctx[2]}set videoElement(e){this.$$set({videoElement:e}),E()}get showRedo(){return this.$$.ctx[3]}set showRedo(e){this.$$set({showRedo:e}),E()}get interactive(){return this.$$.ctx[4]}set interactive(e){this.$$set({interactive:e}),E()}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),E()}get handle_reset_value(){return this.$$.ctx[5]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),E()}get handle_trim_video(){return this.$$.ctx[6]}set handle_trim_video(e){this.$$set({handle_trim_video:e}),E()}get processingVideo(){return this.$$.ctx[1]}set processingVideo(e){this.$$set({processingVideo:e}),E()}}function wt(l){let e,n;return{c(){e=V("track"),g(e,"kind","captions"),me(e.src,n=l[1])||g(e,"src",n),e.default=!0},m(t,i){L(t,e,i)},p(t,i){i[0]&2&&!me(e.src,n=t[1])&&g(e,"src",n)},d(t){t&&R(e)}}}function kt(l){let e,n;return e=new et({}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function pt(l){let e,n;return e=new tt({}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function yt(l){let e,n;return e=new Ie({}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function qe(l){let e,n,t;function i(o){l[29](o)}let r={videoElement:l[11],showRedo:!0,handle_trim_video:l[17],handle_reset_value:l[7]};return l[12]!==void 0&&(r.processingVideo=l[12]),e=new vt({props:r}),$.push(()=>x(e,"processingVideo",i)),{c(){H(e.$$.fragment)},m(o,f){X(e,o,f),t=!0},p(o,f){const s={};f[0]&2048&&(s.videoElement=o[11]),f[0]&128&&(s.handle_reset_value=o[7]),!n&&f[0]&4096&&(n=!0,s.processingVideo=o[12],ee(()=>n=!1)),e.$set(s)},i(o){t||(p(e.$$.fragment,o),t=!0)},o(o){y(e.$$.fragment,o),t=!1},d(o){I(e,o)}}}function Et(l){let e,n,t,i,r,o,f,s,_,u,h,m,a,c,b,D=se(l[8])+"",U,M,N=se(l[9])+"",z,W,d,P,w,q,j,ie,Z,B,ue,ce;function he(k){l[22](k)}function ge(k){l[23](k)}function v(k){l[24](k)}function te(k){l[25](k)}let O={src:l[0],preload:"auto",autoplay:l[3],loop:l[4],"data-testid":`${l[5]}-player`,processingVideo:l[12],$$slots:{default:[wt]},$$scope:{ctx:l}};l[8]!==void 0&&(O.currentTime=l[8]),l[9]!==void 0&&(O.duration=l[9]),l[10]!==void 0&&(O.paused=l[10]),l[11]!==void 0&&(O.node=l[11]),t=new it({props:O}),$.push(()=>x(t,"currentTime",he)),$.push(()=>x(t,"duration",ge)),$.push(()=>x(t,"paused",v)),$.push(()=>x(t,"node",te)),t.$on("click",l[14]),t.$on("play",l[26]),t.$on("pause",l[27]),t.$on("ended",l[16]),t.$on("load",l[28]);const re=[yt,pt,kt],oe=[];function Ee(k,S){return k[8]===k[9]?0:k[10]?1:2}m=Ee(l),a=oe[m]=re[m](l),j=new rt({});let C=l[6]&&qe(l);return{c(){e=V("div"),n=V("div"),H(t.$$.fragment),s=F(),_=V("div"),u=V("div"),h=V("span"),a.c(),c=F(),b=V("span"),U=_e(D),M=_e(" / "),z=_e(N),W=F(),d=V("progress"),w=F(),q=V("div"),H(j.$$.fragment),ie=F(),C&&C.c(),Z=ye(),g(n,"class","mirror-wrap svelte-euo1cw"),le(n,"mirror",l[2]),g(h,"role","button"),g(h,"tabindex","0"),g(h,"class","icon svelte-euo1cw"),g(h,"aria-label","play-pause-replay-button"),g(b,"class","time svelte-euo1cw"),d.value=P=l[8]/l[9]||0,g(d,"class","svelte-euo1cw"),g(q,"role","button"),g(q,"tabindex","0"),g(q,"class","icon svelte-euo1cw"),g(q,"aria-label","full-screen"),g(u,"class","inner svelte-euo1cw"),g(_,"class","controls svelte-euo1cw"),g(e,"class","wrap svelte-euo1cw")},m(k,S){L(k,e,S),T(e,n),X(t,n,null),T(e,s),T(e,_),T(_,u),T(u,h),oe[m].m(h,null),T(u,c),T(u,b),T(b,U),T(b,M),T(b,z),T(u,W),T(u,d),T(u,w),T(u,q),X(j,q,null),L(k,ie,S),C&&C.m(k,S),L(k,Z,S),B=!0,ue||(ce=[A(h,"click",l[14]),A(h,"keydown",l[14]),A(d,"mousemove",l[13]),A(d,"touchmove",De(l[13])),A(d,"click",Ue(De(l[15]))),A(q,"click",l[18]),A(q,"keypress",l[18])],ue=!0)},p(k,S){const J={};S[0]&1&&(J.src=k[0]),S[0]&8&&(J.autoplay=k[3]),S[0]&16&&(J.loop=k[4]),S[0]&32&&(J["data-testid"]=`${k[5]}-player`),S[0]&4096&&(J.processingVideo=k[12]),S[0]&2|S[1]&1&&(J.$$scope={dirty:S,ctx:k}),!i&&S[0]&256&&(i=!0,J.currentTime=k[8],ee(()=>i=!1)),!r&&S[0]&512&&(r=!0,J.duration=k[9],ee(()=>r=!1)),!o&&S[0]&1024&&(o=!0,J.paused=k[10],ee(()=>o=!1)),!f&&S[0]&2048&&(f=!0,J.node=k[11],ee(()=>f=!1)),t.$set(J),(!B||S[0]&4)&&le(n,"mirror",k[2]);let be=m;m=Ee(k),m!==be&&(Y(),y(oe[be],1,1,()=>{oe[be]=null}),K(),a=oe[m],a||(a=oe[m]=re[m](k),a.c()),p(a,1),a.m(h,null)),(!B||S[0]&256)&&D!==(D=se(k[8])+"")&&ke(U,D),(!B||S[0]&512)&&N!==(N=se(k[9])+"")&&ke(z,N),(!B||S[0]&768&&P!==(P=k[8]/k[9]||0))&&(d.value=P),k[6]?C?(C.p(k,S),S[0]&64&&p(C,1)):(C=qe(k),C.c(),p(C,1),C.m(Z.parentNode,Z)):C&&(Y(),y(C,1,1,()=>{C=null}),K())},i(k){B||(p(t.$$.fragment,k),p(a),p(j.$$.fragment,k),p(C),B=!0)},o(k){y(t.$$.fragment,k),y(a),y(j.$$.fragment,k),y(C),B=!1},d(k){k&&(R(e),R(ie),R(Z)),I(t),oe[m].d(),I(j),C&&C.d(k),ue=!1,pe(ce)}}}function Tt(l,e,n){let{root:t=""}=e,{src:i}=e,{subtitle:r=null}=e,{mirror:o}=e,{autoplay:f}=e,{loop:s}=e,{label:_="test"}=e,{interactive:u=!1}=e,{handle_change:h=()=>{}}=e,{handle_reset_value:m=()=>{}}=e,{upload:a}=e;const c=He();let b=0,D,U=!0,M,N=!1;function z(v){if(!D)return;if(v.type==="click"){d(v);return}if(v.type!=="touchmove"&&!(v.buttons&1))return;const te=v.type==="touchmove"?v.touches[0].clientX:v.clientX,{left:O,right:re}=v.currentTarget.getBoundingClientRect();n(8,b=D*(te-O)/(re-O))}async function W(){document.fullscreenElement!=M&&(M.currentTime>0&&!M.paused&&!M.ended&&M.readyState>M.HAVE_CURRENT_DATA?M.pause():await M.play())}function d(v){const{left:te,right:O}=v.currentTarget.getBoundingClientRect();n(8,b=D*(v.clientX-te)/(O-te))}function P(){c("stop"),c("end")}const w=async v=>{let te=new File([v],"video.mp4");const O=await Oe([te]);let re=(await a(O,t))?.filter(Boolean)[0];h(re)};function q(){M.requestFullscreen()}function j(v){b=v,n(8,b)}function ie(v){D=v,n(9,D)}function Z(v){U=v,n(10,U)}function B(v){M=v,n(11,M)}function ue(v){G.call(this,l,v)}function ce(v){G.call(this,l,v)}function he(v){G.call(this,l,v)}function ge(v){N=v,n(12,N)}return l.$$set=v=>{"root"in v&&n(19,t=v.root),"src"in v&&n(0,i=v.src),"subtitle"in v&&n(1,r=v.subtitle),"mirror"in v&&n(2,o=v.mirror),"autoplay"in v&&n(3,f=v.autoplay),"loop"in v&&n(4,s=v.loop),"label"in v&&n(5,_=v.label),"interactive"in v&&n(6,u=v.interactive),"handle_change"in v&&n(20,h=v.handle_change),"handle_reset_value"in v&&n(7,m=v.handle_reset_value),"upload"in v&&n(21,a=v.upload)},[i,r,o,f,s,_,u,m,b,D,U,M,N,z,W,d,P,w,q,t,h,a,j,ie,Z,B,ue,ce,he,ge]}class Vt extends fe{constructor(e){super(),de(this,e,Tt,Et,ae,{root:19,src:0,subtitle:1,mirror:2,autoplay:3,loop:4,label:5,interactive:6,handle_change:20,handle_reset_value:7,upload:21},null,[-1,-1])}get root(){return this.$$.ctx[19]}set root(e){this.$$set({root:e}),E()}get src(){return this.$$.ctx[0]}set src(e){this.$$set({src:e}),E()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),E()}get mirror(){return this.$$.ctx[2]}set mirror(e){this.$$set({mirror:e}),E()}get autoplay(){return this.$$.ctx[3]}set autoplay(e){this.$$set({autoplay:e}),E()}get loop(){return this.$$.ctx[4]}set loop(e){this.$$set({loop:e}),E()}get label(){return this.$$.ctx[5]}set label(e){this.$$set({label:e}),E()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),E()}get handle_change(){return this.$$.ctx[20]}set handle_change(e){this.$$set({handle_change:e}),E()}get handle_reset_value(){return this.$$.ctx[7]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),E()}get upload(){return this.$$.ctx[21]}set upload(e){this.$$set({upload:e}),E()}}const Dt=Vt;function St(l){let e=l[0].url,n,t,i,r,o=Ce(l),f=l[6]&&Ae(l),s=l[5]&&Be(l);return{c(){o.c(),n=F(),t=V("div"),f&&f.c(),i=F(),s&&s.c(),g(t,"class","icon-buttons svelte-rvdo70"),g(t,"data-testid","download-div")},m(_,u){o.m(_,u),L(_,n,u),L(_,t,u),f&&f.m(t,null),T(t,i),s&&s.m(t,null),r=!0},p(_,u){u&1&&ae(e,e=_[0].url)?(Y(),y(o,1,1,Q),K(),o=Ce(_),o.c(),p(o,1),o.m(n.parentNode,n)):o.p(_,u),_[6]?f?(f.p(_,u),u&64&&p(f,1)):(f=Ae(_),f.c(),p(f,1),f.m(t,i)):f&&(Y(),y(f,1,1,()=>{f=null}),K()),_[5]?s?(s.p(_,u),u&32&&p(s,1)):(s=Be(_),s.c(),p(s,1),s.m(t,null)):s&&(Y(),y(s,1,1,()=>{s=null}),K())},i(_){r||(p(o),p(f),p(s),r=!0)},o(_){y(o),y(f),y(s),r=!1},d(_){_&&(R(n),R(t)),o.d(_),f&&f.d(),s&&s.d()}}}function Lt(l){let e,n;return e=new Ye({props:{unpadded_box:!0,size:"large",$$slots:{default:[Mt]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},p(t,i){const r={};i&2097152&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ce(l){let e,n;return e=new Dt({props:{src:l[0].url,subtitle:l[1]?.url,autoplay:l[4],mirror:!1,label:l[2],loop:l[7],interactive:!1,upload:l[9]}}),e.$on("play",l[10]),e.$on("pause",l[11]),e.$on("stop",l[12]),e.$on("end",l[13]),e.$on("load",l[14]),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.src=t[0].url),i&2&&(r.subtitle=t[1]?.url),i&16&&(r.autoplay=t[4]),i&4&&(r.label=t[2]),i&128&&(r.loop=t[7]),i&512&&(r.upload=t[9]),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Ae(l){let e,n;return e=new $e({props:{href:l[0].url,download:l[0].orig_name||l[0].path,$$slots:{default:[Rt]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},p(t,i){const r={};i&1&&(r.href=t[0].url),i&1&&(r.download=t[0].orig_name||t[0].path),i&2097152&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Rt(l){let e,n;return e=new We({props:{Icon:Ze,label:"Download"}}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},p:Q,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Be(l){let e,n;return e=new Ke({props:{i18n:l[8],value:l[0],formatter:l[15]}}),e.$on("error",l[16]),e.$on("share",l[17]),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},p(t,i){const r={};i&256&&(r.i18n=t[8]),i&1&&(r.value=t[0]),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Mt(l){let e,n;return e=new Xe({}),{c(){H(e.$$.fragment)},m(t,i){X(e,t,i),n=!0},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){I(e,t)}}}function Pt(l){let e,n,t,i,r,o;e=new Ge({props:{show_label:l[3],Icon:Xe,label:l[2]||"Video"}});const f=[Lt,St],s=[];function _(u,h){return u[0]===null||u[0].url===void 0?0:1}return t=_(l),i=s[t]=f[t](l),{c(){H(e.$$.fragment),n=F(),i.c(),r=ye()},m(u,h){X(e,u,h),L(u,n,h),s[t].m(u,h),L(u,r,h),o=!0},p(u,[h]){const m={};h&8&&(m.show_label=u[3]),h&4&&(m.label=u[2]||"Video"),e.$set(m);let a=t;t=_(u),t===a?s[t].p(u,h):(Y(),y(s[a],1,1,()=>{s[a]=null}),K(),i=s[t],i?i.p(u,h):(i=s[t]=f[t](u),i.c()),p(i,1),i.m(r.parentNode,r))},i(u){o||(p(e.$$.fragment,u),p(i),o=!0)},o(u){y(e.$$.fragment,u),y(i),o=!1},d(u){u&&(R(n),R(r)),I(e,u),s[t].d(u)}}}function qt(l,e,n){let{value:t=null}=e,{subtitle:i=null}=e,{label:r=void 0}=e,{show_label:o=!0}=e,{autoplay:f}=e,{show_share_button:s=!0}=e,{show_download_button:_=!0}=e,{loop:u}=e,{i18n:h}=e,{upload:m}=e,a=null,c=null;const b=He();ze(async()=>{t!==a&&i!==c&&c!==null&&(a=t,n(0,t=null),await Je(),n(0,t=a)),a=t,c=i});function D(w){G.call(this,l,w)}function U(w){G.call(this,l,w)}function M(w){G.call(this,l,w)}function N(w){G.call(this,l,w)}function z(w){G.call(this,l,w)}const W=async w=>w?await Qe(w.data):"";function d(w){G.call(this,l,w)}function P(w){G.call(this,l,w)}return l.$$set=w=>{"value"in w&&n(0,t=w.value),"subtitle"in w&&n(1,i=w.subtitle),"label"in w&&n(2,r=w.label),"show_label"in w&&n(3,o=w.show_label),"autoplay"in w&&n(4,f=w.autoplay),"show_share_button"in w&&n(5,s=w.show_share_button),"show_download_button"in w&&n(6,_=w.show_download_button),"loop"in w&&n(7,u=w.loop),"i18n"in w&&n(8,h=w.i18n),"upload"in w&&n(9,m=w.upload)},l.$$.update=()=>{l.$$.dirty&1&&t&&b("change",t)},[t,i,r,o,f,s,_,u,h,m,D,U,M,N,z,W,d,P]}class Ct extends fe{constructor(e){super(),de(this,e,qt,Pt,ae,{value:0,subtitle:1,label:2,show_label:3,autoplay:4,show_share_button:5,show_download_button:6,loop:7,i18n:8,upload:9})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),E()}get subtitle(){return this.$$.ctx[1]}set subtitle(e){this.$$set({subtitle:e}),E()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),E()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),E()}get autoplay(){return this.$$.ctx[4]}set autoplay(e){this.$$set({autoplay:e}),E()}get show_share_button(){return this.$$.ctx[5]}set show_share_button(e){this.$$set({show_share_button:e}),E()}get show_download_button(){return this.$$.ctx[6]}set show_download_button(e){this.$$set({show_download_button:e}),E()}get loop(){return this.$$.ctx[7]}set loop(e){this.$$set({loop:e}),E()}get i18n(){return this.$$.ctx[8]}set i18n(e){this.$$set({i18n:e}),E()}get upload(){return this.$$.ctx[9]}set upload(e){this.$$set({upload:e}),E()}}const zt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));export{Dt as P,Ct as V,zt as a};
//# sourceMappingURL=VideoPreview-Cjka1tMr.js.map
