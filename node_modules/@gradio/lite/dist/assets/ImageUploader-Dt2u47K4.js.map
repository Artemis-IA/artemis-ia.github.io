{"version":3,"file":"ImageUploader-Dt2u47K4.js","sources":["../../../icons/dist/src/Camera.svelte","../../../icons/dist/src/Circle.svelte","../../../icons/dist/src/Square.svelte","../../../image/dist/shared/WebcamPermissions.svelte","../../../image/dist/shared/stream_utils.js","../../../image/dist/shared/Webcam.svelte","../../../image/dist/shared/ClearImage.svelte","../../../image/dist/shared/ImageUploader.svelte"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-camera\"\n>\n\t<path\n\t\td=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"\n\t/>\n\t<circle cx=\"12\" cy=\"13\" r=\"4\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-circle\"\n>\n\t<circle cx=\"12\" cy=\"12\" r=\"10\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-square\"\n>\n\t<rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n</svg>\n","<script>import { Webcam } from \"@gradio/icons\";\nimport { createEventDispatcher } from \"svelte\";\nconst dispatch = createEventDispatcher();\n</script>\n\n<button style:height=\"100%\" on:click={() => dispatch(\"click\")}>\n\t<div class=\"wrap\">\n\t\t<span class=\"icon-wrap\">\n\t\t\t<Webcam />\n\t\t</span>\n\t\t{\"Click to Access Webcam\"}\n\t</div>\n</button>\n\n<style>\n\tbutton {\n\t\tcursor: pointer;\n\t\twidth: var(--size-full);\n\t}\n\n\t.wrap {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmin-height: var(--size-60);\n\t\tcolor: var(--block-label-text-color);\n\t\theight: 100%;\n\t\tpadding-top: var(--size-3);\n\t}\n\n\t.icon-wrap {\n\t\twidth: 30px;\n\t\tmargin-bottom: var(--spacing-lg);\n\t}\n\n\t@media (--screen-md) {\n\t\t.wrap {\n\t\t\tfont-size: var(--text-lg);\n\t\t}\n\t}\n</style>\n","export function get_devices() {\n    return navigator.mediaDevices.enumerateDevices();\n}\nexport function handle_error(error) {\n    throw new Error(error);\n}\nexport function set_local_stream(local_stream, video_source) {\n    video_source.srcObject = local_stream;\n    video_source.muted = true;\n    video_source.play();\n}\nexport async function get_video_stream(include_audio, video_source, device_id) {\n    const size = {\n        width: { ideal: 1920 },\n        height: { ideal: 1440 }\n    };\n    const constraints = {\n        video: device_id ? { deviceId: { exact: device_id }, ...size } : size,\n        audio: include_audio\n    };\n    return navigator.mediaDevices\n        .getUserMedia(constraints)\n        .then((local_stream) => {\n        set_local_stream(local_stream, video_source);\n        return local_stream;\n    });\n}\nexport function set_available_devices(devices) {\n    const cameras = devices.filter((device) => device.kind === \"videoinput\");\n    return cameras;\n}\n","<script>import { createEventDispatcher, onMount } from \"svelte\";\nimport { Camera, Circle, Square, DropdownArrow } from \"@gradio/icons\";\nimport { prepare_files } from \"@gradio/client\";\nimport WebcamPermissions from \"./WebcamPermissions.svelte\";\nimport { fade } from \"svelte/transition\";\nimport {\n  get_devices,\n  get_video_stream,\n  set_available_devices\n} from \"./stream_utils\";\nlet video_source;\nlet available_video_devices = [];\nlet selected_device = null;\nlet canvas;\nexport let streaming = false;\nexport let pending = false;\nexport let root = \"\";\nexport let mode = \"image\";\nexport let mirror_webcam;\nexport let include_audio;\nexport let i18n;\nexport let upload;\nconst dispatch = createEventDispatcher();\nonMount(() => canvas = document.createElement(\"canvas\"));\nconst handle_device_change = async (event) => {\n  const target = event.target;\n  const device_id = target.value;\n  await get_video_stream(include_audio, video_source, device_id).then(\n    async (local_stream) => {\n      stream = local_stream;\n      selected_device = available_video_devices.find(\n        (device) => device.deviceId === device_id\n      ) || null;\n      options_open = false;\n    }\n  );\n};\nasync function access_webcam() {\n  try {\n    get_video_stream(include_audio, video_source).then(async (local_stream) => {\n      webcam_accessed = true;\n      available_video_devices = await get_devices();\n      stream = local_stream;\n    }).then(() => set_available_devices(available_video_devices)).then((devices) => {\n      available_video_devices = devices;\n      const used_devices = stream.getTracks().map((track) => track.getSettings()?.deviceId)[0];\n      selected_device = used_devices ? devices.find((device) => device.deviceId === used_devices) || available_video_devices[0] : available_video_devices[0];\n    });\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      dispatch(\"error\", i18n(\"image.no_webcam_support\"));\n    }\n  } catch (err) {\n    if (err instanceof DOMException && err.name == \"NotAllowedError\") {\n      dispatch(\"error\", i18n(\"image.allow_webcam_access\"));\n    } else {\n      throw err;\n    }\n  }\n}\nfunction take_picture() {\n  var context = canvas.getContext(\"2d\");\n  if ((!streaming || streaming && recording) && video_source.videoWidth && video_source.videoHeight) {\n    canvas.width = video_source.videoWidth;\n    canvas.height = video_source.videoHeight;\n    context.drawImage(\n      video_source,\n      0,\n      0,\n      video_source.videoWidth,\n      video_source.videoHeight\n    );\n    if (mirror_webcam) {\n      context.scale(-1, 1);\n      context.drawImage(video_source, -video_source.videoWidth, 0);\n    }\n    canvas.toBlob(\n      (blob) => {\n        dispatch(streaming ? \"stream\" : \"capture\", blob);\n      },\n      \"image/png\",\n      0.8\n    );\n  }\n}\nlet recording = false;\nlet recorded_blobs = [];\nlet stream;\nlet mimeType;\nlet media_recorder;\nfunction take_recording() {\n  if (recording) {\n    media_recorder.stop();\n    let video_blob = new Blob(recorded_blobs, { type: mimeType });\n    let ReaderObj = new FileReader();\n    ReaderObj.onload = async function(e) {\n      if (e.target) {\n        let _video_blob = new File(\n          [video_blob],\n          \"sample.\" + mimeType.substring(6)\n        );\n        const val = await prepare_files([_video_blob]);\n        let value = ((await upload(val, root))?.filter(Boolean))[0];\n        dispatch(\"capture\", value);\n        dispatch(\"stop_recording\");\n      }\n    };\n    ReaderObj.readAsDataURL(video_blob);\n  } else {\n    dispatch(\"start_recording\");\n    recorded_blobs = [];\n    let validMimeTypes = [\"video/webm\", \"video/mp4\"];\n    for (let validMimeType of validMimeTypes) {\n      if (MediaRecorder.isTypeSupported(validMimeType)) {\n        mimeType = validMimeType;\n        break;\n      }\n    }\n    if (mimeType === null) {\n      console.error(\"No supported MediaRecorder mimeType\");\n      return;\n    }\n    media_recorder = new MediaRecorder(stream, {\n      mimeType\n    });\n    media_recorder.addEventListener(\"dataavailable\", function(e) {\n      recorded_blobs.push(e.data);\n    });\n    media_recorder.start(200);\n  }\n  recording = !recording;\n}\nlet webcam_accessed = false;\nfunction record_video_or_photo() {\n  if (mode === \"image\" && streaming) {\n    recording = !recording;\n  }\n  if (mode === \"image\") {\n    take_picture();\n  } else {\n    take_recording();\n  }\n  if (!recording && stream) {\n    stream.getTracks().forEach((track) => track.stop());\n    video_source.srcObject = null;\n    webcam_accessed = false;\n  }\n}\nif (streaming && mode === \"image\") {\n  window.setInterval(() => {\n    if (video_source && !pending) {\n      take_picture();\n    }\n  }, 500);\n}\nlet options_open = false;\nexport function click_outside(node, cb) {\n  const handle_click = (event) => {\n    if (node && !node.contains(event.target) && !event.defaultPrevented) {\n      cb(event);\n    }\n  };\n  document.addEventListener(\"click\", handle_click, true);\n  return {\n    destroy() {\n      document.removeEventListener(\"click\", handle_click, true);\n    }\n  };\n}\nfunction handle_click_outside(event) {\n  event.preventDefault();\n  event.stopPropagation();\n  options_open = false;\n}\n</script>\n\n<div class=\"wrap\">\n\t<!-- svelte-ignore a11y-media-has-caption -->\n\t<!-- need to suppress for video streaming https://github.com/sveltejs/svelte/issues/5967 -->\n\t<video\n\t\tbind:this={video_source}\n\t\tclass:flip={mirror_webcam}\n\t\tclass:hide={!webcam_accessed}\n\t/>\n\t{#if !webcam_accessed}\n\t\t<div\n\t\t\tin:fade={{ delay: 100, duration: 200 }}\n\t\t\ttitle=\"grant webcam access\"\n\t\t\tstyle=\"height: 100%\"\n\t\t>\n\t\t\t<WebcamPermissions on:click={async () => access_webcam()} />\n\t\t</div>\n\t{:else}\n\t\t<div class=\"button-wrap\">\n\t\t\t<button\n\t\t\t\ton:click={record_video_or_photo}\n\t\t\t\taria-label={mode === \"image\" ? \"capture photo\" : \"start recording\"}\n\t\t\t>\n\t\t\t\t{#if mode === \"video\" || streaming}\n\t\t\t\t\t{#if recording}\n\t\t\t\t\t\t<div class=\"icon red\" title=\"stop recording\">\n\t\t\t\t\t\t\t<Square />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"icon red\" title=\"start recording\">\n\t\t\t\t\t\t\t<Circle />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"icon\" title=\"capture photo\">\n\t\t\t\t\t\t<Camera />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t\t{#if !recording}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"icon\"\n\t\t\t\t\ton:click={() => (options_open = true)}\n\t\t\t\t\taria-label=\"select input source\"\n\t\t\t\t>\n\t\t\t\t\t<DropdownArrow />\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t</div>\n\t\t{#if options_open && selected_device}\n\t\t\t<select\n\t\t\t\tclass=\"select-wrap\"\n\t\t\t\taria-label=\"select source\"\n\t\t\t\tuse:click_outside={handle_click_outside}\n\t\t\t\ton:change={handle_device_change}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"inset-icon\"\n\t\t\t\t\ton:click|stopPropagation={() => (options_open = false)}\n\t\t\t\t>\n\t\t\t\t\t<DropdownArrow />\n\t\t\t\t</button>\n\t\t\t\t{#if available_video_devices.length === 0}\n\t\t\t\t\t<option value=\"\">{i18n(\"common.no_devices\")}</option>\n\t\t\t\t{:else}\n\t\t\t\t\t{#each available_video_devices as device}\n\t\t\t\t\t\t<option\n\t\t\t\t\t\t\tvalue={device.deviceId}\n\t\t\t\t\t\t\tselected={selected_device.deviceId === device.deviceId}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{device.label}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t</select>\n\t\t{/if}\n\t{/if}\n</div>\n\n<style>\n\t.wrap {\n\t\tposition: relative;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.hide {\n\t\tdisplay: none;\n\t}\n\n\tvideo {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: cover;\n\t}\n\n\t.button-wrap {\n\t\tposition: absolute;\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-xl);\n\t\tpadding: var(--size-1-5);\n\t\tdisplay: flex;\n\t\tbottom: var(--size-2);\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 0);\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--radius-xl);\n\t\tline-height: var(--size-3);\n\t\tcolor: var(--button-secondary-text-color);\n\t}\n\n\t@media (--screen-md) {\n\t\tbutton {\n\t\t\tbottom: var(--size-4);\n\t\t}\n\t}\n\n\t@media (--screen-xl) {\n\t\tbutton {\n\t\t\tbottom: var(--size-8);\n\t\t}\n\t}\n\n\t.icon {\n\t\topacity: 0.8;\n\t\twidth: 18px;\n\t\theight: 18px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.red {\n\t\tfill: red;\n\t\tstroke: red;\n\t}\n\n\t.flip {\n\t\ttransform: scaleX(-1);\n\t}\n\n\t.select-wrap {\n\t\t-webkit-appearance: none;\n\t\t-moz-appearance: none;\n\t\tappearance: none;\n\t\tcolor: var(--button-secondary-text-color);\n\t\tbackground-color: transparent;\n\t\twidth: 95%;\n\t\tfont-size: var(--text-md);\n\t\tposition: absolute;\n\t\tbottom: var(--size-2);\n\t\tbackground-color: var(--block-background-fill);\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--radius-xl);\n\t\tz-index: var(--layer-top);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\ttext-align: left;\n\t\tline-height: var(--size-4);\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 0);\n\t\tmax-width: var(--size-52);\n\t}\n\n\t.select-wrap > option {\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-bottom: 1px solid var(--border-color-accent);\n\t\tpadding-right: var(--size-8);\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t}\n\n\t.select-wrap > option:hover {\n\t\tbackground-color: var(--color-accent);\n\t}\n\n\t.select-wrap > option:last-child {\n\t\tborder: none;\n\t}\n\n\t.inset-icon {\n\t\tposition: absolute;\n\t\ttop: 5px;\n\t\tright: -6.5px;\n\t\twidth: var(--size-10);\n\t\theight: var(--size-5);\n\t\topacity: 0.8;\n\t}\n\n\t@media (--screen-md) {\n\t\t.wrap {\n\t\t\tfont-size: var(--text-lg);\n\t\t}\n\t}\n</style>\n","<script>import { createEventDispatcher } from \"svelte\";\nimport { IconButton } from \"@gradio/atoms\";\nimport { Clear } from \"@gradio/icons\";\nconst dispatch = createEventDispatcher();\n</script>\n\n<div>\n\t<IconButton\n\t\tIcon={Clear}\n\t\tlabel=\"Remove Image\"\n\t\ton:click={(event) => {\n\t\t\tdispatch(\"remove_image\");\n\t\t\tevent.stopPropagation();\n\t\t}}\n\t/>\n</div>\n\n<style>\n\tdiv {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: var(--size-2);\n\t\tright: var(--size-2);\n\t\tjustify-content: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\tz-index: var(--layer-5);\n\t}\n</style>\n","<script>import { createEventDispatcher, tick } from \"svelte\";\nimport { BlockLabel } from \"@gradio/atoms\";\nimport { Image as ImageIcon } from \"@gradio/icons\";\nimport { get_coordinates_of_clicked_image } from \"./utils\";\nimport Webcam from \"./Webcam.svelte\";\nimport { Upload } from \"@gradio/upload\";\nimport ClearImage from \"./ClearImage.svelte\";\nimport { SelectSource } from \"@gradio/atoms\";\nimport Image from \"./Image.svelte\";\nexport let value;\nexport let label = void 0;\nexport let show_label;\nexport let sources = [\"upload\", \"clipboard\", \"webcam\"];\nexport let streaming = false;\nexport let pending = false;\nexport let mirror_webcam;\nexport let selectable = false;\nexport let root;\nexport let i18n;\nexport let max_file_size = null;\nexport let upload;\nexport let stream_handler;\nlet upload_input;\nlet uploading = false;\nexport let active_source = null;\nfunction handle_upload({ detail }) {\n  value = detail;\n  dispatch(\"upload\");\n}\nfunction handle_clear() {\n  value = null;\n  dispatch(\"clear\");\n  dispatch(\"change\", null);\n}\nasync function handle_save(img_blob) {\n  pending = true;\n  const f = await upload_input.load_files([\n    new File([img_blob], `webcam.png`)\n  ]);\n  value = f?.[0] || null;\n  await tick();\n  dispatch(streaming ? \"stream\" : \"change\");\n  pending = false;\n}\n$:\n  active_streaming = streaming && active_source === \"webcam\";\n$:\n  if (uploading && !active_streaming)\n    value = null;\nconst dispatch = createEventDispatcher();\nexport let dragging = false;\n$:\n  dispatch(\"drag\", dragging);\nfunction handle_click(evt) {\n  let coordinates = get_coordinates_of_clicked_image(evt);\n  if (coordinates) {\n    dispatch(\"select\", { index: coordinates, value: null });\n  }\n}\n$:\n  if (!active_source && sources) {\n    active_source = sources[0];\n  }\nasync function handle_select_source(source) {\n  switch (source) {\n    case \"clipboard\":\n      upload_input.paste_clipboard();\n      break;\n    default:\n      break;\n  }\n}\n</script>\n\n<BlockLabel {show_label} Icon={ImageIcon} label={label || \"Image\"} />\n\n<div data-testid=\"image\" class=\"image-container\">\n\t{#if value?.url && !active_streaming}\n\t\t<ClearImage\n\t\t\ton:remove_image={() => {\n\t\t\t\tvalue = null;\n\t\t\t\tdispatch(\"clear\");\n\t\t\t}}\n\t\t/>\n\t{/if}\n\t<div\n\t\tclass=\"upload-container\"\n\t\tclass:reduced-height={sources.length > 1}\n\t\tstyle:width={value ? \"auto\" : \"100%\"}\n\t>\n\t\t<Upload\n\t\t\thidden={value !== null || active_source === \"webcam\"}\n\t\t\tbind:this={upload_input}\n\t\t\tbind:uploading\n\t\t\tbind:dragging\n\t\t\tfiletype={active_source === \"clipboard\" ? \"clipboard\" : \"image/*\"}\n\t\t\ton:load={handle_upload}\n\t\t\ton:error\n\t\t\t{root}\n\t\t\t{max_file_size}\n\t\t\tdisable_click={!sources.includes(\"upload\") || value !== null}\n\t\t\t{upload}\n\t\t\t{stream_handler}\n\t\t>\n\t\t\t{#if value === null}\n\t\t\t\t<slot />\n\t\t\t{/if}\n\t\t</Upload>\n\t\t{#if active_source === \"webcam\" && (streaming || (!streaming && !value))}\n\t\t\t<Webcam\n\t\t\t\t{root}\n\t\t\t\ton:capture={(e) => handle_save(e.detail)}\n\t\t\t\ton:stream={(e) => handle_save(e.detail)}\n\t\t\t\ton:error\n\t\t\t\ton:drag\n\t\t\t\ton:upload={(e) => handle_save(e.detail)}\n\t\t\t\t{mirror_webcam}\n\t\t\t\t{streaming}\n\t\t\t\tmode=\"image\"\n\t\t\t\tinclude_audio={false}\n\t\t\t\t{i18n}\n\t\t\t\t{upload}\n\t\t\t/>\n\t\t{:else if value !== null && !streaming}\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions-->\n\t\t\t<div class:selectable class=\"image-frame\" on:click={handle_click}>\n\t\t\t\t<Image src={value.url} alt={value.alt_text} />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\t{#if sources.length > 1 || sources.includes(\"clipboard\")}\n\t\t<SelectSource\n\t\t\t{sources}\n\t\t\tbind:active_source\n\t\t\t{handle_clear}\n\t\t\thandle_select={handle_select_source}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.image-frame :global(img) {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: scale-down;\n\t}\n\n\t.image-frame {\n\t\tobject-fit: cover;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.upload-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\n\t\theight: 100%;\n\t\tflex-shrink: 1;\n\t\tmax-height: 100%;\n\t}\n\n\t.reduced-height {\n\t\theight: calc(100% - var(--size-10));\n\t}\n\n\t.image-container {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmax-height: 100%;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n</style>\n"],"names":["insert","target","svg","anchor","append","path","circle","rect","button","div","span","dispatch","createEventDispatcher","get_devices","set_local_stream","local_stream","video_source","get_video_stream","include_audio","device_id","size","constraints","set_available_devices","devices","device","ctx","create_if_block_3","if_block2","create_if_block_1","attr","button_aria_label_value","current","dirty","div_intro","create_in_transition","fade","create_if_block_2","select","i","t_value","option","set_data","t","t0_value","option_value_value","option_selected_value","t0","video","click_outside","node","cb","handle_click","event","available_video_devices","selected_device","canvas","streaming","$$props","pending","root","mode","mirror_webcam","i18n","upload","onMount","handle_device_change","stream","$$invalidate","options_open","access_webcam","webcam_accessed","used_devices","track","err","take_picture","context","recording","blob","recorded_blobs","mimeType","media_recorder","take_recording","video_blob","ReaderObj","e","_video_blob","val","prepare_files","value","validMimeTypes","validMimeType","record_video_or_photo","handle_click_outside","$$value","click_handler_1","click_handler_2","Clear","if_block","image_changes","ImageIcon","create_if_block_4","div1","div0","blocklabel_changes","upload_1_changes","label","show_label","sources","selectable","max_file_size","stream_handler","upload_input","uploading","active_source","handle_upload","detail","handle_clear","handle_save","img_blob","f","tick","dragging","evt","coordinates","get_coordinates_of_clicked_image","handle_select_source","source","capture_handler","stream_handler_1","upload_handler","active_streaming"],"mappings":"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"}