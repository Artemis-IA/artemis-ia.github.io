import{b2 as x,d as Q,i as R,e as B,g as h,y as F,F as G,z as p,v as M,C,E as q,x as j,a9 as H,ah as I,r as K,w as U,Q as O}from"../lite.js";import{g as X}from"./color-Cba5zZuy.js";import{e as Y}from"./vega-embed.module-BFkBSybu.js";import"./dsv-DB8NKgIY.js";function Z(o,t,i,a){let e=t.getPropertyValue("--color-accent"),n=t.getPropertyValue("--body-text-color"),s=t.getPropertyValue("--border-color-primary"),f=t.fontFamily,m=t.getPropertyValue("--block-title-text-weight");const _=c=>c.endsWith("px")?parseFloat(c.slice(0,-2)):12;let y=_(t.getPropertyValue("--text-md")),u=_(t.getPropertyValue("--text-sm")),d={autosize:{type:"fit",contains:"padding"},axis:{labelFont:f,labelColor:n,titleFont:f,titleColor:n,tickColor:s,labelFontSize:u,gridColor:s,titleFontWeight:"normal",titleFontSize:u,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:n,labelFont:f,titleColor:n,titleFont:f,titleFontWeight:"normal",titleFontSize:u,labelFontWeight:"normal",offset:2},title:{color:n,font:f,fontSize:y,fontWeight:m,anchor:"middle"},view:{stroke:s}};o.config=d;let r=o.encoding,g=o.layer;switch(i){case"scatter":o.config.mark={stroke:e},r.color&&r.color.type=="nominal"?r.color.scale.range=r.color.scale.range.map((c,b)=>v(a,b)):r.color&&r.color.type=="quantitative"&&(r.color.scale.range=["#eff6ff","#1e3a8a"],r.color.scale.range.interpolate="hsl");break;case"line":o.config.mark={stroke:e,cursor:"crosshair"},g.forEach(c=>{c.encoding.color&&(c.encoding.color.scale.range=c.encoding.color.scale.range.map((b,w)=>v(a,w)))});break;case"bar":o.config.mark={opacity:.8,fill:e},r.color&&(r.color.scale.range=r.color.scale.range.map((c,b)=>v(a,b)));break}return o}function v(o,t){let i=o[t%o.length];return i&&i in x?x[i]?.primary:i||x[X(t)].primary}function E(o){let t,i;return{c(){t=F("div"),i=K(o[0]),p(t,"class","caption layout svelte-1qhqpn7")},m(a,e){M(a,t,e),C(t,i)},p(a,e){e&1&&U(i,a[0])},d(a){a&&j(t)}}}function $(o){let t,i,a,e=o[0]&&E(o);return{c(){t=F("div"),i=F("div"),a=G(),e&&e.c(),p(t,"data-testid","altair"),p(t,"class","altair layout svelte-1qhqpn7")},m(n,s){M(n,t,s),C(t,i),o[12](i),C(t,a),e&&e.m(t,null),o[13](t)},p(n,[s]){n[0]?e?e.p(n,s):(e=E(n),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},i:q,o:q,d(n){n&&j(t),o[12](null),e&&e.d(),o[13](null)}}}function tt(o,t,i){let a,e,n,{value:s}=t,{target:f}=t,{colors:m=[]}=t,{caption:_}=t,{show_actions_button:y}=t,{gradio:u}=t,d,r,g,{_selectable:c}=t,b=window.getComputedStyle(f),w,z;const P=()=>Math.min(r.offsetWidth,z||r.offsetWidth);let S=()=>{};const A=()=>{n&&i(10,e.width=P(),e),Y(d,e,{actions:y}).then(function(l){if(g=l.view,S=()=>{g.signal("width",P()).run()},!c)return;const V=(et,it)=>{const k=g.signal("brush");if(k)if(Object.keys(k).length===0)u.dispatch("select",{value:null,index:null,selected:!1});else{const D=Object.keys(k)[0];let J=k[D].map(N=>N/1e3);u.dispatch("select",{value:k,index:J,selected:!0})}};g.addEventListener("mouseup",V),g.addEventListener("touchup",V)})};let W=new ResizeObserver(()=>{n&&e.width!==r.offsetWidth&&S()});H(()=>{A(),W.observe(r)}),I(()=>{W.disconnect()});function L(l){O[l?"unshift":"push"](()=>{d=l,i(1,d)})}function T(l){O[l?"unshift":"push"](()=>{r=l,i(2,r)})}return o.$$set=l=>{"value"in l&&i(3,s=l.value),"target"in l&&i(4,f=l.target),"colors"in l&&i(5,m=l.colors),"caption"in l&&i(0,_=l.caption),"show_actions_button"in l&&i(6,y=l.show_actions_button),"gradio"in l&&i(7,u=l.gradio),"_selectable"in l&&i(8,c=l._selectable)},o.$$.update=()=>{o.$$.dirty&8&&i(11,a=s?.plot),o.$$.dirty&2048&&i(10,e=JSON.parse(a)),o.$$.dirty&1280&&e&&e.params&&!c&&i(10,e.params=e.params.filter(l=>l.name!=="brush"),e),o.$$.dirty&1064&&s.chart&&i(10,e=Z(e,b,s.chart,m)),o.$$.dirty&1536&&w!==e&&(i(9,w=e),z=e.width),o.$$.dirty&1032&&(n=!(e.encoding?.column?.field||e.encoding?.row?.field||s.chart===void 0))},[_,d,r,s,f,m,y,u,c,w,e,a,L,T]}class at extends Q{constructor(t){super(),R(this,t,tt,$,B,{value:3,target:4,colors:5,caption:0,show_actions_button:6,gradio:7,_selectable:8})}get value(){return this.$$.ctx[3]}set value(t){this.$$set({value:t}),h()}get target(){return this.$$.ctx[4]}set target(t){this.$$set({target:t}),h()}get colors(){return this.$$.ctx[5]}set colors(t){this.$$set({colors:t}),h()}get caption(){return this.$$.ctx[0]}set caption(t){this.$$set({caption:t}),h()}get show_actions_button(){return this.$$.ctx[6]}set show_actions_button(t){this.$$set({show_actions_button:t}),h()}get gradio(){return this.$$.ctx[7]}set gradio(t){this.$$set({gradio:t}),h()}get _selectable(){return this.$$.ctx[8]}set _selectable(t){this.$$set({_selectable:t}),h()}}export{at as default};
//# sourceMappingURL=AltairPlot-BtJbcstK.js.map
