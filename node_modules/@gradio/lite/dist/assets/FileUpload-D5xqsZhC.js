import{d as R,i as S,e as X,g as b,aI as W,y as A,z as F,aL as Z,v as E,C as z,G as T,aV as fe,b9 as ue,H as V,j as w,k,x as C,J as se,r as O,F as L,A as x,V as K,w as Q,X as _e,E as ee,h as U,m as I,l as P,ba as ce,Y as ae,O as G,M as he,Q as ge,ac as me,ad as be,n as de,u as we,o as ke,q as ve}from"../lite.js";import{B as re}from"./BlockLabel-BXhHlgLF.js";import{E as pe}from"./Empty-DQJy8RTG.js";import{F as Y}from"./File-D3vD8tCh.js";import{U as ze}from"./Upload-BQQpOvI3.js";import{M as Fe}from"./ModifyUpload-BH4qDw16.js";import{D as ye}from"./DownloadLink-4k_Toddh.js";const le=i=>{let e=["B","KB","MB","GB","PB"],t=0;for(;i>1024;)i/=1024,t++;let l=e[t];return i.toFixed(1)+"&nbsp;"+l};function te(i,e,t){const l=i.slice();return l[12]=e[t],l[14]=t,l}function $e(i){let e=i[2]("file.uploading")+"",t;return{c(){t=O(e)},m(l,n){E(l,t,n)},p(l,n){n&4&&e!==(e=l[2]("file.uploading")+"")&&Q(t,e)},i:ee,o:ee,d(l){l&&C(t)}}}function qe(i){let e,t;return e=new ye({props:{href:i[12].url,download:i[6]&&window.__is_colab__?null:i[12].orig_name,$$slots:{default:[Be]},$$scope:{ctx:i}}}),{c(){U(e.$$.fragment)},m(l,n){I(e,l,n),t=!0},p(l,n){const s={};n&8&&(s.href=l[12].url),n&8&&(s.download=l[6]&&window.__is_colab__?null:l[12].orig_name),n&32776&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Be(i){let e,t=(i[12].size!=null?le(i[12].size):"(size unknown)")+"",l;return{c(){e=new ce(!1),l=O(" ⇣"),e.a=l},m(n,s){e.m(t,n,s),E(n,l,s)},p(n,s){s&8&&t!==(t=(n[12].size!=null?le(n[12].size):"(size unknown)")+"")&&e.p(t)},d(n){n&&(e.d(),C(l))}}}function ne(i){let e,t,l,n;function s(){return i[8](i[14])}function r(..._){return i[9](i[14],..._)}return{c(){e=A("td"),t=A("button"),t.textContent="×",F(t,"class","label-clear-button svelte-18wv37q"),F(t,"aria-label","Remove this file"),F(e,"class","svelte-18wv37q")},m(_,c){E(_,e,c),z(e,t),l||(n=[K(t,"click",s),K(t,"keydown",r)],l=!0)},p(_,c){i=_},d(_){_&&C(e),l=!1,_e(n)}}}function ie(i,e){let t,l,n,s=e[12].filename_stem+"",r,_,c,o=e[12].filename_ext+"",f,a,g,d,m,h,v,y,$,M,D;const H=[qe,$e],q=[];function N(u,B){return u[12].url?0:1}m=N(e),h=q[m]=H[m](e);let p=e[3].length>1&&ne(e);function j(...u){return e[10](e[14],...u)}return{key:i,first:null,c(){t=A("tr"),l=A("td"),n=A("span"),r=O(s),_=L(),c=A("span"),f=O(o),g=L(),d=A("td"),h.c(),v=L(),p&&p.c(),y=L(),F(n,"class","stem svelte-18wv37q"),F(c,"class","ext svelte-18wv37q"),F(l,"class","filename svelte-18wv37q"),F(l,"aria-label",a=e[12].orig_name),F(d,"class","download svelte-18wv37q"),F(t,"class","file svelte-18wv37q"),x(t,"selectable",e[0]),this.first=t},m(u,B){E(u,t,B),z(t,l),z(l,n),z(n,r),z(l,_),z(l,c),z(c,f),z(t,g),z(t,d),q[m].m(d,null),z(t,v),p&&p.m(t,null),z(t,y),$=!0,M||(D=K(t,"click",j),M=!0)},p(u,B){e=u,(!$||B&8)&&s!==(s=e[12].filename_stem+"")&&Q(r,s),(!$||B&8)&&o!==(o=e[12].filename_ext+"")&&Q(f,o),(!$||B&8&&a!==(a=e[12].orig_name))&&F(l,"aria-label",a);let J=m;m=N(e),m===J?q[m].p(e,B):(T(),k(q[J],1,1,()=>{q[J]=null}),V(),h=q[m],h?h.p(e,B):(h=q[m]=H[m](e),h.c()),w(h,1),h.m(d,null)),e[3].length>1?p?p.p(e,B):(p=ne(e),p.c(),p.m(t,y)):p&&(p.d(1),p=null),(!$||B&1)&&x(t,"selectable",e[0])},i(u){$||(w(h),$=!0)},o(u){k(h),$=!1},d(u){u&&C(t),q[m].d(),p&&p.d(),M=!1,D()}}}function Ae(i){let e,t,l,n=[],s=new Map,r,_=W(i[3]);const c=o=>o[12];for(let o=0;o<_.length;o+=1){let f=te(i,_,o),a=c(f);s.set(a,n[o]=ie(a,f))}return{c(){e=A("div"),t=A("table"),l=A("tbody");for(let o=0;o<n.length;o+=1)n[o].c();F(l,"class","svelte-18wv37q"),F(t,"class","file-preview svelte-18wv37q"),F(e,"class","file-preview-holder svelte-18wv37q"),Z(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(o,f){E(o,e,f),z(e,t),z(t,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(l,null);r=!0},p(o,[f]){f&125&&(_=W(o[3]),T(),n=fe(n,f,c,1,o,_,s,l,ue,ie,null,te),V()),(!r||f&2)&&Z(e,"max-height",typeof o[1]===void 0?"auto":o[1]+"px")},i(o){if(!r){for(let f=0;f<_.length;f+=1)w(n[f]);r=!0}},o(o){for(let f=0;f<n.length;f+=1)k(n[f]);r=!1},d(o){o&&C(e);for(let f=0;f<n.length;f+=1)n[f].d()}}}function Ee(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function Ce(i,e,t){let l;const n=se();let{value:s}=e,{selectable:r=!1}=e,{height:_=void 0}=e,{i18n:c}=e;function o(h,v){const y=h.currentTarget;(h.target===y||y&&y.firstElementChild&&h.composedPath().includes(y.firstElementChild))&&n("select",{value:l[v].orig_name,index:v})}function f(h){const v=l.splice(h,1);t(3,l=[...l]),t(7,s=l),n("delete",v[0]),n("change",l)}const a=typeof window<"u",g=h=>{f(h)},d=(h,v)=>{v.key==="Enter"&&f(h)},m=(h,v)=>{o(v,h)};return i.$$set=h=>{"value"in h&&t(7,s=h.value),"selectable"in h&&t(0,r=h.selectable),"height"in h&&t(1,_=h.height),"i18n"in h&&t(2,c=h.i18n)},i.$$.update=()=>{i.$$.dirty&128&&t(3,l=(Array.isArray(s)?s:[s]).map(h=>{const[v,y]=Ee(h.orig_name??"");return{...h,filename_stem:v,filename_ext:y}}))},[r,_,c,l,o,f,a,s,g,d,m]}class Me extends R{constructor(e){super(),S(this,e,Ce,Ae,X,{value:7,selectable:0,height:1,i18n:2})}get value(){return this.$$.ctx[7]}set value(e){this.$$set({value:e}),b()}get selectable(){return this.$$.ctx[0]}set selectable(e){this.$$set({selectable:e}),b()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),b()}get i18n(){return this.$$.ctx[2]}set i18n(e){this.$$set({i18n:e}),b()}}const oe=Me;function Ue(i){let e,t;return e=new pe({props:{unpadded_box:!0,size:"large",$$slots:{default:[Pe]},$$scope:{ctx:i}}}),{c(){U(e.$$.fragment)},m(l,n){I(e,l,n),t=!0},p(l,n){const s={};n&128&&(s.$$scope={dirty:n,ctx:l}),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Ie(i){let e,t;return e=new oe({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){U(e.$$.fragment)},m(l,n){I(e,l,n),t=!0},p(l,n){const s={};n&32&&(s.i18n=l[5]),n&8&&(s.selectable=l[3]),n&1&&(s.value=l[0]),n&16&&(s.height=l[4]),e.$set(s)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Pe(i){let e,t;return e=new Y({}),{c(){U(e.$$.fragment)},m(l,n){I(e,l,n),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function De(i){let e,t,l,n,s,r,_;e=new re({props:{show_label:i[2],float:i[0]===null,Icon:Y,label:i[1]||"File"}});const c=[Ie,Ue],o=[];function f(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return n=f(i,-1),s=o[n]=c[n](i),{c(){U(e.$$.fragment),t=L(),s.c(),r=ae()},m(a,g){I(e,a,g),E(a,t,g),o[n].m(a,g),E(a,r,g),_=!0},p(a,[g]){const d={};g&4&&(d.show_label=a[2]),g&1&&(d.float=a[0]===null),g&2&&(d.label=a[1]||"File"),e.$set(d);let m=n;n=f(a,g),n===m?o[n].p(a,g):(T(),k(o[m],1,1,()=>{o[m]=null}),V(),s=o[n],s?s.p(a,g):(s=o[n]=c[n](a),s.c()),w(s,1),s.m(r.parentNode,r))},i(a){_||(w(e.$$.fragment,a),w(s),_=!0)},o(a){k(e.$$.fragment,a),k(s),_=!1},d(a){a&&(C(t),C(r)),P(e,a),o[n].d(a)}}}function Le(i,e,t){let{value:l=null}=e,{label:n}=e,{show_label:s=!0}=e,{selectable:r=!1}=e,{height:_=void 0}=e,{i18n:c}=e;function o(f){G.call(this,i,f)}return i.$$set=f=>{"value"in f&&t(0,l=f.value),"label"in f&&t(1,n=f.label),"show_label"in f&&t(2,s=f.show_label),"selectable"in f&&t(3,r=f.selectable),"height"in f&&t(4,_=f.height),"i18n"in f&&t(5,c=f.i18n)},[l,n,s,r,_,c,o]}class Ge extends R{constructor(e){super(),S(this,e,Le,De,X,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),b()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),b()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),b()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),b()}get height(){return this.$$.ctx[4]}set height(e){this.$$set({height:e}),b()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),b()}}const We=Ge;function He(i){let e,t,l;function n(r){i[19](r)}let s={filetype:i[4],file_count:i[3],max_file_size:i[9],root:i[6],stream_handler:i[11],upload:i[10],$$slots:{default:[Oe]},$$scope:{ctx:i}};return i[12]!==void 0&&(s.dragging=i[12]),e=new ze({props:s}),ge.push(()=>me(e,"dragging",n)),e.$on("load",i[13]),e.$on("error",i[20]),{c(){U(e.$$.fragment)},m(r,_){I(e,r,_),l=!0},p(r,_){const c={};_&16&&(c.filetype=r[4]),_&8&&(c.file_count=r[3]),_&512&&(c.max_file_size=r[9]),_&64&&(c.root=r[6]),_&2048&&(c.stream_handler=r[11]),_&1024&&(c.upload=r[10]),_&2097152&&(c.$$scope={dirty:_,ctx:r}),!t&&_&4096&&(t=!0,c.dragging=r[12],be(()=>t=!1)),e.$set(c)},i(r){l||(w(e.$$.fragment,r),l=!0)},o(r){k(e.$$.fragment,r),l=!1},d(r){P(e,r)}}}function Ne(i){let e,t,l,n;return e=new Fe({props:{i18n:i[8],absolute:!0}}),e.$on("clear",i[14]),l=new oe({props:{i18n:i[8],selectable:i[5],value:i[0],height:i[7]}}),l.$on("select",i[16]),l.$on("change",i[17]),l.$on("delete",i[18]),{c(){U(e.$$.fragment),t=L(),U(l.$$.fragment)},m(s,r){I(e,s,r),E(s,t,r),I(l,s,r),n=!0},p(s,r){const _={};r&256&&(_.i18n=s[8]),e.$set(_);const c={};r&256&&(c.i18n=s[8]),r&32&&(c.selectable=s[5]),r&1&&(c.value=s[0]),r&128&&(c.height=s[7]),l.$set(c)},i(s){n||(w(e.$$.fragment,s),w(l.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),n=!1},d(s){s&&C(t),P(e,s),P(l,s)}}}function Oe(i){let e;const t=i[15].default,l=de(t,i,i[21],null);return{c(){l&&l.c()},m(n,s){l&&l.m(n,s),e=!0},p(n,s){l&&l.p&&(!e||s&2097152)&&we(l,t,n,n[21],e?ve(t,n[21],s,null):ke(n[21]),null)},i(n){e||(w(l,n),e=!0)},o(n){k(l,n),e=!1},d(n){l&&l.d(n)}}}function Te(i){let e,t,l,n,s,r,_;e=new re({props:{show_label:i[2],Icon:Y,float:!i[0],label:i[1]||"File"}});const c=[Ne,He],o=[];function f(a,g){return g&1&&(l=null),l==null&&(l=!!(a[0]&&(!Array.isArray(a[0])||a[0].length>0))),l?0:1}return n=f(i,-1),s=o[n]=c[n](i),{c(){U(e.$$.fragment),t=L(),s.c(),r=ae()},m(a,g){I(e,a,g),E(a,t,g),o[n].m(a,g),E(a,r,g),_=!0},p(a,[g]){const d={};g&4&&(d.show_label=a[2]),g&1&&(d.float=!a[0]),g&2&&(d.label=a[1]||"File"),e.$set(d);let m=n;n=f(a,g),n===m?o[n].p(a,g):(T(),k(o[m],1,1,()=>{o[m]=null}),V(),s=o[n],s?s.p(a,g):(s=o[n]=c[n](a),s.c()),w(s,1),s.m(r.parentNode,r))},i(a){_||(w(e.$$.fragment,a),w(s),_=!0)},o(a){k(e.$$.fragment,a),k(s),_=!1},d(a){a&&(C(t),C(r)),P(e,a),o[n].d(a)}}}function Ve(i,e,t){let{$$slots:l={},$$scope:n}=e,{value:s}=e,{label:r}=e,{show_label:_=!0}=e,{file_count:c="single"}=e,{file_types:o=null}=e,{selectable:f=!1}=e,{root:a}=e,{height:g=void 0}=e,{i18n:d}=e,{max_file_size:m=null}=e,{upload:h}=e,{stream_handler:v}=e;async function y({detail:u}){t(0,s=u),await he(),M("change",s),M("upload",u)}function $(){t(0,s=null),M("change",null),M("clear")}const M=se();let D=!1;function H(u){G.call(this,i,u)}function q(u){G.call(this,i,u)}function N(u){G.call(this,i,u)}function p(u){D=u,t(12,D)}function j(u){G.call(this,i,u)}return i.$$set=u=>{"value"in u&&t(0,s=u.value),"label"in u&&t(1,r=u.label),"show_label"in u&&t(2,_=u.show_label),"file_count"in u&&t(3,c=u.file_count),"file_types"in u&&t(4,o=u.file_types),"selectable"in u&&t(5,f=u.selectable),"root"in u&&t(6,a=u.root),"height"in u&&t(7,g=u.height),"i18n"in u&&t(8,d=u.i18n),"max_file_size"in u&&t(9,m=u.max_file_size),"upload"in u&&t(10,h=u.upload),"stream_handler"in u&&t(11,v=u.stream_handler),"$$scope"in u&&t(21,n=u.$$scope)},i.$$.update=()=>{i.$$.dirty&4096&&M("drag",D)},[s,r,_,c,o,f,a,g,d,m,h,v,D,y,$,l,H,q,N,p,j,n]}class je extends R{constructor(e){super(),S(this,e,Ve,Te,X,{value:0,label:1,show_label:2,file_count:3,file_types:4,selectable:5,root:6,height:7,i18n:8,max_file_size:9,upload:10,stream_handler:11})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),b()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),b()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),b()}get file_count(){return this.$$.ctx[3]}set file_count(e){this.$$set({file_count:e}),b()}get file_types(){return this.$$.ctx[4]}set file_types(e){this.$$set({file_types:e}),b()}get selectable(){return this.$$.ctx[5]}set selectable(e){this.$$set({selectable:e}),b()}get root(){return this.$$.ctx[6]}set root(e){this.$$set({root:e}),b()}get height(){return this.$$.ctx[7]}set height(e){this.$$set({height:e}),b()}get i18n(){return this.$$.ctx[8]}set i18n(e){this.$$set({i18n:e}),b()}get max_file_size(){return this.$$.ctx[9]}set max_file_size(e){this.$$set({max_file_size:e}),b()}get upload(){return this.$$.ctx[10]}set upload(e){this.$$set({upload:e}),b()}get stream_handler(){return this.$$.ctx[11]}set stream_handler(e){this.$$set({stream_handler:e}),b()}}const Ze=je;export{Ze as B,We as F,oe as a};
//# sourceMappingURL=FileUpload-D5xqsZhC.js.map
