{"version":3,"file":"index-Bb7RbeAY.js","sources":["../../../video/dist/shared/InteractiveVideo.svelte","../../../video/dist/Index.svelte"],"sourcesContent":["<script>import { createEventDispatcher } from \"svelte\";\nimport { Upload, ModifyUpload } from \"@gradio/upload\";\nimport { BlockLabel } from \"@gradio/atoms\";\nimport { Webcam } from \"@gradio/image\";\nimport { Video } from \"@gradio/icons\";\nimport { prettyBytes, playable } from \"./utils\";\nimport Player from \"./Player.svelte\";\nimport { SelectSource } from \"@gradio/atoms\";\nexport let value = null;\nexport let subtitle = null;\nexport let sources = [\"webcam\", \"upload\"];\nexport let label = void 0;\nexport let show_download_button = false;\nexport let show_label = true;\nexport let mirror_webcam = false;\nexport let include_audio;\nexport let autoplay;\nexport let root;\nexport let i18n;\nexport let active_source = \"webcam\";\nexport let handle_reset_value = () => {\n};\nexport let max_file_size = null;\nexport let upload;\nexport let stream_handler;\nexport let loop;\nconst dispatch = createEventDispatcher();\nfunction handle_load({ detail }) {\n  value = detail;\n  dispatch(\"change\", detail);\n  dispatch(\"upload\", detail);\n}\nfunction handle_clear() {\n  value = null;\n  dispatch(\"change\", null);\n  dispatch(\"clear\");\n}\nfunction handle_change(video) {\n  dispatch(\"change\", video);\n}\nfunction handle_capture({\n  detail\n}) {\n  dispatch(\"change\", detail);\n}\nlet dragging = false;\n$:\n  dispatch(\"drag\", dragging);\n</script>\n\n<BlockLabel {show_label} Icon={Video} label={label || \"Video\"} />\n<div data-testid=\"video\" class=\"video-container\">\n\t{#if value === null || value.url === undefined}\n\t\t<div class=\"upload-container\">\n\t\t\t{#if active_source === \"upload\"}\n\t\t\t\t<Upload\n\t\t\t\t\tbind:dragging\n\t\t\t\t\tfiletype=\"video/x-m4v,video/*\"\n\t\t\t\t\ton:load={handle_load}\n\t\t\t\t\t{max_file_size}\n\t\t\t\t\ton:error={({ detail }) => dispatch(\"error\", detail)}\n\t\t\t\t\t{root}\n\t\t\t\t\t{upload}\n\t\t\t\t\t{stream_handler}\n\t\t\t\t>\n\t\t\t\t\t<slot />\n\t\t\t\t</Upload>\n\t\t\t{:else if active_source === \"webcam\"}\n\t\t\t\t<Webcam\n\t\t\t\t\t{root}\n\t\t\t\t\t{mirror_webcam}\n\t\t\t\t\t{include_audio}\n\t\t\t\t\tmode=\"video\"\n\t\t\t\t\ton:error\n\t\t\t\t\ton:capture={handle_capture}\n\t\t\t\t\ton:start_recording\n\t\t\t\t\ton:stop_recording\n\t\t\t\t\t{i18n}\n\t\t\t\t\t{upload}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</div>\n\t{:else}\n\t\t<ModifyUpload\n\t\t\t{i18n}\n\t\t\ton:clear={handle_clear}\n\t\t\tdownload={show_download_button ? value.url : null}\n\t\t/>\n\t\t{#if playable()}\n\t\t\t{#key value?.url}\n\t\t\t\t<Player\n\t\t\t\t\t{upload}\n\t\t\t\t\t{root}\n\t\t\t\t\tinteractive\n\t\t\t\t\t{autoplay}\n\t\t\t\t\tsrc={value.url}\n\t\t\t\t\tsubtitle={subtitle?.url}\n\t\t\t\t\ton:play\n\t\t\t\t\ton:pause\n\t\t\t\t\ton:stop\n\t\t\t\t\ton:end\n\t\t\t\t\tmirror={mirror_webcam && active_source === \"webcam\"}\n\t\t\t\t\t{label}\n\t\t\t\t\t{handle_change}\n\t\t\t\t\t{handle_reset_value}\n\t\t\t\t\t{loop}\n\t\t\t\t/>\n\t\t\t{/key}\n\t\t{:else if value.size}\n\t\t\t<div class=\"file-name\">{value.orig_name || value.url}</div>\n\t\t\t<div class=\"file-size\">\n\t\t\t\t{prettyBytes(value.size)}\n\t\t\t</div>\n\t\t{/if}\n\t{/if}\n\n\t<SelectSource {sources} bind:active_source {handle_clear} />\n</div>\n\n<style>\n\t.file-name {\n\t\tpadding: var(--size-6);\n\t\tfont-size: var(--text-xxl);\n\t\tword-break: break-all;\n\t}\n\n\t.file-size {\n\t\tpadding: var(--size-2);\n\t\tfont-size: var(--text-xl);\n\t}\n\n\t.upload-container {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t}\n\n\t.video-container {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script>import { Block, UploadText } from \"@gradio/atoms\";\nimport StaticVideo from \"./shared/VideoPreview.svelte\";\nimport Video from \"./shared/InteractiveVideo.svelte\";\nimport { StatusTracker } from \"@gradio/statustracker\";\nexport let elem_id = \"\";\nexport let elem_classes = [];\nexport let visible = true;\nexport let value = null;\nlet old_value = null;\nexport let label;\nexport let sources;\nexport let root;\nexport let show_label;\nexport let loading_status;\nexport let height;\nexport let width;\nexport let container = false;\nexport let scale = null;\nexport let min_width = void 0;\nexport let autoplay = false;\nexport let show_share_button = true;\nexport let show_download_button;\nexport let gradio;\nexport let interactive;\nexport let mirror_webcam;\nexport let include_audio;\nexport let loop = false;\nlet _video = null;\nlet _subtitle = null;\nlet active_source;\nlet initial_value = value;\n$:\n  if (value && initial_value === null) {\n    initial_value = value;\n  }\nconst handle_reset_value = () => {\n  if (initial_value === null || value === initial_value) {\n    return;\n  }\n  value = initial_value;\n};\n$:\n  if (sources && !active_source) {\n    active_source = sources[0];\n  }\n$: {\n  if (value != null) {\n    _video = value.video;\n    _subtitle = value.subtitles;\n  } else {\n    _video = null;\n    _subtitle = null;\n  }\n}\nlet dragging = false;\n$: {\n  if (JSON.stringify(value) !== JSON.stringify(old_value)) {\n    old_value = value;\n    gradio.dispatch(\"change\");\n  }\n}\nfunction handle_change({ detail }) {\n  if (detail != null) {\n    value = { video: detail, subtitles: null };\n  } else {\n    value = null;\n  }\n}\nfunction handle_error({ detail }) {\n  const [level, status] = detail.includes(\"Invalid file type\") ? [\"warning\", \"complete\"] : [\"error\", \"error\"];\n  loading_status = loading_status || {};\n  loading_status.status = status;\n  loading_status.message = detail;\n  gradio.dispatch(level, detail);\n}\n</script>\n\n{#if !interactive}\n\t<Block\n\t\t{visible}\n\t\tvariant={value === null && active_source === \"upload\" ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{height}\n\t\t{width}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t\tallow_overflow={false}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\n\t\t<StaticVideo\n\t\t\tvalue={_video}\n\t\t\tsubtitle={_subtitle}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{autoplay}\n\t\t\t{loop}\n\t\t\t{show_share_button}\n\t\t\t{show_download_button}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t\ton:end={() => gradio.dispatch(\"end\")}\n\t\t\ton:share={({ detail }) => gradio.dispatch(\"share\", detail)}\n\t\t\ton:error={({ detail }) => gradio.dispatch(\"error\", detail)}\n\t\t\ti18n={gradio.i18n}\n\t\t\tupload={gradio.client.upload}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\t{visible}\n\t\tvariant={value === null && active_source === \"upload\" ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{height}\n\t\t{width}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t\tallow_overflow={false}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\n\t\t<Video\n\t\t\tvalue={_video}\n\t\t\tsubtitle={_subtitle}\n\t\t\ton:change={handle_change}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:error={handle_error}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{sources}\n\t\t\t{active_source}\n\t\t\t{mirror_webcam}\n\t\t\t{include_audio}\n\t\t\t{autoplay}\n\t\t\t{root}\n\t\t\t{loop}\n\t\t\t{handle_reset_value}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t\ton:end={() => gradio.dispatch(\"end\")}\n\t\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\t\ton:stop_recording={() => gradio.dispatch(\"stop_recording\")}\n\t\t\ti18n={gradio.i18n}\n\t\t\tmax_file_size={gradio.max_file_size}\n\t\t\tupload={gradio.client.upload}\n\t\t\tstream_handler={gradio.client.stream}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"video\" />\n\t\t</Video>\n\t</Block>\n{/if}\n"],"names":["ctx","playable","insert","target","div","anchor","t0_value","prettyBytes","div0","div1","dirty","set_data","t0","t2","t2_value","previous_key","safe_not_equal","player_changes","Video","blocklabel_changes","value","$$props","subtitle","sources","label","show_download_button","show_label","mirror_webcam","include_audio","autoplay","root","i18n","active_source","handle_reset_value","max_file_size","upload","stream_handler","loop","dispatch","createEventDispatcher","handle_load","detail","$$invalidate","handle_clear","handle_change","video","handle_capture","dragging","error_handler_1","block_changes","uploadtext_changes","video_changes","staticvideo_changes","elem_id","elem_classes","visible","old_value","loading_status","height","width","container","scale","min_width","show_share_button","gradio","interactive","_video","_subtitle","initial_value","handle_error","level","status","clear_status_handler","share_handler","error_handler","clear_status_handler_1"],"mappings":"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"}