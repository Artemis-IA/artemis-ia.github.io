import{d as Ee,i as Le,e as Te,g as c,B as Ve,h as I,m as N,j as k,k as F,l as q,a9 as je,F as te,Y as ke,v as W,G as de,H as he,x as O,Q as Be,a2 as Ie,aa as Ne,a6 as qe,ab as De,r as ve,w as we,y as Fe,z as ze,E as be,C as He}from"../lite.js";import{B as Me}from"./BlockTitle-Csqgpqs_.js";import{E as Re}from"./Empty-DQJy8RTG.js";import{L as Ue}from"./LineChart-emwAuQEx.js";import{e as Ye}from"./vega-embed.module-BFkBSybu.js";import"./Info-B2sCcmSb.js";import"./dsv-DB8NKgIY.js";function ye(a){let e,t;const i=[{autoscroll:a[2].autoscroll},{i18n:a[2].i18n},a[10]];let n={};for(let s=0;s<i.length;s+=1)n=Ie(n,i[s]);return e=new Ne({props:n}),e.$on("clear_status",a[38]),{c(){I(e.$$.fragment)},m(s,u){N(e,s,u),t=!0},p(s,u){const g=u[0]&1028?qe(i,[u[0]&4&&{autoscroll:s[2].autoscroll},u[0]&4&&{i18n:s[2].i18n},u[0]&1024&&De(s[10])]):{};e.$set(g)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){F(e.$$.fragment,s),t=!1},d(s){q(e,s)}}}function Ge(a){let e;return{c(){e=ve(a[3])},m(t,i){W(t,e,i)},p(t,i){i[0]&8&&we(e,t[3])},d(t){t&&O(e)}}}function Qe(a){let e,t;return e=new Re({props:{unpadded_box:!0,$$slots:{default:[Je]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},m(i,n){N(e,i,n),t=!0},p(i,n){const s={};n[1]&4194304&&(s.$$scope={dirty:n,ctx:i}),e.$set(s)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function Xe(a){let e,t,i,n=a[1]&&xe(a);return{c(){e=Fe("div"),t=te(),n&&n.c(),i=ke(),ze(e,"class","svelte-10k9m4v")},m(s,u){W(s,e,u),a[39](e),W(s,t,u),n&&n.m(s,u),W(s,i,u)},p(s,u){s[1]?n?n.p(s,u):(n=xe(s),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},i:be,o:be,d(s){s&&(O(e),O(t),O(i)),a[39](null),n&&n.d(s)}}}function Je(a){let e,t;return e=new Ue({}),{c(){I(e.$$.fragment)},m(i,n){N(e,i,n),t=!0},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function xe(a){let e,t;return{c(){e=Fe("p"),t=ve(a[1]),ze(e,"class","caption svelte-10k9m4v")},m(i,n){W(i,e,n),He(e,t)},p(i,n){n[0]&2&&we(t,i[1])},d(i){i&&O(e)}}}function Ke(a){let e,t,i,n,s,u,g,r=a[10]&&ye(a);t=new Me({props:{show_label:a[7],info:void 0,$$slots:{default:[Ge]},$$scope:{ctx:a}}});const d=[Xe,Qe],_=[];function f(o,m){return o[0]&&o[13]?0:1}return n=f(a),s=_[n]=d[n](a),{c(){r&&r.c(),e=te(),I(t.$$.fragment),i=te(),s.c(),u=ke()},m(o,m){r&&r.m(o,m),W(o,e,m),N(t,o,m),W(o,i,m),_[n].m(o,m),W(o,u,m),g=!0},p(o,m){o[10]?r?(r.p(o,m),m[0]&1024&&k(r,1)):(r=ye(o),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(de(),F(r,1,1,()=>{r=null}),he());const z={};m[0]&128&&(z.show_label=o[7]),m[0]&8|m[1]&4194304&&(z.$$scope={dirty:m,ctx:o}),t.$set(z);let A=n;n=f(o),n===A?_[n].p(o,m):(de(),F(_[A],1,1,()=>{_[A]=null}),he(),s=_[n],s?s.p(o,m):(s=_[n]=d[n](o),s.c()),k(s,1),s.m(u.parentNode,u))},i(o){g||(k(r),k(t.$$.fragment,o),k(s),g=!0)},o(o){F(r),F(t.$$.fragment,o),F(s),g=!1},d(o){o&&(O(e),O(i),O(u)),r&&r.d(o),q(t,o),_[n].d(o)}}}function Ze(a){let e,t;return e=new Ve({props:{visible:a[6],elem_id:a[4],elem_classes:a[5],scale:a[8],min_width:a[9],allow_overflow:!1,padding:!0,height:a[11],$$slots:{default:[Ke]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},m(i,n){N(e,i,n),t=!0},p(i,n){const s={};n[0]&64&&(s.visible=i[6]),n[0]&16&&(s.elem_id=i[4]),n[0]&32&&(s.elem_classes=i[5]),n[0]&256&&(s.scale=i[8]),n[0]&512&&(s.min_width=i[9]),n[0]&2048&&(s.height=i[11]),n[0]&5263|n[1]&4194304&&(s.$$scope={dirty:n,ctx:i}),e.$set(s)},i(i){t||(k(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){q(e,i)}}}function pe(a,e,t){let i,n,s,u,g,{value:r}=e,{x:d}=e,{y:_}=e,{color:f=null}=e,{title:o=null}=e,{x_title:m=null}=e,{y_title:z=null}=e,{color_title:A=null}=e,{x_bin:v=null}=e,{y_aggregate:j=void 0}=e,{color_map:D=null}=e,{x_lim:L=null}=e,{y_lim:H=null}=e,{x_label_angle:M=null}=e,{y_label_angle:R=null}=e,{caption:le=null}=e,{sort:J=null}=e;function Ce(l){if(l==="x")return"ascending";if(l==="-x")return"descending";if(l==="y")return{field:_,order:"ascending"};if(l==="-y")return{field:_,order:"descending"};if(l===null)return;if(Array.isArray(l))return l}let{_selectable:U=!1}=e,{target:Y}=e,G,{gradio:T}=e,C,K=!1;const Pe={s:1,m:60,h:60*60,d:24*60*60};let B,V;function Se(l){let h=l.columns.indexOf(d),S=l.columns.indexOf(_),x=f?l.columns.indexOf(f):null;return l.data.map(w=>{const b={[d]:w[h],[_]:w[S]};return f&&x!==null&&(b[f]=w[x]),b})}const ie=typeof window<"u";let y,P,Z=!1,ne,Q;function se(){if(P&&P.finalize(),!r||!y)return;ne=y.offsetWidth;const l=We();l&&(Q=new ResizeObserver(h=>{!h[0].target||!(h[0].target instanceof HTMLElement)||(ne===0&&y.offsetWidth!==0&&r.datatypes[d]==="nominal"?se():P.signal("width",h[0].target.offsetWidth).run())}),Ye(y,l,{actions:!1}).then(function(h){P=h.view,Q.observe(y);var S;P.addEventListener("dblclick",()=>{T.dispatch("double_click")}),y.addEventListener("mousedown",function(x){x.detail>1&&x.preventDefault()},!1),U&&P.addSignalListener("brush",function(x,w){if(Object.keys(w).length===0)return;clearTimeout(S);let b=w[Object.keys(w)[0]];s&&(b=[b[0]/1e3,b[1]/1e3]),K?X=()=>{T.dispatch("select",{value:b,index:b,selected:!0})}:S=setTimeout(function(){T.dispatch("select",{value:b,index:b,selected:!0})},250)})}))}let X=null;je(()=>(t(35,Z=!0),y.addEventListener("mousedown",()=>{K=!0}),y.addEventListener("mouseup",()=>{K=!1,X&&(X(),X=null)}),()=>{t(35,Z=!1),P&&P.finalize(),Q&&Q.disconnect()}));function We(){if(!r||!g)return null;let l=g.getPropertyValue("--color-accent"),h=g.getPropertyValue("--body-text-color"),S=g.getPropertyValue("--border-color-primary"),x=g.fontFamily,w=g.getPropertyValue("--block-title-text-weight");const b=E=>E.endsWith("px")?parseFloat(E.slice(0,-2)):12;let ge=b(g.getPropertyValue("--text-md")),$=b(g.getPropertyValue("--text-sm"));return{$schema:"https://vega.github.io/schema/vega-lite/v5.17.0.json",background:"transparent",config:{autosize:{type:"fit",contains:"padding"},axis:{labelFont:x,labelColor:h,titleFont:x,titleColor:h,titlePadding:8,tickColor:S,labelFontSize:$,gridColor:S,titleFontWeight:"normal",titleFontSize:$,labelFontWeight:"normal",domain:!1,labelAngle:0},legend:{labelColor:h,labelFont:x,titleColor:h,titleFont:x,titleFontWeight:"normal",titleFontSize:$,labelFontWeight:"normal",offset:2},title:{color:h,font:x,fontSize:ge,fontWeight:w,anchor:"middle"},view:{stroke:S},mark:{stroke:r.mark!=="bar"?l:void 0,fill:r.mark==="bar"?l:void 0,cursor:"crosshair"}},data:{name:"data"},datasets:{data:G},layer:["plot",...r.mark==="line"?["hover"]:[]].map(E=>({encoding:{size:r.mark==="line"?E=="plot"?{condition:{empty:!1,param:"hoverPlot",value:3},value:2}:{condition:{empty:!1,param:"hover",value:100},value:0}:void 0,opacity:E==="plot"?void 0:{condition:{empty:!1,param:"hover",value:1},value:0},x:{axis:M?{labelAngle:M}:{},field:d,title:m||d,type:r.datatypes[d],scale:u?{domain:u}:void 0,bin:C?{step:C}:void 0,sort:n},y:{axis:R?{labelAngle:R}:{},field:_,title:z||_,type:r.datatypes[_],scale:H?{domain:H}:void 0,aggregate:V?B:void 0},color:f?{field:f,legend:{orient:"bottom",title:A},scale:r.datatypes[f]==="nominal"?{domain:i,range:D?i.map(ee=>D[ee]):void 0}:{range:[100,200,300,400,500,600,700,800,900].map(ee=>g.getPropertyValue("--primary-"+ee)),interpolate:"hsl"},type:r.datatypes[f]}:void 0,tooltip:[{field:_,type:r.datatypes[_],aggregate:V?B:void 0,title:z||_},{field:d,type:r.datatypes[d],title:m||d,format:s?"%Y-%m-%d %H:%M:%S":void 0,bin:C?{step:C}:void 0},...f?[{field:f,type:r.datatypes[f]}]:[]]},strokeDash:{},mark:{clip:!0,type:E==="hover"?"point":r.mark},name:E})),params:[...r.mark==="line"?[{name:"hoverPlot",select:{clear:"mouseout",fields:f?[f]:[],nearest:!0,on:"mouseover",type:"point"},views:["hover"]},{name:"hover",select:{clear:"mouseout",nearest:!0,on:"mouseover",type:"point"},views:["hover"]}]:[],...U?[{name:"brush",select:{encodings:["x"],mark:{fill:"gray",fillOpacity:.3,stroke:"none"},type:"interval"},views:["plot"]}]:[]],width:y.offsetWidth,title:o||void 0}}let{label:ae="Textbox"}=e,{elem_id:re=""}=e,{elem_classes:oe=[]}=e,{visible:ce=!0}=e,{show_label:ue}=e,{scale:_e=null}=e,{min_width:fe=void 0}=e,{loading_status:p=void 0}=e,{height:me=void 0}=e;const Oe=()=>T.dispatch("clear_status",p);function Ae(l){Be[l?"unshift":"push"](()=>{y=l,t(12,y)})}return a.$$set=l=>{"value"in l&&t(0,r=l.value),"x"in l&&t(14,d=l.x),"y"in l&&t(15,_=l.y),"color"in l&&t(16,f=l.color),"title"in l&&t(17,o=l.title),"x_title"in l&&t(18,m=l.x_title),"y_title"in l&&t(19,z=l.y_title),"color_title"in l&&t(20,A=l.color_title),"x_bin"in l&&t(21,v=l.x_bin),"y_aggregate"in l&&t(22,j=l.y_aggregate),"color_map"in l&&t(23,D=l.color_map),"x_lim"in l&&t(24,L=l.x_lim),"y_lim"in l&&t(25,H=l.y_lim),"x_label_angle"in l&&t(26,M=l.x_label_angle),"y_label_angle"in l&&t(27,R=l.y_label_angle),"caption"in l&&t(1,le=l.caption),"sort"in l&&t(28,J=l.sort),"_selectable"in l&&t(29,U=l._selectable),"target"in l&&t(30,Y=l.target),"gradio"in l&&t(2,T=l.gradio),"label"in l&&t(3,ae=l.label),"elem_id"in l&&t(4,re=l.elem_id),"elem_classes"in l&&t(5,oe=l.elem_classes),"visible"in l&&t(6,ce=l.visible),"show_label"in l&&t(7,ue=l.show_label),"scale"in l&&t(8,_e=l.scale),"min_width"in l&&t(9,fe=l.min_width),"loading_status"in l&&t(10,p=l.loading_status),"height"in l&&t(11,me=l.height)},a.$$.update=()=>{a.$$.dirty[0]&1&&t(31,G=r?Se(r):[]),a.$$.dirty[0]&65537|a.$$.dirty[1]&1&&(i=f&&r&&r.datatypes[f]==="nominal"?Array.from(new Set(G.map(l=>l[f]))):[]),a.$$.dirty[0]&268435456&&(n=Ce(J)),a.$$.dirty[0]&16385&&t(36,s=r&&r.datatypes[d]==="temporal"),a.$$.dirty[0]&16777216|a.$$.dirty[1]&32&&(u=L&&s?[L[0]*1e3,L[1]*1e3]:L),a.$$.dirty[0]&2097152&&t(32,C=v?typeof v=="string"?1e3*parseInt(v.substring(0,v.length-1))*Pe[v[v.length-1]]:v:void 0),a.$$.dirty[0]&4210689|a.$$.dirty[1]&10&&r&&(r.mark==="point"?(t(34,V=C!==void 0),t(33,B=j||V?"sum":void 0)):(t(34,V=C!==void 0||r.datatypes[d]==="nominal"),t(33,B=j||"sum"))),a.$$.dirty[0]&1073741824&&t(37,g=Y&&ie?window.getComputedStyle(Y):null),a.$$.dirty[0]&331337731|a.$$.dirty[1]&84&&g&&requestAnimationFrame(se)},[r,le,T,ae,re,oe,ce,ue,_e,fe,p,me,y,ie,d,_,f,o,m,z,A,v,j,D,L,H,M,R,J,U,Y,G,C,B,V,Z,s,g,Oe,Ae]}class at extends Ee{constructor(e){super(),Le(this,e,pe,Ze,Te,{value:0,x:14,y:15,color:16,title:17,x_title:18,y_title:19,color_title:20,x_bin:21,y_aggregate:22,color_map:23,x_lim:24,y_lim:25,x_label_angle:26,y_label_angle:27,caption:1,sort:28,_selectable:29,target:30,gradio:2,label:3,elem_id:4,elem_classes:5,visible:6,show_label:7,scale:8,min_width:9,loading_status:10,height:11},null,[-1,-1])}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),c()}get x(){return this.$$.ctx[14]}set x(e){this.$$set({x:e}),c()}get y(){return this.$$.ctx[15]}set y(e){this.$$set({y:e}),c()}get color(){return this.$$.ctx[16]}set color(e){this.$$set({color:e}),c()}get title(){return this.$$.ctx[17]}set title(e){this.$$set({title:e}),c()}get x_title(){return this.$$.ctx[18]}set x_title(e){this.$$set({x_title:e}),c()}get y_title(){return this.$$.ctx[19]}set y_title(e){this.$$set({y_title:e}),c()}get color_title(){return this.$$.ctx[20]}set color_title(e){this.$$set({color_title:e}),c()}get x_bin(){return this.$$.ctx[21]}set x_bin(e){this.$$set({x_bin:e}),c()}get y_aggregate(){return this.$$.ctx[22]}set y_aggregate(e){this.$$set({y_aggregate:e}),c()}get color_map(){return this.$$.ctx[23]}set color_map(e){this.$$set({color_map:e}),c()}get x_lim(){return this.$$.ctx[24]}set x_lim(e){this.$$set({x_lim:e}),c()}get y_lim(){return this.$$.ctx[25]}set y_lim(e){this.$$set({y_lim:e}),c()}get x_label_angle(){return this.$$.ctx[26]}set x_label_angle(e){this.$$set({x_label_angle:e}),c()}get y_label_angle(){return this.$$.ctx[27]}set y_label_angle(e){this.$$set({y_label_angle:e}),c()}get caption(){return this.$$.ctx[1]}set caption(e){this.$$set({caption:e}),c()}get sort(){return this.$$.ctx[28]}set sort(e){this.$$set({sort:e}),c()}get _selectable(){return this.$$.ctx[29]}set _selectable(e){this.$$set({_selectable:e}),c()}get target(){return this.$$.ctx[30]}set target(e){this.$$set({target:e}),c()}get gradio(){return this.$$.ctx[2]}set gradio(e){this.$$set({gradio:e}),c()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),c()}get elem_id(){return this.$$.ctx[4]}set elem_id(e){this.$$set({elem_id:e}),c()}get elem_classes(){return this.$$.ctx[5]}set elem_classes(e){this.$$set({elem_classes:e}),c()}get visible(){return this.$$.ctx[6]}set visible(e){this.$$set({visible:e}),c()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),c()}get scale(){return this.$$.ctx[8]}set scale(e){this.$$set({scale:e}),c()}get min_width(){return this.$$.ctx[9]}set min_width(e){this.$$set({min_width:e}),c()}get loading_status(){return this.$$.ctx[10]}set loading_status(e){this.$$set({loading_status:e}),c()}get height(){return this.$$.ctx[11]}set height(e){this.$$set({height:e}),c()}}export{at as default};
//# sourceMappingURL=Index-CW21NZqx.js.map
