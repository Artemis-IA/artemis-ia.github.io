import{d as X,i as Y,e as Z,$ as K,z as s,v as M,C,E as N,x as W,y as R,h as A,F as Q,r as he,aL as ne,m as H,V as $,j as h,k as w,l as O,J as ie,g as D,A as J,G as V,H as G,a9 as Ee,Q as te,Y as re,Z as Re,_ as qe,aQ as Ue,U as je,X as Se,aP as Te,aI as pe,aK as Le,R as de,w as We,ag as Ne,aR as Ae,ac as me,ad as ge,M as He,O as _e,n as Oe,u as Pe,o as Fe,q as Qe}from"../lite.js";import{B as Ve}from"./BlockLabel-BXhHlgLF.js";import{I as Ge}from"./Image-qZS1Nt0l.js";import{W as Je,S as Ke}from"./SelectSource-DZEGyp3d.js";import{g as Xe}from"./utils-Gtzs_Zla.js";import{D as Be}from"./DropdownArrow-CbmPmb-H.js";import{f as Ye}from"./Button-DElDztjl.js";import{U as Ze}from"./Upload-BQQpOvI3.js";/* empty css                                                   */import{I as $e}from"./Image-eRhrELVs.js";function xe(i){let e,t,l;return{c(){e=K("svg"),t=K("path"),l=K("circle"),s(t,"d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"),s(l,"cx","12"),s(l,"cy","13"),s(l,"r","4"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","100%"),s(e,"height","100%"),s(e,"viewBox","0 0 24 24"),s(e,"fill","none"),s(e,"stroke","currentColor"),s(e,"stroke-width","1.5"),s(e,"stroke-linecap","round"),s(e,"stroke-linejoin","round"),s(e,"class","feather feather-camera")},m(n,r){M(n,e,r),C(e,t),C(e,l)},p:N,i:N,o:N,d(n){n&&W(e)}}}class et extends X{constructor(e){super(),Y(this,e,null,xe,Z,{})}}function tt(i){let e,t;return{c(){e=K("svg"),t=K("circle"),s(t,"cx","12"),s(t,"cy","12"),s(t,"r","10"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","100%"),s(e,"height","100%"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke-linecap","round"),s(e,"stroke-linejoin","round"),s(e,"class","feather feather-circle")},m(l,n){M(l,e,n),C(e,t)},p:N,i:N,o:N,d(l){l&&W(e)}}}class lt extends X{constructor(e){super(),Y(this,e,null,tt,Z,{})}}function nt(i){let e,t;return{c(){e=K("svg"),t=K("rect"),s(t,"x","3"),s(t,"y","3"),s(t,"width","18"),s(t,"height","18"),s(t,"rx","2"),s(t,"ry","2"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"width","100%"),s(e,"height","100%"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke-linecap","round"),s(e,"stroke-linejoin","round"),s(e,"class","feather feather-square")},m(l,n){M(l,e,n),C(e,t)},p:N,i:N,o:N,d(l){l&&W(e)}}}class it extends X{constructor(e){super(),Y(this,e,null,nt,Z,{})}}function rt(i){let e,t,l,n,r,a="Click to Access Webcam",d,u,b,o;return n=new Je({}),{c(){e=R("button"),t=R("div"),l=R("span"),A(n.$$.fragment),r=Q(),d=he(a),s(l,"class","icon-wrap svelte-qbrfs"),s(t,"class","wrap svelte-qbrfs"),s(e,"class","svelte-qbrfs"),ne(e,"height","100%")},m(_,y){M(_,e,y),C(e,t),C(t,l),H(n,l,null),C(t,r),C(t,d),u=!0,b||(o=$(e,"click",i[1]),b=!0)},p:N,i(_){u||(h(n.$$.fragment,_),u=!0)},o(_){w(n.$$.fragment,_),u=!1},d(_){_&&W(e),O(n),b=!1,o()}}}function at(i){const e=ie();return[e,()=>e("click")]}class st extends X{constructor(e){super(),Y(this,e,at,rt,Z,{})}}function ot(){return navigator.mediaDevices.enumerateDevices()}function ct(i,e){e.srcObject=i,e.muted=!0,e.play()}async function ve(i,e,t){const l={width:{ideal:1920},height:{ideal:1440}},n={video:t?{deviceId:{exact:t},...l}:l,audio:i};return navigator.mediaDevices.getUserMedia(n).then(r=>(ct(r,e),r))}function ut(i){return i.filter(t=>t.kind==="videoinput")}function we(i,e,t){const l=i.slice();return l[31]=e[t],l}function ft(i){let e,t,l,n,r,a,d,u,b,o,_;const y=[mt,dt],E=[];function T(v,z){return v[1]==="video"||v[0]?0:1}l=T(i),n=E[l]=y[l](i);let m=!i[8]&&ke(i),I=i[10]&&i[7]&&Ie(i);return{c(){e=R("div"),t=R("button"),n.c(),a=Q(),m&&m.c(),d=Q(),I&&I.c(),u=re(),s(t,"aria-label",r=i[1]==="image"?"capture photo":"start recording"),s(t,"class","svelte-1aa1mud"),s(e,"class","button-wrap svelte-1aa1mud")},m(v,z){M(v,e,z),C(e,t),E[l].m(t,null),C(e,a),m&&m.m(e,null),M(v,d,z),I&&I.m(v,z),M(v,u,z),b=!0,o||(_=$(t,"click",i[13]),o=!0)},p(v,z){let B=l;l=T(v),l===B?E[l].p(v,z):(V(),w(E[B],1,1,()=>{E[B]=null}),G(),n=E[l],n?n.p(v,z):(n=E[l]=y[l](v),n.c()),h(n,1),n.m(t,null)),(!b||z[0]&2&&r!==(r=v[1]==="image"?"capture photo":"start recording"))&&s(t,"aria-label",r),v[8]?m&&(V(),w(m,1,1,()=>{m=null}),G()):m?(m.p(v,z),z[0]&256&&h(m,1)):(m=ke(v),m.c(),h(m,1),m.m(e,null)),v[10]&&v[7]?I?(I.p(v,z),z[0]&1152&&h(I,1)):(I=Ie(v),I.c(),h(I,1),I.m(u.parentNode,u)):I&&(V(),w(I,1,1,()=>{I=null}),G())},i(v){b||(h(n),h(m),h(I),b=!0)},o(v){w(n),w(m),w(I),b=!1},d(v){v&&(W(e),W(d),W(u)),E[l].d(),m&&m.d(),I&&I.d(v),o=!1,_()}}}function _t(i){let e,t,l,n;return t=new st({}),t.$on("click",i[20]),{c(){e=R("div"),A(t.$$.fragment),s(e,"title","grant webcam access"),ne(e,"height","100%")},m(r,a){M(r,e,a),H(t,e,null),n=!0},p:N,i(r){n||(h(t.$$.fragment,r),r&&(l||Re(()=>{l=qe(e,Ye,{delay:100,duration:200}),l.start()})),n=!0)},o(r){w(t.$$.fragment,r),n=!1},d(r){r&&W(e),O(t)}}}function dt(i){let e,t,l;return t=new et({}),{c(){e=R("div"),A(t.$$.fragment),s(e,"class","icon svelte-1aa1mud"),s(e,"title","capture photo")},m(n,r){M(n,e,r),H(t,e,null),l=!0},p:N,i(n){l||(h(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&W(e),O(t)}}}function mt(i){let e,t,l,n;const r=[ht,gt],a=[];function d(u,b){return u[8]?0:1}return e=d(i),t=a[e]=r[e](i),{c(){t.c(),l=re()},m(u,b){a[e].m(u,b),M(u,l,b),n=!0},p(u,b){let o=e;e=d(u),e!==o&&(V(),w(a[o],1,1,()=>{a[o]=null}),G(),t=a[e],t||(t=a[e]=r[e](u),t.c()),h(t,1),t.m(l.parentNode,l))},i(u){n||(h(t),n=!0)},o(u){w(t),n=!1},d(u){u&&W(l),a[e].d(u)}}}function gt(i){let e,t,l;return t=new lt({}),{c(){e=R("div"),A(t.$$.fragment),s(e,"class","icon red svelte-1aa1mud"),s(e,"title","start recording")},m(n,r){M(n,e,r),H(t,e,null),l=!0},i(n){l||(h(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&W(e),O(t)}}}function ht(i){let e,t,l;return t=new it({}),{c(){e=R("div"),A(t.$$.fragment),s(e,"class","icon red svelte-1aa1mud"),s(e,"title","stop recording")},m(n,r){M(n,e,r),H(t,e,null),l=!0},i(n){l||(h(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&W(e),O(t)}}}function ke(i){let e,t,l,n,r;return t=new Be({}),{c(){e=R("button"),A(t.$$.fragment),s(e,"class","icon svelte-1aa1mud"),s(e,"aria-label","select input source")},m(a,d){M(a,e,d),H(t,e,null),l=!0,n||(r=$(e,"click",i[21]),n=!0)},p:N,i(a){l||(h(t.$$.fragment,a),l=!0)},o(a){w(t.$$.fragment,a),l=!1},d(a){a&&W(e),O(t),n=!1,r()}}}function Ie(i){let e,t,l,n,r,a,d;l=new Be({});function u(_,y){return _[6].length===0?pt:bt}let b=u(i),o=b(i);return{c(){e=R("select"),t=R("button"),A(l.$$.fragment),n=Q(),o.c(),s(t,"class","inset-icon svelte-1aa1mud"),s(e,"class","select-wrap svelte-1aa1mud"),s(e,"aria-label","select source")},m(_,y){M(_,e,y),C(e,t),H(l,t,null),C(t,n),o.m(e,null),r=!0,a||(d=[$(t,"click",Ue(i[22])),je(be.call(null,e,i[14])),$(e,"change",i[11])],a=!0)},p(_,y){b===(b=u(_))&&o?o.p(_,y):(o.d(1),o=b(_),o&&(o.c(),o.m(e,null)))},i(_){r||(h(l.$$.fragment,_),r=!0)},o(_){w(l.$$.fragment,_),r=!1},d(_){_&&W(e),O(l),o.d(),a=!1,Se(d)}}}function bt(i){let e,t=pe(i[6]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ye(we(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=re()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);M(n,e,r)},p(n,r){if(r[0]&192){t=pe(n[6]);let a;for(a=0;a<t.length;a+=1){const d=we(n,t,a);l[a]?l[a].p(d,r):(l[a]=ye(d),l[a].c(),l[a].m(e.parentNode,e))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&W(e),Le(l,n)}}}function pt(i){let e,t=i[3]("common.no_devices")+"",l;return{c(){e=R("option"),l=he(t),e.__value="",de(e,e.__value),s(e,"class","svelte-1aa1mud")},m(n,r){M(n,e,r),C(e,l)},p(n,r){r[0]&8&&t!==(t=n[3]("common.no_devices")+"")&&We(l,t)},d(n){n&&W(e)}}}function ye(i){let e,t=i[31].label+"",l,n,r,a;return{c(){e=R("option"),l=he(t),n=Q(),e.__value=r=i[31].deviceId,de(e,e.__value),e.selected=a=i[7].deviceId===i[31].deviceId,s(e,"class","svelte-1aa1mud")},m(d,u){M(d,e,u),C(e,l),C(e,n)},p(d,u){u[0]&64&&t!==(t=d[31].label+"")&&We(l,t),u[0]&64&&r!==(r=d[31].deviceId)&&(e.__value=r,de(e,e.__value)),u[0]&192&&a!==(a=d[7].deviceId===d[31].deviceId)&&(e.selected=a)},d(d){d&&W(e)}}}function vt(i){let e,t,l,n,r,a;const d=[_t,ft],u=[];function b(o,_){return o[9]?1:0}return n=b(i),r=u[n]=d[n](i),{c(){e=R("div"),t=R("video"),l=Q(),r.c(),s(t,"class","svelte-1aa1mud"),J(t,"flip",i[2]),J(t,"hide",!i[9]),s(e,"class","wrap svelte-1aa1mud")},m(o,_){M(o,e,_),C(e,t),i[19](t),C(e,l),u[n].m(e,null),a=!0},p(o,_){(!a||_[0]&4)&&J(t,"flip",o[2]),(!a||_[0]&512)&&J(t,"hide",!o[9]);let y=n;n=b(o),n===y?u[n].p(o,_):(V(),w(u[y],1,1,()=>{u[y]=null}),G(),r=u[n],r?r.p(o,_):(r=u[n]=d[n](o),r.c()),h(r,1),r.m(e,null))},i(o){a||(h(r),a=!0)},o(o){w(r),a=!1},d(o){o&&W(e),i[19](null),u[n].d()}}}function be(i,e){const t=l=>{i&&!i.contains(l.target)&&!l.defaultPrevented&&e(l)};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function wt(i,e,t){let l,n=[],r=null,a,{streaming:d=!1}=e,{pending:u=!1}=e,{root:b=""}=e,{mode:o="image"}=e,{mirror_webcam:_}=e,{include_audio:y}=e,{i18n:E}=e,{upload:T}=e;const m=ie();Ee(()=>a=document.createElement("canvas"));const I=async g=>{const F=g.target.value;await ve(y,l,F).then(async x=>{j=x,t(7,r=n.find(ee=>ee.deviceId===F)||null),t(10,P=!1)})};async function v(){try{ve(y,l).then(async g=>{t(9,S=!0),t(6,n=await ot()),j=g}).then(()=>ut(n)).then(g=>{t(6,n=g);const L=j.getTracks().map(F=>F.getSettings()?.deviceId)[0];t(7,r=L&&g.find(F=>F.deviceId===L)||n[0])}),(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)&&m("error",E("image.no_webcam_support"))}catch(g){if(g instanceof DOMException&&g.name=="NotAllowedError")m("error",E("image.allow_webcam_access"));else throw g}}function z(){var g=a.getContext("2d");(!d||d&&B)&&l.videoWidth&&l.videoHeight&&(a.width=l.videoWidth,a.height=l.videoHeight,g.drawImage(l,0,0,l.videoWidth,l.videoHeight),_&&(g.scale(-1,1),g.drawImage(l,-l.videoWidth,0)),a.toBlob(L=>{m(d?"stream":"capture",L)},"image/png",.8))}let B=!1,U=[],j,k,f;function p(){if(B){f.stop();let g=new Blob(U,{type:k}),L=new FileReader;L.onload=async function(F){if(F.target){let x=new File([g],"sample."+k.substring(6));const ee=await Te([x]);let fe=(await T(ee,b))?.filter(Boolean)[0];m("capture",fe),m("stop_recording")}},L.readAsDataURL(g)}else{m("start_recording"),U=[];let g=["video/webm","video/mp4"];for(let L of g)if(MediaRecorder.isTypeSupported(L)){k=L;break}if(k===null){console.error("No supported MediaRecorder mimeType");return}f=new MediaRecorder(j,{mimeType:k}),f.addEventListener("dataavailable",function(L){U.push(L.data)}),f.start(200)}t(8,B=!B)}let S=!1;function q(){o==="image"&&d&&t(8,B=!B),o==="image"?z():p(),!B&&j&&(j.getTracks().forEach(g=>g.stop()),t(5,l.srcObject=null,l),t(9,S=!1))}d&&o==="image"&&window.setInterval(()=>{l&&!u&&z()},500);let P=!1;function ae(g){g.preventDefault(),g.stopPropagation(),t(10,P=!1)}function se(g){te[g?"unshift":"push"](()=>{l=g,t(5,l)})}const oe=async()=>v(),ce=()=>t(10,P=!0),ue=()=>t(10,P=!1);return i.$$set=g=>{"streaming"in g&&t(0,d=g.streaming),"pending"in g&&t(15,u=g.pending),"root"in g&&t(16,b=g.root),"mode"in g&&t(1,o=g.mode),"mirror_webcam"in g&&t(2,_=g.mirror_webcam),"include_audio"in g&&t(17,y=g.include_audio),"i18n"in g&&t(3,E=g.i18n),"upload"in g&&t(18,T=g.upload)},[d,o,_,E,be,l,n,r,B,S,P,I,v,q,ae,u,b,y,T,se,oe,ce,ue]}class kt extends X{constructor(e){super(),Y(this,e,wt,vt,Z,{streaming:0,pending:15,root:16,mode:1,mirror_webcam:2,include_audio:17,i18n:3,upload:18,click_outside:4},null,[-1,-1])}get streaming(){return this.$$.ctx[0]}set streaming(e){this.$$set({streaming:e}),D()}get pending(){return this.$$.ctx[15]}set pending(e){this.$$set({pending:e}),D()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),D()}get mode(){return this.$$.ctx[1]}set mode(e){this.$$set({mode:e}),D()}get mirror_webcam(){return this.$$.ctx[2]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),D()}get include_audio(){return this.$$.ctx[17]}set include_audio(e){this.$$set({include_audio:e}),D()}get i18n(){return this.$$.ctx[3]}set i18n(e){this.$$set({i18n:e}),D()}get upload(){return this.$$.ctx[18]}set upload(e){this.$$set({upload:e}),D()}get click_outside(){return be}}const It=kt;function yt(i){let e,t,l;return t=new Ne({props:{Icon:Ae,label:"Remove Image"}}),t.$on("click",i[1]),{c(){e=R("div"),A(t.$$.fragment),s(e,"class","svelte-s6ybro")},m(n,r){M(n,e,r),H(t,e,null),l=!0},p:N,i(n){l||(h(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&W(e),O(t)}}}function zt(i){const e=ie();return[e,l=>{e("remove_image"),l.stopPropagation()}]}class Dt extends X{constructor(e){super(),Y(this,e,zt,yt,Z,{})}}function ze(i){let e,t;return e=new Dt({}),e.$on("remove_image",i[25]),{c(){A(e.$$.fragment)},m(l,n){H(e,l,n),t=!0},p:N,i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function De(i){let e;const t=i[24].default,l=Oe(t,i,i[36],null);return{c(){l&&l.c()},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r[1]&32)&&Pe(l,t,n,n[36],e?Qe(t,n[36],r,null):Fe(n[36]),null)},i(n){e||(h(l,n),e=!0)},o(n){w(l,n),e=!1},d(n){l&&l.d(n)}}}function Mt(i){let e,t,l=i[2]===null&&De(i);return{c(){l&&l.c(),e=re()},m(n,r){l&&l.m(n,r),M(n,e,r),t=!0},p(n,r){n[2]===null?l?(l.p(n,r),r[0]&4&&h(l,1)):(l=De(n),l.c(),h(l,1),l.m(e.parentNode,e)):l&&(V(),w(l,1,1,()=>{l=null}),G())},i(n){t||(h(l),t=!0)},o(n){w(l),t=!1},d(n){n&&W(e),l&&l.d(n)}}}function Wt(i){let e,t,l,n,r;return t=new $e({props:{src:i[2].url,alt:i[2].alt_text}}),{c(){e=R("div"),A(t.$$.fragment),s(e,"class","image-frame svelte-1ti4ehe"),J(e,"selectable",i[8])},m(a,d){M(a,e,d),H(t,e,null),l=!0,n||(r=$(e,"click",i[21]),n=!0)},p(a,d){const u={};d[0]&4&&(u.src=a[2].url),d[0]&4&&(u.alt=a[2].alt_text),t.$set(u),(!l||d[0]&256)&&J(e,"selectable",a[8])},i(a){l||(h(t.$$.fragment,a),l=!0)},o(a){w(t.$$.fragment,a),l=!1},d(a){a&&W(e),O(t),n=!1,r()}}}function Bt(i){let e,t;return e=new It({props:{root:i[9],mirror_webcam:i[7],streaming:i[6],mode:"image",include_audio:!1,i18n:i[10],upload:i[12]}}),e.$on("capture",i[30]),e.$on("stream",i[31]),e.$on("error",i[32]),e.$on("drag",i[33]),e.$on("upload",i[34]),{c(){A(e.$$.fragment)},m(l,n){H(e,l,n),t=!0},p(l,n){const r={};n[0]&512&&(r.root=l[9]),n[0]&128&&(r.mirror_webcam=l[7]),n[0]&64&&(r.streaming=l[6]),n[0]&1024&&(r.i18n=l[10]),n[0]&4096&&(r.upload=l[12]),e.$set(r)},i(l){t||(h(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Me(i){let e,t,l;function n(a){i[35](a)}let r={sources:i[5],handle_clear:i[18],handle_select:i[22]};return i[0]!==void 0&&(r.active_source=i[0]),e=new Ke({props:r}),te.push(()=>me(e,"active_source",n)),{c(){A(e.$$.fragment)},m(a,d){H(e,a,d),l=!0},p(a,d){const u={};d[0]&32&&(u.sources=a[5]),!t&&d[0]&1&&(t=!0,u.active_source=a[0],ge(()=>t=!1)),e.$set(u)},i(a){l||(h(e.$$.fragment,a),l=!0)},o(a){w(e.$$.fragment,a),l=!1},d(a){O(e,a)}}}function Ct(i){let e,t,l,n,r,a,d,u,b,o,_,y,E=i[5].length>1||i[5].includes("clipboard"),T;e=new Ve({props:{show_label:i[4],Icon:Ge,label:i[3]||"Image"}});let m=i[2]?.url&&!i[15]&&ze(i);function I(f){i[27](f)}function v(f){i[28](f)}let z={hidden:i[2]!==null||i[0]==="webcam",filetype:i[0]==="clipboard"?"clipboard":"image/*",root:i[9],max_file_size:i[11],disable_click:!i[5].includes("upload")||i[2]!==null,upload:i[12],stream_handler:i[13],$$slots:{default:[Mt]},$$scope:{ctx:i}};i[14]!==void 0&&(z.uploading=i[14]),i[1]!==void 0&&(z.dragging=i[1]),a=new Ze({props:z}),i[26](a),te.push(()=>me(a,"uploading",I)),te.push(()=>me(a,"dragging",v)),a.$on("load",i[17]),a.$on("error",i[29]);const B=[Bt,Wt],U=[];function j(f,p){return f[0]==="webcam"&&(f[6]||!f[6]&&!f[2])?0:f[2]!==null&&!f[6]?1:-1}~(o=j(i))&&(_=U[o]=B[o](i));let k=E&&Me(i);return{c(){A(e.$$.fragment),t=Q(),l=R("div"),m&&m.c(),n=Q(),r=R("div"),A(a.$$.fragment),b=Q(),_&&_.c(),y=Q(),k&&k.c(),s(r,"class","upload-container svelte-1ti4ehe"),J(r,"reduced-height",i[5].length>1),ne(r,"width",i[2]?"auto":"100%"),s(l,"data-testid","image"),s(l,"class","image-container svelte-1ti4ehe")},m(f,p){H(e,f,p),M(f,t,p),M(f,l,p),m&&m.m(l,null),C(l,n),C(l,r),H(a,r,null),C(r,b),~o&&U[o].m(r,null),C(l,y),k&&k.m(l,null),T=!0},p(f,p){const S={};p[0]&16&&(S.show_label=f[4]),p[0]&8&&(S.label=f[3]||"Image"),e.$set(S),f[2]?.url&&!f[15]?m?(m.p(f,p),p[0]&32772&&h(m,1)):(m=ze(f),m.c(),h(m,1),m.m(l,n)):m&&(V(),w(m,1,1,()=>{m=null}),G());const q={};p[0]&5&&(q.hidden=f[2]!==null||f[0]==="webcam"),p[0]&1&&(q.filetype=f[0]==="clipboard"?"clipboard":"image/*"),p[0]&512&&(q.root=f[9]),p[0]&2048&&(q.max_file_size=f[11]),p[0]&36&&(q.disable_click=!f[5].includes("upload")||f[2]!==null),p[0]&4096&&(q.upload=f[12]),p[0]&8192&&(q.stream_handler=f[13]),p[0]&4|p[1]&32&&(q.$$scope={dirty:p,ctx:f}),!d&&p[0]&16384&&(d=!0,q.uploading=f[14],ge(()=>d=!1)),!u&&p[0]&2&&(u=!0,q.dragging=f[1],ge(()=>u=!1)),a.$set(q);let P=o;o=j(f),o===P?~o&&U[o].p(f,p):(_&&(V(),w(U[P],1,1,()=>{U[P]=null}),G()),~o?(_=U[o],_?_.p(f,p):(_=U[o]=B[o](f),_.c()),h(_,1),_.m(r,null)):_=null),(!T||p[0]&32)&&J(r,"reduced-height",f[5].length>1),p[0]&4&&ne(r,"width",f[2]?"auto":"100%"),p[0]&32&&(E=f[5].length>1||f[5].includes("clipboard")),E?k?(k.p(f,p),p[0]&32&&h(k,1)):(k=Me(f),k.c(),h(k,1),k.m(l,null)):k&&(V(),w(k,1,1,()=>{k=null}),G())},i(f){T||(h(e.$$.fragment,f),h(m),h(a.$$.fragment,f),h(_),h(k),T=!0)},o(f){w(e.$$.fragment,f),w(m),w(a.$$.fragment,f),w(_),w(k),T=!1},d(f){f&&(W(t),W(l)),O(e,f),m&&m.d(),i[26](null),O(a),~o&&U[o].d(),k&&k.d()}}}function Et(i,e,t){let l,{$$slots:n={},$$scope:r}=e,{value:a}=e,{label:d=void 0}=e,{show_label:u}=e,{sources:b=["upload","clipboard","webcam"]}=e,{streaming:o=!1}=e,{pending:_=!1}=e,{mirror_webcam:y}=e,{selectable:E=!1}=e,{root:T}=e,{i18n:m}=e,{max_file_size:I=null}=e,{upload:v}=e,{stream_handler:z}=e,B,U=!1,{active_source:j=null}=e;function k({detail:c}){t(2,a=c),S("upload")}function f(){t(2,a=null),S("clear"),S("change",null)}async function p(c){t(23,_=!0);const le=await B.load_files([new File([c],"webcam.png")]);t(2,a=le?.[0]||null),await He(),S(o?"stream":"change"),t(23,_=!1)}const S=ie();let{dragging:q=!1}=e;function P(c){let le=Xe(c);le&&S("select",{index:le,value:null})}async function ae(c){switch(c){case"clipboard":B.paste_clipboard();break}}const se=()=>{t(2,a=null),S("clear")};function oe(c){te[c?"unshift":"push"](()=>{B=c,t(16,B)})}function ce(c){U=c,t(14,U)}function ue(c){q=c,t(1,q)}function g(c){_e.call(this,i,c)}const L=c=>p(c.detail),F=c=>p(c.detail);function x(c){_e.call(this,i,c)}function ee(c){_e.call(this,i,c)}const fe=c=>p(c.detail);function Ce(c){j=c,t(0,j),t(5,b)}return i.$$set=c=>{"value"in c&&t(2,a=c.value),"label"in c&&t(3,d=c.label),"show_label"in c&&t(4,u=c.show_label),"sources"in c&&t(5,b=c.sources),"streaming"in c&&t(6,o=c.streaming),"pending"in c&&t(23,_=c.pending),"mirror_webcam"in c&&t(7,y=c.mirror_webcam),"selectable"in c&&t(8,E=c.selectable),"root"in c&&t(9,T=c.root),"i18n"in c&&t(10,m=c.i18n),"max_file_size"in c&&t(11,I=c.max_file_size),"upload"in c&&t(12,v=c.upload),"stream_handler"in c&&t(13,z=c.stream_handler),"active_source"in c&&t(0,j=c.active_source),"dragging"in c&&t(1,q=c.dragging),"$$scope"in c&&t(36,r=c.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&33&&!j&&b&&t(0,j=b[0]),i.$$.dirty[0]&65&&t(15,l=o&&j==="webcam"),i.$$.dirty[0]&49152&&U&&!l&&t(2,a=null),i.$$.dirty[0]&2&&S("drag",q)},[j,q,a,d,u,b,o,y,E,T,m,I,v,z,U,l,B,k,f,p,S,P,ae,_,n,se,oe,ce,ue,g,L,F,x,ee,fe,Ce,r]}class Rt extends X{constructor(e){super(),Y(this,e,Et,Ct,Z,{value:2,label:3,show_label:4,sources:5,streaming:6,pending:23,mirror_webcam:7,selectable:8,root:9,i18n:10,max_file_size:11,upload:12,stream_handler:13,active_source:0,dragging:1},null,[-1,-1])}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),D()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),D()}get show_label(){return this.$$.ctx[4]}set show_label(e){this.$$set({show_label:e}),D()}get sources(){return this.$$.ctx[5]}set sources(e){this.$$set({sources:e}),D()}get streaming(){return this.$$.ctx[6]}set streaming(e){this.$$set({streaming:e}),D()}get pending(){return this.$$.ctx[23]}set pending(e){this.$$set({pending:e}),D()}get mirror_webcam(){return this.$$.ctx[7]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),D()}get selectable(){return this.$$.ctx[8]}set selectable(e){this.$$set({selectable:e}),D()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),D()}get i18n(){return this.$$.ctx[10]}set i18n(e){this.$$set({i18n:e}),D()}get max_file_size(){return this.$$.ctx[11]}set max_file_size(e){this.$$set({max_file_size:e}),D()}get upload(){return this.$$.ctx[12]}set upload(e){this.$$set({upload:e}),D()}get stream_handler(){return this.$$.ctx[13]}set stream_handler(e){this.$$set({stream_handler:e}),D()}get active_source(){return this.$$.ctx[0]}set active_source(e){this.$$set({active_source:e}),D()}get dragging(){return this.$$.ctx[1]}set dragging(e){this.$$set({dragging:e}),D()}}const Pt=Rt;export{Pt as I,It as W};
//# sourceMappingURL=ImageUploader-Dt2u47K4.js.map
