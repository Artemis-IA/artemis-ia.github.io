{"version":3,"mappings":"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","names":["e","t","i","s","r","n","d","a","o","ctx","t_value","insert","target","option","anchor","dirty","set_data","option_value_value","create_if_block","select","i18n","$$props","micDevices","dispatch","createEventDispatcher","tempDevices","RecordPlugin","devices","$$invalidate","device","err","time","t0_value","t2_value","t4_value","t7_value","if_block","attr","button1","button1_class_value","div1","append","div0","button0","button2","button3","button4","current","t0","t2","t4","t7","record","recordButton","pauseButton","resumeButton","stopButton","stopButtonPaused","record_time","show_recording_waveform","timing","$$value","click_handler","click_handler_3","click_handler_4","if_block0","create_if_block_4","create_if_block_3","format_time","waveformrecordcontrols_changes","create_if_block_2","if_block1","create_if_block_1","if_block2","div2","mode","dispatch_blob","waveform_settings","waveform_options","handle_reset_value","editable","micWaveform","recordingWaveform","playing","recordingContainer","microphoneContainer","recordedAudio","timeRef","durationRef","audio_duration","seconds","interval","trimDuration","start_interval","create_mic_waveform","WaveSurfer","create_recording_waveform","recording","handle_trim_audio","start","end","decodedData","process_audio","trimmedAudio","onMount","skip_audio","value","waveformCanvas","blob","array_buffer","audio_buffer","audio","duration","currentTime","microphone","div","t1_value","button","span1","t1","span2","paused_recording","stop","waveformRecord","Music","blocklabel_changes","STREAM_TIMESLICE","NUM_HEADER_BYTES","label","root","loop","show_label","show_download_button","sources","pending","streaming","trim_region_settings","dragging","active_source","max_file_size","upload","stream_handler","recorder","header","pending_stream","submit_pending_stream_on_pending_end","inited","audio_chunks","module_promises","get_modules","blobs","event","_audio_blob","val","prepare_files","onDestroy","prepare_audio","stream","MediaRecorder2","register","connect","handle_chunk","buffer","payload","blobParts","clear","handle_load","detail","error_handler","edit_handler_1","block_changes","uploadtext_changes","interactiveaudio_changes","staticaudio_changes","value_is_output","elem_id","elem_classes","visible","interactive","container","scale","min_width","loading_status","autoplay","show_share_button","gradio","old_value","initial_value","color_accent","set_trim_region_colour","handle_error","level","status","afterUpdate","clear_status_handler","clear_status_handler_1","stop_recording_handler"],"ignoreList":[0],"sources":["../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/plugins/record.js","../../../audio/dist/shared/DeviceSelect.svelte","../../../audio/dist/shared/WaveformRecordControls.svelte","../../../audio/dist/recorder/AudioRecorder.svelte","../../../audio/dist/streaming/StreamAudio.svelte","../../../audio/dist/interactive/InteractiveAudio.svelte","../../../audio/dist/Index.svelte"],"sourcesContent":["function e(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((s=s.apply(e,t||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class t{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==i?void 0:i.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;null===(i=this.listeners[e])||void 0===i||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}}class i extends t{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((e=>e()))}}const s=[\"audio/webm\",\"audio/wav\",\"audio/mpeg\",\"audio/mp4\",\"audio/mp3\"];class r extends i{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:null!==(t=e.audioBitsPerSecond)&&void 0!==t?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new r(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),s=t.createAnalyser();i.connect(s);const r=s.frequencyBinCount,n=new Float32Array(r),o=r/t.sampleRate;let a;const d=()=>{s.getFloatTimeDomainData(n),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load(\"\",[n],o)),a=requestAnimationFrame(d)};return d(),()=>{cancelAnimationFrame(a),null==i||i.disconnect(),null==t||t.close()}}startMic(t){return e(this,void 0,void 0,(function*(){let e;try{e=yield navigator.mediaDevices.getUserMedia({audio:!(null==t?void 0:t.deviceId)||{deviceId:t.deviceId}})}catch(e){throw new Error(\"Error accessing the microphone: \"+e.message)}const i=this.renderMicStream(e);return this.subscriptions.push(this.once(\"destroy\",i)),this.stream=e,e}))}stopMic(){this.stream&&(this.stream.getTracks().forEach((e=>e.stop())),this.stream=null,this.mediaRecorder=null)}startRecording(t){return e(this,void 0,void 0,(function*(){const e=this.stream||(yield this.startMic(t)),i=this.mediaRecorder||new MediaRecorder(e,{mimeType:this.options.mimeType||s.find((e=>MediaRecorder.isTypeSupported(e))),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const r=[];i.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},i.onstop=()=>{var e;const t=new Blob(r,{type:i.mimeType});this.emit(\"record-end\",t),!1!==this.options.renderRecordedAudio&&(null===(e=this.wavesurfer)||void 0===e||e.load(URL.createObjectURL(t)))},i.start(),this.emit(\"record-start\")}))}isRecording(){var e;return\"recording\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}isPaused(){var e;return\"paused\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}stopRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.stop())}pauseRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.pause(),this.emit(\"record-pause\"))}resumeRecording(){var e;this.isPaused()&&(null===(e=this.mediaRecorder)||void 0===e||e.resume(),this.emit(\"record-resume\"))}static getAvailableAudioDevices(){return e(this,void 0,void 0,(function*(){return navigator.mediaDevices.enumerateDevices().then((e=>e.filter((e=>\"audioinput\"===e.kind))))}))}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}export{r as default};\n","<script>import RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport { createEventDispatcher } from \"svelte\";\nexport let i18n;\nexport let micDevices = [];\nconst dispatch = createEventDispatcher();\n$:\n  try {\n    let tempDevices = [];\n    RecordPlugin.getAvailableAudioDevices().then(\n      (devices) => {\n        micDevices = devices;\n        devices.forEach((device) => {\n          if (device.deviceId) {\n            tempDevices.push(device);\n          }\n        });\n        micDevices = tempDevices;\n      }\n    );\n  } catch (err) {\n    if (err instanceof DOMException && err.name == \"NotAllowedError\") {\n      dispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n    }\n    throw err;\n  }\n</script>\n\n<select\n\tclass=\"mic-select\"\n\taria-label=\"Select input device\"\n\tdisabled={micDevices.length === 0}\n>\n\t{#if micDevices.length === 0}\n\t\t<option value=\"\">{i18n(\"audio.no_microphone\")}</option>\n\t{:else}\n\t\t{#each micDevices as micDevice}\n\t\t\t<option value={micDevice.deviceId}>{micDevice.label}</option>\n\t\t{/each}\n\t{/if}\n</select>\n\n<style>\n\t.mic-select {\n\t\theight: var(--size-8);\n\t\tbackground: var(--block-background-fill);\n\t\tpadding: 0px var(--spacing-xxl);\n\t\tborder-radius: var(--radius-full);\n\t\tfont-size: var(--text-md);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tgap: var(--size-1);\n\t}\n\n\tselect {\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: var(--size-40);\n\t}\n\n\t@media (max-width: 375px) {\n\t\tselect {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n</style>\n","<script>import { Pause } from \"@gradio/icons\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport DeviceSelect from \"./DeviceSelect.svelte\";\nexport let record;\nexport let i18n;\nlet micDevices = [];\nlet recordButton;\nlet pauseButton;\nlet resumeButton;\nlet stopButton;\nlet stopButtonPaused;\nexport let record_time;\nexport let show_recording_waveform;\nexport let timing = false;\n$:\n  record.on(\"record-start\", () => {\n    record.startMic();\n    recordButton.style.display = \"none\";\n    stopButton.style.display = \"flex\";\n    pauseButton.style.display = \"block\";\n  });\n$:\n  record.on(\"record-end\", () => {\n    if (record.isPaused()) {\n      record.resumeRecording();\n      record.stopRecording();\n    }\n    record.stopMic();\n    recordButton.style.display = \"flex\";\n    stopButton.style.display = \"none\";\n    pauseButton.style.display = \"none\";\n    recordButton.disabled = false;\n  });\n$:\n  record.on(\"record-pause\", () => {\n    pauseButton.style.display = \"none\";\n    resumeButton.style.display = \"block\";\n    stopButton.style.display = \"none\";\n    stopButtonPaused.style.display = \"flex\";\n  });\n$:\n  record.on(\"record-resume\", () => {\n    pauseButton.style.display = \"block\";\n    resumeButton.style.display = \"none\";\n    recordButton.style.display = \"none\";\n    stopButton.style.display = \"flex\";\n    stopButtonPaused.style.display = \"none\";\n  });\n</script>\n\n<div class=\"controls\">\n\t<div class=\"wrapper\">\n\t\t<button\n\t\t\tbind:this={recordButton}\n\t\t\tclass=\"record record-button\"\n\t\t\ton:click={() => record.startRecording()}>{i18n(\"audio.record\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tbind:this={stopButton}\n\t\t\tclass=\"stop-button {record.isPaused() ? 'stop-button-paused' : ''}\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tbind:this={stopButtonPaused}\n\t\t\tid=\"stop-paused\"\n\t\t\tclass=\"stop-button-paused\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\taria-label=\"pause\"\n\t\t\tbind:this={pauseButton}\n\t\t\tclass=\"pause-button\"\n\t\t\ton:click={() => record.pauseRecording()}><Pause /></button\n\t\t>\n\t\t<button\n\t\t\tbind:this={resumeButton}\n\t\t\tclass=\"resume-button\"\n\t\t\ton:click={() => record.resumeRecording()}>{i18n(\"audio.resume\")}</button\n\t\t>\n\t\t{#if timing && !show_recording_waveform}\n\t\t\t<time class=\"duration-button duration\">{record_time}</time>\n\t\t{/if}\n\t</div>\n\t<DeviceSelect bind:micDevices {i18n} />\n</div>\n\n<style>\n\t.controls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.record {\n\t\tmargin-right: var(--spacing-md);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t}\n\n\t.stop-button:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.record-button:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: 0.5;\n\t}\n\n\t@keyframes scaling {\n\t\t0% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t\t50% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1.2;\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t}\n\n\t.pause-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-3xl);\n\t\tpadding: var(--spacing-md);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.resume-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-3xl);\n\t\tpadding: var(--spacing-xl);\n\t\tline-height: 1px;\n\t\tfont-size: var(--text-md);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.duration {\n\t\tdisplay: flex;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-3xl);\n\t\tpadding: var(--spacing-md);\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t:global(::part(region)) {\n\t\tborder-radius: var(--radius-md);\n\t\theight: 98% !important;\n\t\tborder: 1px solid var(--trim-region-color);\n\t\tbackground-color: unset;\n\t\tborder-width: 1px 3px;\n\t}\n\n\t:global(::part(region))::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: var(--trim-region-color);\n\t\topacity: 0.2;\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t:global(::part(region-handle)) {\n\t\twidth: 5px !important;\n\t\tborder: none;\n\t}\n</style>\n","<script>import { onMount } from \"svelte\";\nimport { createEventDispatcher } from \"svelte\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport { skip_audio, process_audio } from \"../shared/utils\";\nimport WSRecord from \"wavesurfer.js/dist/plugins/record.js\";\nimport WaveformControls from \"../shared/WaveformControls.svelte\";\nimport WaveformRecordControls from \"../shared/WaveformRecordControls.svelte\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport { format_time } from \"@gradio/utils\";\nexport let mode;\nexport let i18n;\nexport let dispatch_blob;\nexport let waveform_settings;\nexport let waveform_options = {\n  show_recording_waveform: true\n};\nexport let handle_reset_value;\nexport let editable = true;\nlet micWaveform;\nlet recordingWaveform;\nlet playing = false;\nlet recordingContainer;\nlet microphoneContainer;\nlet record;\nlet recordedAudio = null;\nlet timeRef;\nlet durationRef;\nlet audio_duration;\nlet seconds = 0;\nlet interval;\nlet timing = false;\nlet trimDuration = 0;\nconst start_interval = () => {\n  clearInterval(interval);\n  interval = setInterval(() => {\n    seconds++;\n  }, 1e3);\n};\nconst dispatch = createEventDispatcher();\n$:\n  record?.on(\"record-start\", () => {\n    start_interval();\n    timing = true;\n    dispatch(\"start_recording\");\n    if (waveform_options.show_recording_waveform) {\n      let waveformCanvas = microphoneContainer;\n      if (waveformCanvas)\n        waveformCanvas.style.display = \"block\";\n    }\n  });\n$:\n  record?.on(\"record-end\", async (blob) => {\n    seconds = 0;\n    timing = false;\n    clearInterval(interval);\n    try {\n      const array_buffer = await blob.arrayBuffer();\n      const context = new AudioContext({\n        sampleRate: waveform_settings.sampleRate\n      });\n      const audio_buffer = await context.decodeAudioData(array_buffer);\n      if (audio_buffer)\n        await process_audio(audio_buffer).then(async (audio) => {\n          await dispatch_blob([audio], \"change\");\n          await dispatch_blob([audio], \"stop_recording\");\n        });\n    } catch (e) {\n      console.error(e);\n    }\n  });\n$:\n  record?.on(\"record-pause\", () => {\n    dispatch(\"pause_recording\");\n    clearInterval(interval);\n  });\n$:\n  record?.on(\"record-resume\", () => {\n    start_interval();\n  });\n$:\n  recordingWaveform?.on(\"decode\", (duration) => {\n    audio_duration = duration;\n    durationRef && (durationRef.textContent = format_time(duration));\n  });\n$:\n  recordingWaveform?.on(\n    \"timeupdate\",\n    (currentTime) => timeRef && (timeRef.textContent = format_time(currentTime))\n  );\n$:\n  recordingWaveform?.on(\"pause\", () => {\n    dispatch(\"pause\");\n    playing = false;\n  });\n$:\n  recordingWaveform?.on(\"play\", () => {\n    dispatch(\"play\");\n    playing = true;\n  });\n$:\n  recordingWaveform?.on(\"finish\", () => {\n    dispatch(\"stop\");\n    playing = false;\n  });\nconst create_mic_waveform = () => {\n  if (microphoneContainer)\n    microphoneContainer.innerHTML = \"\";\n  if (micWaveform !== void 0)\n    micWaveform.destroy();\n  if (!microphoneContainer)\n    return;\n  micWaveform = WaveSurfer.create({\n    ...waveform_settings,\n    normalize: false,\n    container: microphoneContainer\n  });\n  record = micWaveform.registerPlugin(RecordPlugin.create());\n  record.startMic();\n};\nconst create_recording_waveform = () => {\n  let recording = recordingContainer;\n  if (!recordedAudio || !recording)\n    return;\n  recordingWaveform = WaveSurfer.create({\n    container: recording,\n    url: recordedAudio,\n    ...waveform_settings\n  });\n};\n$:\n  record?.on(\"record-end\", (blob) => {\n    recordedAudio = URL.createObjectURL(blob);\n    const microphone = microphoneContainer;\n    const recording = recordingContainer;\n    if (microphone)\n      microphone.style.display = \"none\";\n    if (recording && recordedAudio) {\n      recording.innerHTML = \"\";\n      create_recording_waveform();\n    }\n  });\nconst handle_trim_audio = async (start, end) => {\n  mode = \"edit\";\n  const decodedData = recordingWaveform.getDecodedData();\n  if (decodedData)\n    await process_audio(decodedData, start, end).then(\n      async (trimmedAudio) => {\n        await dispatch_blob([trimmedAudio], \"change\");\n        await dispatch_blob([trimmedAudio], \"stop_recording\");\n        recordingWaveform.destroy();\n        create_recording_waveform();\n      }\n    );\n  dispatch(\"edit\");\n};\nonMount(() => {\n  create_mic_waveform();\n  window.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"ArrowRight\") {\n      skip_audio(recordingWaveform, 0.1);\n    } else if (e.key === \"ArrowLeft\") {\n      skip_audio(recordingWaveform, -0.1);\n    }\n  });\n});\n</script>\n\n<div class=\"component-wrapper\">\n\t<div\n\t\tclass=\"microphone\"\n\t\tbind:this={microphoneContainer}\n\t\tdata-testid=\"microphone-waveform\"\n\t/>\n\t<div bind:this={recordingContainer} data-testid=\"recording-waveform\" />\n\n\t{#if (timing || recordedAudio) && waveform_options.show_recording_waveform}\n\t\t<div class=\"timestamps\">\n\t\t\t<time bind:this={timeRef} class=\"time\">0:00</time>\n\t\t\t<div>\n\t\t\t\t{#if mode === \"edit\" && trimDuration > 0}\n\t\t\t\t\t<time class=\"trim-duration\">{format_time(trimDuration)}</time>\n\t\t\t\t{/if}\n\t\t\t\t{#if timing}\n\t\t\t\t\t<time class=\"duration\">{format_time(seconds)}</time>\n\t\t\t\t{:else}\n\t\t\t\t\t<time bind:this={durationRef} class=\"duration\">0:00</time>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t{#if microphoneContainer && !recordedAudio}\n\t\t<WaveformRecordControls\n\t\t\tbind:record\n\t\t\t{i18n}\n\t\t\t{timing}\n\t\t\tshow_recording_waveform={waveform_options.show_recording_waveform}\n\t\t\trecord_time={format_time(seconds)}\n\t\t/>\n\t{/if}\n\n\t{#if recordingWaveform && recordedAudio}\n\t\t<WaveformControls\n\t\t\tbind:waveform={recordingWaveform}\n\t\t\tcontainer={recordingContainer}\n\t\t\t{playing}\n\t\t\t{audio_duration}\n\t\t\t{i18n}\n\t\t\t{editable}\n\t\t\tinteractive={true}\n\t\t\t{handle_trim_audio}\n\t\t\tbind:trimDuration\n\t\t\tbind:mode\n\t\t\tshow_redo\n\t\t\t{handle_reset_value}\n\t\t\t{waveform_options}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.microphone {\n\t\twidth: 100%;\n\t\tdisplay: none;\n\t}\n\n\t.component-wrapper {\n\t\tpadding: var(--size-3);\n\t\twidth: 100%;\n\t}\n\n\t.timestamps {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tpadding: var(--size-1) 0;\n\t\tmargin: var(--spacing-md) 0;\n\t}\n\n\t.time {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t.duration {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t.trim-duration {\n\t\tcolor: var(--color-accent);\n\t\tmargin-right: var(--spacing-sm);\n\t}\n</style>\n","<script>import { onMount } from \"svelte\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport DeviceSelect from \"../shared/DeviceSelect.svelte\";\nexport let recording = false;\nexport let paused_recording = false;\nexport let stop;\nexport let record;\nexport let i18n;\nexport let waveform_settings;\nexport let waveform_options = {\n  show_recording_waveform: true\n};\nlet micWaveform;\nlet waveformRecord;\nlet microphoneContainer;\nlet micDevices = [];\nonMount(() => {\n  create_mic_waveform();\n});\nconst create_mic_waveform = () => {\n  if (micWaveform !== void 0)\n    micWaveform.destroy();\n  if (!microphoneContainer)\n    return;\n  micWaveform = WaveSurfer.create({\n    ...waveform_settings,\n    height: 100,\n    container: microphoneContainer\n  });\n  waveformRecord = micWaveform.registerPlugin(RecordPlugin.create());\n};\n</script>\n\n<div class=\"mic-wrap\">\n\t{#if waveform_options.show_recording_waveform}\n\t\t<div\n\t\t\tbind:this={microphoneContainer}\n\t\t\tstyle:display={recording ? \"block\" : \"none\"}\n\t\t/>\n\t{/if}\n\t<div class=\"controls\">\n\t\t{#if recording}\n\t\t\t<button\n\t\t\t\tclass={paused_recording ? \"stop-button-paused\" : \"stop-button\"}\n\t\t\t\ton:click={() => {\n\t\t\t\t\twaveformRecord?.stopMic();\n\t\t\t\t\tstop();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span class=\"record-icon\">\n\t\t\t\t\t<span class=\"pinger\" />\n\t\t\t\t\t<span class=\"dot\" />\n\t\t\t\t</span>\n\t\t\t\t{paused_recording ? i18n(\"audio.pause\") : i18n(\"audio.stop\")}\n\t\t\t</button>\n\t\t{:else}\n\t\t\t<button\n\t\t\t\tclass=\"record-button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\twaveformRecord?.startMic();\n\t\t\t\t\trecord();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span class=\"record-icon\">\n\t\t\t\t\t<span class=\"dot\" />\n\t\t\t\t</span>\n\t\t\t\t{i18n(\"audio.record\")}\n\t\t\t</button>\n\t\t{/if}\n\n\t\t<DeviceSelect bind:micDevices {i18n} />\n\t</div>\n</div>\n\n<style>\n\t.controls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.mic-wrap {\n\t\tdisplay: block;\n\t\talign-items: center;\n\t\tmargin: var(--spacing-xl);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t\tmargin-right: 5px;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin-right: 5px;\n\t\tdisplay: flex;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t}\n\n\t@keyframes scaling {\n\t\t0% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t\t50% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1.2;\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t}\n</style>\n","<script>import { onDestroy, createEventDispatcher } from \"svelte\";\nimport { Upload, ModifyUpload } from \"@gradio/upload\";\nimport { prepare_files } from \"@gradio/client\";\nimport { BlockLabel } from \"@gradio/atoms\";\nimport { Music } from \"@gradio/icons\";\nimport AudioPlayer from \"../player/AudioPlayer.svelte\";\nimport AudioRecorder from \"../recorder/AudioRecorder.svelte\";\nimport StreamAudio from \"../streaming/StreamAudio.svelte\";\nimport { SelectSource } from \"@gradio/atoms\";\nexport let value = null;\nexport let label;\nexport let root;\nexport let loop;\nexport let show_label = true;\nexport let show_download_button = false;\nexport let sources = [\"microphone\", \"upload\"];\nexport let pending = false;\nexport let streaming = false;\nexport let i18n;\nexport let waveform_settings;\nexport let trim_region_settings = {};\nexport let waveform_options = {};\nexport let dragging;\nexport let active_source;\nexport let handle_reset_value = () => {\n};\nexport let editable = true;\nexport let max_file_size = null;\nexport let upload;\nexport let stream_handler;\n$:\n  dispatch(\"drag\", dragging);\nlet recording = false;\nlet recorder;\nlet mode = \"\";\nlet header = void 0;\nlet pending_stream = [];\nlet submit_pending_stream_on_pending_end = false;\nlet inited = false;\nconst STREAM_TIMESLICE = 500;\nconst NUM_HEADER_BYTES = 44;\nlet audio_chunks = [];\nlet module_promises;\nfunction get_modules() {\n  module_promises = [\n    import(\"extendable-media-recorder\"),\n    import(\"extendable-media-recorder-wav-encoder\")\n  ];\n}\nif (streaming) {\n  get_modules();\n}\nconst dispatch = createEventDispatcher();\nconst dispatch_blob = async (blobs, event) => {\n  let _audio_blob = new File(blobs, \"audio.wav\");\n  const val = await prepare_files([_audio_blob], event === \"stream\");\n  value = ((await upload(val, root, void 0, max_file_size || void 0))?.filter(\n    Boolean\n  ))[0];\n  dispatch(event, value);\n};\nonDestroy(() => {\n  if (streaming && recorder && recorder.state !== \"inactive\") {\n    recorder.stop();\n  }\n});\nasync function prepare_audio() {\n  let stream;\n  try {\n    stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n  } catch (err) {\n    if (!navigator.mediaDevices) {\n      dispatch(\"error\", i18n(\"audio.no_device_support\"));\n      return;\n    }\n    if (err instanceof DOMException && err.name == \"NotAllowedError\") {\n      dispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n      return;\n    }\n    throw err;\n  }\n  if (stream == null)\n    return;\n  if (streaming) {\n    const [{ MediaRecorder: MediaRecorder2, register }, { connect }] = await Promise.all(module_promises);\n    await register(await connect());\n    recorder = new MediaRecorder2(stream, { mimeType: \"audio/wav\" });\n    recorder.addEventListener(\"dataavailable\", handle_chunk);\n  } else {\n    recorder = new MediaRecorder(stream);\n    recorder.addEventListener(\"dataavailable\", (event) => {\n      audio_chunks.push(event.data);\n    });\n    recorder.addEventListener(\"stop\", async () => {\n      recording = false;\n      await dispatch_blob(audio_chunks, \"change\");\n      await dispatch_blob(audio_chunks, \"stop_recording\");\n      audio_chunks = [];\n    });\n  }\n  inited = true;\n}\nasync function handle_chunk(event) {\n  let buffer = await event.data.arrayBuffer();\n  let payload = new Uint8Array(buffer);\n  if (!header) {\n    header = new Uint8Array(buffer.slice(0, NUM_HEADER_BYTES));\n    payload = new Uint8Array(buffer.slice(NUM_HEADER_BYTES));\n  }\n  if (pending) {\n    pending_stream.push(payload);\n  } else {\n    let blobParts = [header].concat(pending_stream, [payload]);\n    dispatch_blob(blobParts, \"stream\");\n    pending_stream = [];\n  }\n}\n$:\n  if (submit_pending_stream_on_pending_end && pending === false) {\n    submit_pending_stream_on_pending_end = false;\n    if (header && pending_stream) {\n      let blobParts = [header].concat(pending_stream);\n      pending_stream = [];\n      dispatch_blob(blobParts, \"stream\");\n    }\n  }\nasync function record() {\n  recording = true;\n  dispatch(\"start_recording\");\n  if (!inited)\n    await prepare_audio();\n  header = void 0;\n  if (streaming) {\n    recorder.start(STREAM_TIMESLICE);\n  }\n}\nfunction clear() {\n  dispatch(\"change\", null);\n  dispatch(\"clear\");\n  mode = \"\";\n  value = null;\n}\nfunction handle_load({ detail }) {\n  value = detail;\n  dispatch(\"change\", detail);\n  dispatch(\"upload\", detail);\n}\nfunction stop() {\n  recording = false;\n  if (streaming) {\n    dispatch(\"stop_recording\");\n    recorder.stop();\n    if (pending) {\n      submit_pending_stream_on_pending_end = true;\n    }\n    dispatch_blob(audio_chunks, \"stop_recording\");\n    dispatch(\"clear\");\n    mode = \"\";\n  }\n}\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={active_source === \"upload\" && value === null}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n<div class=\"audio-container\">\n\t{#if value === null || streaming}\n\t\t{#if active_source === \"microphone\"}\n\t\t\t<ModifyUpload {i18n} on:clear={clear} absolute={true} />\n\t\t\t{#if streaming}\n\t\t\t\t<StreamAudio\n\t\t\t\t\t{record}\n\t\t\t\t\t{recording}\n\t\t\t\t\t{stop}\n\t\t\t\t\t{i18n}\n\t\t\t\t\t{waveform_settings}\n\t\t\t\t\t{waveform_options}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<AudioRecorder\n\t\t\t\t\tbind:mode\n\t\t\t\t\t{i18n}\n\t\t\t\t\t{editable}\n\t\t\t\t\t{dispatch_blob}\n\t\t\t\t\t{waveform_settings}\n\t\t\t\t\t{waveform_options}\n\t\t\t\t\t{handle_reset_value}\n\t\t\t\t\ton:start_recording\n\t\t\t\t\ton:pause_recording\n\t\t\t\t\ton:stop_recording\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t{:else if active_source === \"upload\"}\n\t\t\t<!-- explicitly listed out audio mimetypes due to iOS bug not recognizing audio/* -->\n\t\t\t<Upload\n\t\t\t\tfiletype=\"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*\"\n\t\t\t\ton:load={handle_load}\n\t\t\t\tbind:dragging\n\t\t\t\ton:error={({ detail }) => dispatch(\"error\", detail)}\n\t\t\t\t{root}\n\t\t\t\t{max_file_size}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t>\n\t\t\t\t<slot />\n\t\t\t</Upload>\n\t\t{/if}\n\t{:else}\n\t\t<ModifyUpload\n\t\t\t{i18n}\n\t\t\ton:clear={clear}\n\t\t\ton:edit={() => (mode = \"edit\")}\n\t\t\tdownload={show_download_button ? value.url : null}\n\t\t\tabsolute={true}\n\t\t/>\n\n\t\t<AudioPlayer\n\t\t\tbind:mode\n\t\t\t{value}\n\t\t\t{label}\n\t\t\t{i18n}\n\t\t\t{dispatch_blob}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{trim_region_settings}\n\t\t\t{handle_reset_value}\n\t\t\t{editable}\n\t\t\t{loop}\n\t\t\tinteractive\n\t\t\ton:stop\n\t\t\ton:play\n\t\t\ton:pause\n\t\t\ton:edit\n\t\t/>\n\t{/if}\n\t<SelectSource {sources} bind:active_source handle_clear={clear} />\n</div>\n\n<style>\n\t.audio-container {\n\t\theight: calc(var(--size-full) - var(--size-6));\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script>import { afterUpdate, onMount } from \"svelte\";\nimport StaticAudio from \"./static/StaticAudio.svelte\";\nimport InteractiveAudio from \"./interactive/InteractiveAudio.svelte\";\nimport { StatusTracker } from \"@gradio/statustracker\";\nimport { Block, UploadText } from \"@gradio/atoms\";\nexport let value_is_output = false;\nexport let elem_id = \"\";\nexport let elem_classes = [];\nexport let visible = true;\nexport let interactive;\nexport let value = null;\nexport let sources;\nexport let label;\nexport let root;\nexport let show_label;\nexport let container = true;\nexport let scale = null;\nexport let min_width = void 0;\nexport let loading_status;\nexport let autoplay = false;\nexport let loop = false;\nexport let show_download_button;\nexport let show_share_button = false;\nexport let editable = true;\nexport let waveform_options = {};\nexport let pending;\nexport let streaming;\nexport let gradio;\nlet old_value = null;\nlet active_source;\nlet initial_value = value;\n$:\n  if (value && initial_value === null) {\n    initial_value = value;\n  }\nconst handle_reset_value = () => {\n  if (initial_value === null || value === initial_value) {\n    return;\n  }\n  value = initial_value;\n};\n$: {\n  if (JSON.stringify(value) !== JSON.stringify(old_value)) {\n    old_value = value;\n    gradio.dispatch(\"change\");\n    if (!value_is_output) {\n      gradio.dispatch(\"input\");\n    }\n  }\n}\nlet dragging;\n$:\n  if (!active_source && sources) {\n    active_source = sources[0];\n  }\nlet waveform_settings;\nlet color_accent = \"darkorange\";\nonMount(() => {\n  color_accent = getComputedStyle(document?.documentElement).getPropertyValue(\n    \"--color-accent\"\n  );\n  set_trim_region_colour();\n  waveform_settings.waveColor = waveform_options.waveform_color || \"#9ca3af\";\n  waveform_settings.progressColor = waveform_options.waveform_progress_color || color_accent;\n  waveform_settings.mediaControls = waveform_options.show_controls;\n  waveform_settings.sampleRate = waveform_options.sample_rate || 44100;\n});\n$:\n  waveform_settings = {\n    height: 50,\n    barWidth: 2,\n    barGap: 3,\n    cursorWidth: 2,\n    cursorColor: \"#ddd5e9\",\n    autoplay,\n    barRadius: 10,\n    dragToSeek: true,\n    normalize: true,\n    minPxPerSec: 20\n  };\nconst trim_region_settings = {\n  color: waveform_options.trim_region_color,\n  drag: true,\n  resize: true\n};\nfunction set_trim_region_colour() {\n  document.documentElement.style.setProperty(\n    \"--trim-region-color\",\n    trim_region_settings.color || color_accent\n  );\n}\nfunction handle_error({ detail }) {\n  const [level, status] = detail.includes(\"Invalid file type\") ? [\"warning\", \"complete\"] : [\"error\", \"error\"];\n  loading_status = loading_status || {};\n  loading_status.status = status;\n  loading_status.message = detail;\n  gradio.dispatch(level, detail);\n}\nafterUpdate(() => {\n  value_is_output = false;\n});\n</script>\n\n{#if !interactive}\n\t<Block\n\t\tvariant={\"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\tallow_overflow={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\n\t\t<StaticAudio\n\t\t\ti18n={gradio.i18n}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{show_share_button}\n\t\t\t{value}\n\t\t\t{label}\n\t\t\t{loop}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{editable}\n\t\t\ton:share={(e) => gradio.dispatch(\"share\", e.detail)}\n\t\t\ton:error={(e) => gradio.dispatch(\"error\", e.detail)}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\tvariant={value === null && active_source === \"upload\" ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\tallow_overflow={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\t\t<InteractiveAudio\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{value}\n\t\t\ton:change={({ detail }) => (value = detail)}\n\t\t\ton:stream={({ detail }) => {\n\t\t\t\tvalue = detail;\n\t\t\t\tgradio.dispatch(\"stream\", value);\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\t{root}\n\t\t\t{sources}\n\t\t\t{active_source}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\t{loop}\n\t\t\tmax_file_size={gradio.max_file_size}\n\t\t\t{handle_reset_value}\n\t\t\t{editable}\n\t\t\tbind:dragging\n\t\t\ton:edit={() => gradio.dispatch(\"edit\")}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\t\ton:pause_recording={() => gradio.dispatch(\"pause_recording\")}\n\t\t\ton:stop_recording={(e) => gradio.dispatch(\"stop_recording\")}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:error={handle_error}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{trim_region_settings}\n\t\t\tupload={gradio.client.upload}\n\t\t\tstream_handler={gradio.client.stream}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"audio\" />\n\t\t</InteractiveAudio>\n\t</Block>\n{/if}\n"],"file":"assets/index-Eq5nxS8L.js"}